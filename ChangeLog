------------------------------------------------------------------------
r1197 | tjfontaine | 2007-11-02 16:27:45 +0000 (Fri, 02 Nov 2007) | 2 lines

Remove clients from the enforce list when identified by CERTFP fixes #82

------------------------------------------------------------------------
r1194 | weasel | 2007-10-31 21:23:06 +0000 (Wed, 31 Oct 2007) | 1 line

Fix a core when enforcing akicks.
------------------------------------------------------------------------
r1192 | swalsh | 2007-10-31 11:16:19 +0000 (Wed, 31 Oct 2007) | 1 line

bump version
------------------------------------------------------------------------
r1191 | swalsh | 2007-10-31 11:15:12 +0000 (Wed, 31 Oct 2007) | 1 line

adding akicks got broken slightly.  Fixes #80
------------------------------------------------------------------------
r1190 | swalsh | 2007-10-31 10:57:45 +0000 (Wed, 31 Oct 2007) | 1 line

merge 1156 from trunk - tj's ruby fixes
------------------------------------------------------------------------
r1189 | swalsh | 2007-10-31 00:27:06 +0000 (Wed, 31 Oct 2007) | 1 line

be nice if we identfied on nick change with a cert, too
------------------------------------------------------------------------
r1187 | swalsh | 2007-10-30 23:58:35 +0000 (Tue, 30 Oct 2007) | 1 line

Create the channel if it goes away but still needs to exist.  One day this will be done a better way
------------------------------------------------------------------------
r1185 | swalsh | 2007-10-30 23:14:22 +0000 (Tue, 30 Oct 2007) | 1 line

merge 1175/1176 from trunk - various fixes
------------------------------------------------------------------------
r1184 | swalsh | 2007-10-30 23:11:26 +0000 (Tue, 30 Oct 2007) | 1 line

merge 1177 from trunk, nice core fix
------------------------------------------------------------------------
r1183 | swalsh | 2007-10-30 23:06:31 +0000 (Tue, 30 Oct 2007) | 1 line

commit dodgy crack-inspiried-by-weasel fix to autogen to fix libltdl problems with make dist
------------------------------------------------------------------------
r1182 | swalsh | 2007-10-26 18:07:49 +0100 (Fri, 26 Oct 2007) | 1 line

remove someone from a channel when we kick them, so we dont desync.  Fixes #72
------------------------------------------------------------------------
r1181 | swalsh | 2007-10-24 22:41:37 +0100 (Wed, 24 Oct 2007) | 1 line

update version
------------------------------------------------------------------------
r1180 | swalsh | 2007-10-24 22:41:05 +0100 (Wed, 24 Oct 2007) | 1 line

use lower() on cloakstring. Fixes #68
------------------------------------------------------------------------
r1179 | swalsh | 2007-10-24 22:30:31 +0100 (Wed, 24 Oct 2007) | 1 line

MTT from 1178 - add an index for account_cert table.  Also accidentally commited a fix for kicking users.  Make sure we remove the user from the channel list since we get no ACK from the server to do so.  re #72
------------------------------------------------------------------------
r1173 | cberg | 2007-10-21 19:52:08 +0100 (Sun, 21 Oct 2007) | 2 lines

Merge r1167 into 1.1: Do not segfault on plain "CERT ADD" without fingerprint

------------------------------------------------------------------------
r1161 | swalsh | 2007-09-15 21:25:14 +0100 (Sat, 15 Sep 2007) | 1 line

Do some stuff to make sure we dont end up with orphaned channels when we drop nicks. Fixes #61
------------------------------------------------------------------------
r1159 | swalsh | 2007-08-24 19:21:39 +0100 (Fri, 24 Aug 2007) | 1 line

update patchlevel
------------------------------------------------------------------------
r1157 | swalsh | 2007-08-24 16:59:31 +0100 (Fri, 24 Aug 2007) | 1 line

upper case fingerprints and enable a few things to use the new +P usermode in 1.6
------------------------------------------------------------------------
r1154 | tjfontaine | 2007-08-23 19:34:52 +0100 (Thu, 23 Aug 2007) | 2 lines

Check if the module is null before trying to compare it's name.

------------------------------------------------------------------------
r1149 | swalsh | 2007-08-20 20:51:44 +0100 (Mon, 20 Aug 2007) | 1 line

Fix the akill snotes somewhat, also fix a buffer overslow in akill removal.  re #48
------------------------------------------------------------------------
r1147 | swalsh | 2007-08-20 18:58:03 +0100 (Mon, 20 Aug 2007) | 1 line

allow users to add a cert without providing a paramter, also validate the fingerprint a bit
------------------------------------------------------------------------
r1145 | swalsh | 2007-08-20 17:48:31 +0100 (Mon, 20 Aug 2007) | 1 line

Branch 1.1
------------------------------------------------------------------------
r1144 | swalsh | 2007-08-20 17:11:19 +0100 (Mon, 20 Aug 2007) | 1 line

Give s tring duration instead of a integer one in akill add notices.  Fixes #23
------------------------------------------------------------------------
r1143 | swalsh | 2007-08-20 17:08:45 +0100 (Mon, 20 Aug 2007) | 1 line

snote on akill removal.  Fixes #48
------------------------------------------------------------------------
r1142 | swalsh | 2007-08-20 16:52:43 +0100 (Mon, 20 Aug 2007) | 1 line

MTT 1136 guest nick core re #60
------------------------------------------------------------------------
r1141 | swalsh | 2007-08-20 16:47:35 +0100 (Mon, 20 Aug 2007) | 1 line

MTT Change 1130 re #56
------------------------------------------------------------------------
r1140 | swalsh | 2007-08-20 16:43:40 +0100 (Mon, 20 Aug 2007) | 1 line

MTT changeset 1129 re #59
------------------------------------------------------------------------
r1139 | swalsh | 2007-08-20 16:19:25 +0100 (Mon, 20 Aug 2007) | 1 line

Merge cs verbose from 1.0. re #50
------------------------------------------------------------------------
r1135 | tjfontaine | 2007-08-19 23:00:13 +0100 (Sun, 19 Aug 2007) | 2 lines

Implement JupeServ as part of OperServ, persistent in db reloaded on connect,  SQUITs remove from DB as well.

------------------------------------------------------------------------
r1134 | tjfontaine | 2007-08-19 20:09:44 +0100 (Sun, 19 Aug 2007) | 1 line

make floodserv leave channels when they are dropped or he's the last in it Fixes #55
------------------------------------------------------------------------
r1133 | weasel | 2007-08-15 20:35:55 +0100 (Wed, 15 Aug 2007) | 1 line

Remove an akick entry if the nick is dropped (forward port r1132 from 1.0 branch).  fixes #58
------------------------------------------------------------------------
r1125 | tjfontaine | 2007-07-21 00:57:12 +0100 (Sat, 21 Jul 2007) | 2 lines

Multiple word descriptions might be nice on channel registration. re #54

------------------------------------------------------------------------
r1124 | tjfontaine | 2007-07-20 19:41:47 +0100 (Fri, 20 Jul 2007) | 2 lines

Make FloodServ debug message less frequent but just as helpful

------------------------------------------------------------------------
r1123 | tjfontaine | 2007-07-20 19:29:49 +0100 (Fri, 20 Jul 2007) | 2 lines

FloodServ uses a dlink_list instead of an array, uses much less memory on start as a result

------------------------------------------------------------------------
r1122 | swalsh | 2007-07-20 17:17:43 +0100 (Fri, 20 Jul 2007) | 1 line

merge fixes to trunk re mode desyncs. fixes #32
------------------------------------------------------------------------
r1119 | tjfontaine | 2007-07-17 18:20:09 +0100 (Tue, 17 Jul 2007) | 2 lines

Implemented ChanServ CLEAR MODES Fixes #33, also resolved a +k MLOCK issue re #32, added various debug prints

------------------------------------------------------------------------
r1118 | tjfontaine | 2007-07-13 21:45:55 +0100 (Fri, 13 Jul 2007) | 2 lines

floodserv now cleans up +q's it has enforced, this only works so long as services doesn't die in the mean time as it relies on the banptr->who. fixes #6

------------------------------------------------------------------------
r1117 | tjfontaine | 2007-07-13 21:42:27 +0100 (Fri, 13 Jul 2007) | 2 lines

db_find_akill leaked when the akill wasn't found re #26

------------------------------------------------------------------------
r1116 | tjfontaine | 2007-07-13 21:41:25 +0100 (Fri, 13 Jul 2007) | 2 lines

now you can compile with --disable-block-heap for valgrind purposes

------------------------------------------------------------------------
r1115 | tjfontaine | 2007-07-13 21:39:57 +0100 (Fri, 13 Jul 2007) | 2 lines

extra debugging in process_expireban_list

------------------------------------------------------------------------
r1114 | tjfontaine | 2007-07-12 23:04:28 +0100 (Thu, 12 Jul 2007) | 3 lines

Add CLEAR QUIETS, UNQUIET, and remove quiets in EXPIREBANS. fixes #25
also lower services blockheap, maybe removed all together

------------------------------------------------------------------------
r1113 | tjfontaine | 2007-07-12 21:19:19 +0100 (Thu, 12 Jul 2007) | 2 lines

Add various ORDER BY clauses to help with listing and delete by index. fixes #39

------------------------------------------------------------------------
r1107 | swalsh | 2007-07-09 12:50:32 +0100 (Mon, 09 Jul 2007) | 1 line

Forward port db.log recycling issue fix. re #52
------------------------------------------------------------------------
r1103 | tjfontaine | 2007-06-28 23:41:38 +0100 (Thu, 28 Jun 2007) | 2 lines

(from 1.0) db_log shouldn't act like ilog, remove L_CRIT (Fixes crash on db going away).

------------------------------------------------------------------------
r1101 | tjfontaine | 2007-06-28 21:32:59 +0100 (Thu, 28 Jun 2007) | 2 lines

FloodServ now uses BlockHeap, as a result you can monitor usage in STATS z

------------------------------------------------------------------------
r1100 | tjfontaine | 2007-06-28 21:17:42 +0100 (Thu, 28 Jun 2007) | 2 lines

(from 1.0) When exiting clients delete ids from hash as well

------------------------------------------------------------------------
r1099 | tjfontaine | 2007-06-28 21:09:11 +0100 (Thu, 28 Jun 2007) | 2 lines

STATS spy notice re #17

------------------------------------------------------------------------
r1092 | tjfontaine | 2007-06-27 21:57:49 +0100 (Wed, 27 Jun 2007) | 2 lines

[1091] should have been slightly different wrt to reporting no such server (for eventually juped servers)

------------------------------------------------------------------------
r1091 | tjfontaine | 2007-06-27 20:33:16 +0100 (Wed, 27 Jun 2007) | 2 lines

STATS z implementation re #17 useful also re #26

------------------------------------------------------------------------
r1090 | tjfontaine | 2007-06-27 18:25:06 +0100 (Wed, 27 Jun 2007) | 2 lines

(from 1.0 branch) BlockHeapFree clients when they exit, our "leak" is the client heap growing endlessly re #26

------------------------------------------------------------------------
r1088 | tjfontaine | 2007-06-26 21:26:33 +0100 (Tue, 26 Jun 2007) | 2 lines

Set Realname field to something useful for enforced nicks, also don't make enforced nicks opers. fixes #34

------------------------------------------------------------------------
r1085 | swalsh | 2007-06-26 15:05:42 +0100 (Tue, 26 Jun 2007) | 1 line

Don't allow operserv to be reloaded, it wont work.  Fixed #45
------------------------------------------------------------------------
r1081 | tjfontaine | 2007-06-25 19:30:07 +0100 (Mon, 25 Jun 2007) | 2 lines

(from 1.0 branch) db_find_chan and db_find_chanaccess shouldn't leak when the channel or access isn't found. re #26

------------------------------------------------------------------------
r1074 | tjfontaine | 2007-06-21 22:15:08 +0100 (Thu, 21 Jun 2007) | 2 lines

let opers see the help of operserv re #41

------------------------------------------------------------------------
r1073 | tjfontaine | 2007-06-21 22:02:52 +0100 (Thu, 21 Jun 2007) | 2 lines

if the channel is already destroy the on part callback will send a null channel ptr don't let FS crash on it (from branch) fixes #43

------------------------------------------------------------------------
r1071 | tjfontaine | 2007-06-20 21:51:13 +0100 (Wed, 20 Jun 2007) | 2 lines

remove stray tab in chanserv access add help [from 1.0 branch]

------------------------------------------------------------------------
r1067 | weasel | 2007-06-03 17:46:20 +0100 (Sun, 03 Jun 2007) | 1 line

a few more order bys, and mention that the IDXs are horrible
------------------------------------------------------------------------
r1066 | weasel | 2007-06-03 17:41:34 +0100 (Sun, 03 Jun 2007) | 1 line

Fix an order by, note a few missing order bys
------------------------------------------------------------------------
r1065 | tjfontaine | 2007-06-02 20:46:48 +0100 (Sat, 02 Jun 2007) | 2 lines

no really, unset AUTOLIMIT if we're -l, also don't screw up language files please. re #32

------------------------------------------------------------------------
r1064 | tjfontaine | 2007-06-02 20:27:00 +0100 (Sat, 02 Jun 2007) | 3 lines

make MLOCK accept -l and -k, turn off AUTOLIMIT if -l set. re #32
cryogen please review, TODO prevent AUTOLIMIT ON if -l/+l set

------------------------------------------------------------------------
r1062 | tjfontaine | 2007-06-02 17:50:20 +0100 (Sat, 02 Jun 2007) | 2 lines

floodserv shouldn't insert an AKILL twice. re #37

------------------------------------------------------------------------
r1060 | tjfontaine | 2007-06-02 17:39:22 +0100 (Sat, 02 Jun 2007) | 2 lines

SET #channel FLOODSERV should show on/off properly. re #29

------------------------------------------------------------------------
r1058 | tjfontaine | 2007-05-29 20:20:37 +0100 (Tue, 29 May 2007) | 2 lines

Only show topic, entry message, mlock to opers or channel members. Fixes #38 Re #31

------------------------------------------------------------------------
r1057 | tjfontaine | 2007-05-29 20:18:29 +0100 (Tue, 29 May 2007) | 2 lines

nickserv.c didn't compile, MakeItSo(tm)

------------------------------------------------------------------------
r1056 | swalsh | 2007-05-24 23:23:51 +0100 (Thu, 24 May 2007) | 1 line

Fix channel mode desync. Fixes #28.
------------------------------------------------------------------------
r1055 | swalsh | 2007-05-24 23:21:32 +0100 (Thu, 24 May 2007) | 1 line

some minor fixes to stuff
------------------------------------------------------------------------
r1054 | sbisbee | 2007-05-24 20:31:11 +0100 (Thu, 24 May 2007) | 1 line

Adds status command to nickserv; fixed #3
------------------------------------------------------------------------
r1053 | sbisbee | 2007-05-24 16:50:54 +0100 (Thu, 24 May 2007) | 1 line

Stray tab killed in HELP_SET_PRIVATE_LONG; fixed #27.
------------------------------------------------------------------------
r1052 | swalsh | 2007-05-24 15:40:57 +0100 (Thu, 24 May 2007) | 1 line

Add -keepmodules option fix #36
------------------------------------------------------------------------
r1051 | swalsh | 2007-05-24 15:29:13 +0100 (Thu, 24 May 2007) | 1 line

Merge some missing stuff from 1.0 and merge in the recent fixes.  I suppose this is re #26, but only just
------------------------------------------------------------------------
r1050 | sbisbee | 2007-05-23 23:10:06 +0100 (Wed, 23 May 2007) | 1 line

Adds floodserv flag to chanserv info; fixes #30
------------------------------------------------------------------------
r1042 | swalsh | 2007-05-17 22:50:05 +0100 (Thu, 17 May 2007) | 1 line

Close a couple of db_find_chan leaks. re #26
------------------------------------------------------------------------
r1041 | swalsh | 2007-05-17 22:44:46 +0100 (Thu, 17 May 2007) | 1 line

As unlikely as it might be, close this memory leak in floodserv re #26
------------------------------------------------------------------------
r1040 | swalsh | 2007-05-17 22:38:11 +0100 (Thu, 17 May 2007) | 1 line

Don't leak the quiet list on channel deletion. re #26
------------------------------------------------------------------------
r1039 | swalsh | 2007-05-17 17:24:59 +0100 (Thu, 17 May 2007) | 1 line

rejig cleanup order. fix several leaks where db_list_first wasnt cleaned up properly. re #26
------------------------------------------------------------------------
r1038 | swalsh | 2007-05-17 16:56:53 +0100 (Thu, 17 May 2007) | 1 line

clean up if the user has no access list, or a list returns no results in general. re #26
------------------------------------------------------------------------
r1037 | swalsh | 2007-05-17 16:35:13 +0100 (Thu, 17 May 2007) | 1 line

Dont free the channel heaps if they arent allocated yet.  This can happen if you kill services before it's finished init. re #26
------------------------------------------------------------------------
r1034 | swalsh | 2007-05-17 11:28:01 +0100 (Thu, 17 May 2007) | 1 line

Cleanup memory as much as is humanly possible in order that we are memory neutral when exiting cleanly. Ref #26
------------------------------------------------------------------------
r1033 | swalsh | 2007-05-15 20:22:28 +0100 (Tue, 15 May 2007) | 1 line

Set precedence: junk on outgoing mail.  Fixes #2
------------------------------------------------------------------------
r1032 | swalsh | 2007-05-15 20:05:32 +0100 (Tue, 15 May 2007) | 1 line

Don't flag lack of hostname as an error, also dont free dbstr, yada uses it(brrr..).  Fixes #21
------------------------------------------------------------------------
r1031 | swalsh | 2007-05-15 12:42:48 +0100 (Tue, 15 May 2007) | 1 line

Use channel is instead of name in GET_AKICKS so we can remove the channel table from the query. Fixes #5
------------------------------------------------------------------------
r1030 | swalsh | 2007-05-15 11:14:11 +0100 (Tue, 15 May 2007) | 1 line

Make the queries that deal with channel masters more consistent.  Fix #1
------------------------------------------------------------------------
r1028 | stu | 2007-05-14 20:06:05 +0100 (Mon, 14 May 2007) | 1 line

[MTT] 1025
------------------------------------------------------------------------
r1022 | stu | 2007-05-14 19:16:39 +0100 (Mon, 14 May 2007) | 1 line

[MTT] 1019->1021 inclusive
------------------------------------------------------------------------
r1017 | stu | 2007-05-14 17:07:06 +0100 (Mon, 14 May 2007) | 1 line

Fix quite a few memory leaks
------------------------------------------------------------------------
r1016 | stu | 2007-05-14 11:16:26 +0100 (Mon, 14 May 2007) | 1 line

Client certificate authentication, process certfp message.  Works but isnt finished, still some stuff missing, but the main work is there.
------------------------------------------------------------------------
r1015 | tjfontaine | 2007-05-12 22:40:49 +0100 (Sat, 12 May 2007) | 2 lines

(from 1.0 branch) Fix parting FloodServ from a channel he's not joined to

------------------------------------------------------------------------
r1013 | weasel | 2007-05-11 17:37:43 +0100 (Fri, 11 May 2007) | 1 line

You could say I'm anal about whitespace, but that wouldn't even be half of the truth
------------------------------------------------------------------------
r1012 | stu | 2007-05-11 17:27:52 +0100 (Fri, 11 May 2007) | 1 line

And here
------------------------------------------------------------------------
r1008 | stu | 2007-05-11 17:15:15 +0100 (Fri, 11 May 2007) | 1 line

[MTT] 1007
------------------------------------------------------------------------
r1006 | stu | 2007-05-11 17:01:42 +0100 (Fri, 11 May 2007) | 1 line

[MTT] Revision 1002->1004 inclusive
------------------------------------------------------------------------
r1001 | stu | 2007-05-11 16:33:36 +0100 (Fri, 11 May 2007) | 1 line

wrong struct type
------------------------------------------------------------------------
r1000 | stu | 2007-05-11 16:02:25 +0100 (Fri, 11 May 2007) | 1 line

[MTT] Firstly.
------------------------------------------------------------------------
r998 | stu | 2007-05-11 15:36:24 +0100 (Fri, 11 May 2007) | 1 line

[MTT] Revision 997.
------------------------------------------------------------------------
r996 | stu | 2007-05-11 14:19:47 +0100 (Fri, 11 May 2007) | 1 line

make use of the tj's introduce_client return value
------------------------------------------------------------------------
r994 | stu | 2007-05-11 12:28:25 +0100 (Fri, 11 May 2007) | 1 line

[MTT] Revision 993.
------------------------------------------------------------------------
r992 | stu | 2007-05-11 11:30:19 +0100 (Fri, 11 May 2007) | 1 line

[MTT] Revision 991. Fix dropping linked child nicks, fix channel topic bursting/keeping, add a new event 'on burst complete' - tj will be pleased
------------------------------------------------------------------------
r990 | weasel | 2007-05-10 10:19:58 +0100 (Thu, 10 May 2007) | 1 line

Another index
------------------------------------------------------------------------
r989 | weasel | 2007-05-10 10:13:47 +0100 (Thu, 10 May 2007) | 1 line

Another one for performance reasons, not sure it matters but we have so little inserts that indexes are real cheap
------------------------------------------------------------------------
r988 | weasel | 2007-05-10 10:02:13 +0100 (Thu, 10 May 2007) | 1 line

And remove an obsolete flag
------------------------------------------------------------------------
r987 | weasel | 2007-05-10 09:56:30 +0100 (Thu, 10 May 2007) | 1 line

And one for performance reasons
------------------------------------------------------------------------
r986 | weasel | 2007-05-10 09:56:18 +0100 (Thu, 10 May 2007) | 1 line

Create two indexes for constraint reasons
------------------------------------------------------------------------
r985 | stu | 2007-05-10 09:48:34 +0100 (Thu, 10 May 2007) | 1 line

[MTT] Bring trunk up to 1.0.9, revision 984
------------------------------------------------------------------------
r978 | weasel | 2007-05-09 16:14:32 +0100 (Wed, 09 May 2007) | 1 line

remove unique(channel) on the channel table, and instead add a channel unique(lower(channel)), and a nickname unique(lower(nick));
------------------------------------------------------------------------
r963 | stu | 2007-05-07 19:33:09 +0100 (Mon, 07 May 2007) | 1 line

[MTT] Merge changes from 1.0.3 to trunk
------------------------------------------------------------------------
r957 | stu | 2007-05-07 17:52:26 +0100 (Mon, 07 May 2007) | 1 line

[MTT] sjoin fix, languages fixes
------------------------------------------------------------------------
r953 | stu | 2007-05-07 16:00:31 +0100 (Mon, 07 May 2007) | 1 line

Fix stupid chanserv bug and disable line checks for floodserv for now
------------------------------------------------------------------------
r951 | stu | 2007-05-07 15:14:18 +0100 (Mon, 07 May 2007) | 1 line

Merge changelog to trunk
------------------------------------------------------------------------
r948 | tjfontaine | 2007-05-07 15:03:11 +0100 (Mon, 07 May 2007) | 2 lines

privmsg and notice handling *are* the same

------------------------------------------------------------------------
r937 | stu | 2007-05-04 15:55:01 +0100 (Fri, 04 May 2007) | 1 line

author a wimpy README
------------------------------------------------------------------------
r936 | stu | 2007-05-04 15:53:21 +0100 (Fri, 04 May 2007) | 1 line

update svn props, update TODO and author INSTALL
------------------------------------------------------------------------
r925 | stu | 2007-05-03 22:23:01 +0100 (Thu, 03 May 2007) | 1 line

trunk now becomes 1.1.0
------------------------------------------------------------------------
r923 | stu | 2007-05-03 22:10:13 +0100 (Thu, 03 May 2007) | 1 line

mmm
------------------------------------------------------------------------
r922 | tjfontaine | 2007-05-03 22:07:23 +0100 (Thu, 03 May 2007) | 2 lines

add keywords and revison to floodserv

------------------------------------------------------------------------
r921 | stu | 2007-05-03 22:05:33 +0100 (Thu, 03 May 2007) | 1 line

Bump version to 1.0.0 and reply to version requests(thanks to whoever implemented m_version)
------------------------------------------------------------------------
r920 | tjfontaine | 2007-05-03 21:44:11 +0100 (Thu, 03 May 2007) | 2 lines

read code in context, this should add some error checking to adding jupes, provided we get back a null client

------------------------------------------------------------------------
r919 | stu | 2007-05-03 21:30:53 +0100 (Thu, 03 May 2007) | 1 line

Fake introducing a server if it already exists on the network.  Also reburst channel info on reconnect for services  Also fix a small issue in jupeserv.
------------------------------------------------------------------------
r918 | tjfontaine | 2007-05-03 20:40:12 +0100 (Thu, 03 May 2007) | 2 lines

theoretically we should keep the server name we're juping around, also careful with concatenating null strings

------------------------------------------------------------------------
r917 | stu | 2007-05-03 20:30:58 +0100 (Thu, 03 May 2007) | 1 line

Fix nickserv coring services on quit, and add reason to jupeserv, it's broken but someone will fix it
------------------------------------------------------------------------
r916 | stu | 2007-05-03 19:48:12 +0100 (Thu, 03 May 2007) | 1 line

fix language parser once and for all and remove hacks
------------------------------------------------------------------------
r915 | stu | 2007-05-03 17:28:18 +0100 (Thu, 03 May 2007) | 1 line

implement mod list, finally.
------------------------------------------------------------------------
r914 | stu | 2007-05-03 17:18:47 +0100 (Thu, 03 May 2007) | 1 line

Turn on yada cleanup again since i think i know what was causing it
------------------------------------------------------------------------
r913 | stu | 2007-05-03 17:17:40 +0100 (Thu, 03 May 2007) | 1 line

Helps if we define IPV6 if we *have* ipv6 and not when we dont, yes?
------------------------------------------------------------------------
r912 | stu | 2007-05-03 17:03:13 +0100 (Thu, 03 May 2007) | 1 line

Remove TS handling fro mm_sjoin, just accept what we're given.  Also add a create handler to chanserv and use this to set mlock, and move the callback so that it fires after modes are set
------------------------------------------------------------------------
r911 | stu | 2007-05-03 12:20:55 +0100 (Thu, 03 May 2007) | 1 line

Dont cleanup yada for now, there isnt much point.  Also dont send +R for users if we're bursting
------------------------------------------------------------------------
r908 | stu | 2007-05-03 12:05:54 +0100 (Thu, 03 May 2007) | 1 line

use ilog for db errors so that they can be snoted if required
------------------------------------------------------------------------
r907 | stu | 2007-05-02 23:24:59 +0100 (Wed, 02 May 2007) | 1 line

dont bother auto iding if we get a +R, the +r loops are not worth it.  Also dont try to use a freed pointer, mmkay?
------------------------------------------------------------------------
r906 | stu | 2007-05-02 22:25:10 +0100 (Wed, 02 May 2007) | 1 line

Fix some issues that showed up in live testing
------------------------------------------------------------------------
r905 | stu | 2007-05-02 20:07:36 +0100 (Wed, 02 May 2007) | 1 line

Enforce mlock on channel creation(or client join) too
------------------------------------------------------------------------
r904 | tjfontaine | 2007-05-02 19:55:06 +0100 (Wed, 02 May 2007) | 2 lines

fix null mode list

------------------------------------------------------------------------
r903 | tjfontaine | 2007-05-02 19:45:02 +0100 (Wed, 02 May 2007) | 2 lines

migrate mlocks I think, and clear out old data before inserting new

------------------------------------------------------------------------
r902 | stu | 2007-05-02 19:16:55 +0100 (Wed, 02 May 2007) | 1 line

Fix spacing
------------------------------------------------------------------------
r901 | stu | 2007-05-02 19:14:14 +0100 (Wed, 02 May 2007) | 1 line

copy and paste is bad.. fix it right
------------------------------------------------------------------------
r900 | stu | 2007-05-02 19:00:47 +0100 (Wed, 02 May 2007) | 1 line

add mlock to chanserv info
------------------------------------------------------------------------
r899 | stu | 2007-05-02 18:55:54 +0100 (Wed, 02 May 2007) | 1 line

Fix trying to do stuff on a null chptr crash
------------------------------------------------------------------------
r898 | stu | 2007-05-02 16:47:15 +0100 (Wed, 02 May 2007) | 1 line

make hostname for database work and add a port option
------------------------------------------------------------------------
r897 | sarnold | 2007-05-01 23:51:38 +0100 (Tue, 01 May 2007) | 1 line

fix a few typos, remove a few pointless blank lines, remove a few trailing spaces, add some bold hints in a few places, and some slight language fixes in a small handful of places
------------------------------------------------------------------------
r896 | stu | 2007-05-01 22:44:09 +0100 (Tue, 01 May 2007) | 1 line

Fix svn:ignore 
------------------------------------------------------------------------
r895 | stu | 2007-05-01 22:22:09 +0100 (Tue, 01 May 2007) | 1 line

update NEWS.  REAdME and INSTALL need writing :(
------------------------------------------------------------------------
r894 | tjfontaine | 2007-05-01 22:21:15 +0100 (Tue, 01 May 2007) | 2 lines

update my email, I don't even know what I did except cause problems :)

------------------------------------------------------------------------
r893 | stu | 2007-05-01 19:56:55 +0100 (Tue, 01 May 2007) | 1 line

Use a dynamic buffer to prevent cutoff. This has implications for allowing services to flood people off with exceptionally long pieces or information.. i think
------------------------------------------------------------------------
r892 | stu | 2007-05-01 17:19:38 +0100 (Tue, 01 May 2007) | 1 line

Dont try to process the sendq of us, not that we shoudl have one, but still, at least this wont crash
------------------------------------------------------------------------
r891 | stu | 2007-05-01 17:02:47 +0100 (Tue, 01 May 2007) | 1 line

Prevent duplicate server notices(and incorrect treating of remote juped servers
------------------------------------------------------------------------
r890 | stu | 2007-05-01 16:16:34 +0100 (Tue, 01 May 2007) | 1 line

Add an index field to the query struct and add an assert in db_query which enforces it
------------------------------------------------------------------------
r889 | tjfontaine | 2007-05-01 01:38:13 +0100 (Tue, 01 May 2007) | 2 lines

Report 402 No such server for jupitered servers, stu should also clue services how to report its own version

------------------------------------------------------------------------
r888 | tjfontaine | 2007-04-30 23:39:01 +0100 (Mon, 30 Apr 2007) | 2 lines

Here is JupeServ, fix introducing servers and squit'ing them

------------------------------------------------------------------------
r887 | stu | 2007-04-30 12:24:08 +0100 (Mon, 30 Apr 2007) | 1 line

clarify 'not found' messages.  One day yada will report the failures itself
------------------------------------------------------------------------
r886 | stu | 2007-04-30 12:10:39 +0100 (Mon, 30 Apr 2007) | 1 line

always use db data in 'info' never cached
------------------------------------------------------------------------
r885 | stu | 2007-04-30 12:08:56 +0100 (Mon, 30 Apr 2007) | 1 line

redo prepared statements if the connection goes away
------------------------------------------------------------------------
r884 | tjfontaine | 2007-04-27 18:53:13 +0100 (Fri, 27 Apr 2007) | 4 lines

pointers suck, pass along the location of the real dlink_list when trying to delete from it
refactor gc routine to be more generic, add in gc of global message queue
we may want to add a timer for the max run time of the gc over the global queue, and/or last position to resume on next iteration

------------------------------------------------------------------------
r883 | tjfontaine | 2007-04-27 17:44:03 +0100 (Fri, 27 Apr 2007) | 3 lines

refactor the MessageQueue and FloodMsg into their own files outside of floodserv
free_regchan now knows how to free the channel floodserv datastructures

------------------------------------------------------------------------
r882 | tjfontaine | 2007-04-27 17:23:00 +0100 (Fri, 27 Apr 2007) | 2 lines

add REALHOST and make floodserv queue and network enforcement use it instead

------------------------------------------------------------------------
r881 | tjfontaine | 2007-04-27 16:44:10 +0100 (Fri, 27 Apr 2007) | 2 lines

add generic services akill insert query

------------------------------------------------------------------------
r880 | tjfontaine | 2007-04-27 16:28:00 +0100 (Fri, 27 Apr 2007) | 4 lines

fix unloading by not adding the same node to two different lists
rename lentry/fentry to be useful like oldest/newest
generic memory cleanups, TODO: GC the global queue, clue regchan free on how to free us

------------------------------------------------------------------------
r879 | tjfontaine | 2007-04-26 18:27:20 +0100 (Thu, 26 Apr 2007) | 2 lines

start of the floodserv gc routine, logic flaw in removing/freeing from the hash

------------------------------------------------------------------------
r878 | stu | 2007-04-26 16:28:57 +0100 (Thu, 26 Apr 2007) | 1 line

Let the module take care of the usermode for clients, and add a and S to the mix so services cant be removed from channels(easily)
------------------------------------------------------------------------
r877 | tjfontaine | 2007-04-26 01:19:34 +0100 (Thu, 26 Apr 2007) | 4 lines

lookup "OFTC" account id until stu shows me how to represent null in yada appropriately.
TODO: GC like event that cleans out old hashes/msgs and/or when all of a host part a channel or quit the network
OTHERWISE: Feature complete with oldservices

------------------------------------------------------------------------
r876 | tjfontaine | 2007-04-26 01:01:25 +0100 (Thu, 26 Apr 2007) | 2 lines

I just wanted to see everyones response to a goto statement

------------------------------------------------------------------------
r875 | tjfontaine | 2007-04-25 23:12:56 +0100 (Wed, 25 Apr 2007) | 2 lines

add global message queue, and per channel queue, refactor [de]allocation to handle more types

------------------------------------------------------------------------
r874 | tjfontaine | 2007-04-25 19:04:07 +0100 (Wed, 25 Apr 2007) | 3 lines

add cmode q to services
floodserv now enforces channel floods with a +q *!*@source->host

------------------------------------------------------------------------
r873 | tjfontaine | 2007-04-25 17:41:28 +0100 (Wed, 25 Apr 2007) | 2 lines

fix floodserv last user in channel issue

------------------------------------------------------------------------
r872 | tjfontaine | 2007-04-25 16:56:06 +0100 (Wed, 25 Apr 2007) | 3 lines

fix dropping the last message properly, don't report a message flood unless there really was one
properly compare nicknames, todo part issue.

------------------------------------------------------------------------
r871 | stu | 2007-04-25 10:27:26 +0100 (Wed, 25 Apr 2007) | 1 line

Bring chanserv date output in line with nickserv
------------------------------------------------------------------------
r870 | tjfontaine | 2007-04-25 00:36:10 +0100 (Wed, 25 Apr 2007) | 2 lines

floodserv written in C, no actual enforcement, still needs global message queue, cryogen please review

------------------------------------------------------------------------
r869 | stu | 2007-04-22 15:50:28 +0100 (Sun, 22 Apr 2007) | 1 line

Make autoop and autovoice actually work
------------------------------------------------------------------------
r868 | stu | 2007-04-21 18:09:46 +0100 (Sat, 21 Apr 2007) | 1 line

remove the last of the chain_xxx and fix a bug caused by firing callbacks in the wrong order
------------------------------------------------------------------------
r867 | stu | 2007-04-21 17:51:42 +0100 (Sat, 21 Apr 2007) | 1 line

Add floodserv checking to the migrate script
------------------------------------------------------------------------
r866 | stu | 2007-04-21 10:11:30 +0100 (Sat, 21 Apr 2007) | 1 line

Add UNFORBID, AUTOOP and AUTOVOICE to chanserv
------------------------------------------------------------------------
r865 | tjfontaine | 2007-04-20 23:13:50 +0100 (Fri, 20 Apr 2007) | 4 lines

move valid_wild_card into interface, refactor operserv akill_add into function in interface
add akill_add to ruby servicemodule
rejig floodserv so it enforces at appropriate times, also add lines/time period/channel

------------------------------------------------------------------------
r864 | tjfontaine | 2007-04-19 01:02:51 +0100 (Thu, 19 Apr 2007) | 4 lines

added floodserv flag to db and RegChannel, added set floodserv on|off which looks up FloodServ client and joins/parts it, updated FloodServ.rb to do some sane things based on 
TODO update migrate script and protect/ensure
ball.put_in(weasels.court)

------------------------------------------------------------------------
r863 | stu | 2007-04-17 21:56:39 +0100 (Tue, 17 Apr 2007) | 1 line

wrap cleanup_ruby in HAVE_RUBY define so that services can compile when ruby isnt present
------------------------------------------------------------------------
r862 | tjfontaine | 2007-04-16 23:42:56 +0100 (Mon, 16 Apr 2007) | 2 lines

inform channel.h about the global_channel_list so we can do channels_each it works but needs wrapped in a rb_ensure/protect, left: db flag

------------------------------------------------------------------------
r861 | tjfontaine | 2007-04-16 15:37:53 +0100 (Mon, 16 Apr 2007) | 2 lines

Really shouldn't try and use NULL channels in part handler or in ruby code, all other classes that wrap C structs should similarly check for null pointers

------------------------------------------------------------------------
r860 | tjfontaine | 2007-04-14 19:27:56 +0100 (Sat, 14 Apr 2007) | 5 lines

callbacks: added created and send_part cb, added create/destroy/part cb to ruby
add part_channel for servs to join channels through normal means
add members_length to channelstruct for stop gap until we decide to wrap struct
all in all, basic support for floodserv to detect if it should join/part a channel

------------------------------------------------------------------------
r859 | tjfontaine | 2007-04-14 00:31:10 +0100 (Sat, 14 Apr 2007) | 4 lines

Add a lot of sanity checking of types: *TODO* Numbers
Associate db methods with their classes, remove unused defined db methods in servicemodule: *TODO* db_save_chan
extern our defined class types so we can check their types in other files

------------------------------------------------------------------------
r858 | stu | 2007-04-13 23:31:05 +0100 (Fri, 13 Apr 2007) | 2 lines

give services a fighting chance to unload when dying

------------------------------------------------------------------------
r857 | stu | 2007-04-13 23:28:33 +0100 (Fri, 13 Apr 2007) | 1 line

update migration script
------------------------------------------------------------------------
r856 | stu | 2007-04-13 23:10:17 +0100 (Fri, 13 Apr 2007) | 1 line

s/user_id/account_id and s/parent_id/account_id/g
------------------------------------------------------------------------
r855 | stu | 2007-04-13 23:07:09 +0100 (Fri, 13 Apr 2007) | 1 line

the old way we did reconnections sucked, this is better and works
------------------------------------------------------------------------
r854 | stu | 2007-04-13 22:51:03 +0100 (Fri, 13 Apr 2007) | 9 lines

- Add snote for expiring akills
- Add ip info to connecting clients so that netmask based akick/akills
	work(including single ips)
- rename the nick from id and id from nick queries to not be confusing
- Fix a core on client exit causing reconnect not to work
- Fix a bug in the autofu when ruby is disabled or not found
- indent CS info
- Check if an akill is already on the list

------------------------------------------------------------------------
r853 | tjfontaine | 2007-04-13 18:02:08 +0100 (Fri, 13 Apr 2007) | 2 lines

the start of something resembling FloodServ

------------------------------------------------------------------------
r852 | tjfontaine | 2007-04-12 23:45:15 +0100 (Thu, 12 Apr 2007) | 2 lines

don't be retarded, you can't call a var end

------------------------------------------------------------------------
r851 | tjfontaine | 2007-04-12 23:19:38 +0100 (Thu, 12 Apr 2007) | 2 lines

make scripts folder move migrate script into it, add dblink-script (uses same conf file as migrate) usage: ./dblink-script.rb <basenick> <number of links to create> <conffile>

------------------------------------------------------------------------
r850 | stu | 2007-04-12 23:11:21 +0100 (Thu, 12 Apr 2007) | 1 line

Let account_id be null in sent_mail and add a (scary looking) check constraint to akick
------------------------------------------------------------------------
r849 | stu | 2007-04-12 23:04:38 +0100 (Thu, 12 Apr 2007) | 1 line

referential integrity is the shit
------------------------------------------------------------------------
r848 | stu | 2007-04-12 22:57:01 +0100 (Thu, 12 Apr 2007) | 1 line

weasel: no
------------------------------------------------------------------------
r847 | stu | 2007-04-12 22:56:04 +0100 (Thu, 12 Apr 2007) | 1 line

see, it was not null, silly weasel
------------------------------------------------------------------------
r846 | stu | 2007-04-12 22:54:43 +0100 (Thu, 12 Apr 2007) | 1 line

probably a good idea if pass and salt are not null
------------------------------------------------------------------------
r845 | stu | 2007-04-12 22:17:20 +0100 (Thu, 12 Apr 2007) | 1 line

forbidden flag is no more
------------------------------------------------------------------------
r844 | stu | 2007-04-12 22:11:40 +0100 (Thu, 12 Apr 2007) | 1 line

Add last seen time to db_save_nick
------------------------------------------------------------------------
r843 | stu | 2007-04-12 22:07:49 +0100 (Thu, 12 Apr 2007) | 1 line

Add db_save_nick for the fontaine
------------------------------------------------------------------------
r842 | stu | 2007-04-12 21:40:43 +0100 (Thu, 12 Apr 2007) | 1 line

add akill snote
------------------------------------------------------------------------
r841 | stu | 2007-04-12 21:21:23 +0100 (Thu, 12 Apr 2007) | 1 line

Make chanserv not set messages consistant with nickserv and carry forward '-' to chanserv
------------------------------------------------------------------------
r840 | stu | 2007-04-12 21:17:27 +0100 (Thu, 12 Apr 2007) | 1 line

Document '-' in set url and cloakstring
------------------------------------------------------------------------
r839 | stu | 2007-04-12 21:13:39 +0100 (Thu, 12 Apr 2007) | 1 line

Fix display bug in OP error message
------------------------------------------------------------------------
r838 | stu | 2007-04-12 21:08:05 +0100 (Thu, 12 Apr 2007) | 1 line

Fix a couple of operserv language bugs
------------------------------------------------------------------------
r837 | stu | 2007-04-12 21:05:20 +0100 (Thu, 12 Apr 2007) | 1 line

Add proper language message for operserv mod unload
------------------------------------------------------------------------
r836 | stu | 2007-04-12 21:02:00 +0100 (Thu, 12 Apr 2007) | 1 line

Add channel forbid, fix akill with no duration bug
------------------------------------------------------------------------
r835 | tjfontaine | 2007-04-12 17:46:28 +0100 (Thu, 12 Apr 2007) | 2 lines

fix cloak flag offset

------------------------------------------------------------------------
r834 | tjfontaine | 2007-04-12 16:20:28 +0100 (Thu, 12 Apr 2007) | 2 lines

bring migrate script upto latest changes stu made

------------------------------------------------------------------------
r833 | stu | 2007-04-12 15:16:18 +0100 (Thu, 12 Apr 2007) | 12 lines

- Add sending resvs for forbids
- Don't hide help for user commands
- Fix channel access list deletion
- Remove utf8
- validate cloak hostnames
- fix sent_mail sql
- various nickserv lang fixes
- Make sendpass NOT be admin only
- display "not set" properly in SET
- allow '-' for unsetting things


------------------------------------------------------------------------
r832 | stu | 2007-04-11 22:52:18 +0100 (Wed, 11 Apr 2007) | 1 line

missed a query, and redo the nick private query
------------------------------------------------------------------------
r831 | stu | 2007-04-11 22:39:38 +0100 (Wed, 11 Apr 2007) | 1 line

Nickserv and chanserv LIST. *grumble
------------------------------------------------------------------------
r830 | stu | 2007-04-11 21:07:44 +0100 (Wed, 11 Apr 2007) | 1 line

update the version number to something a little more release-ish
------------------------------------------------------------------------
r829 | stu | 2007-04-11 21:00:54 +0100 (Wed, 11 Apr 2007) | 1 line

let there be utf8
------------------------------------------------------------------------
r828 | stu | 2007-04-11 20:49:13 +0100 (Wed, 11 Apr 2007) | 1 line

s/>/</
------------------------------------------------------------------------
r827 | stu | 2007-04-11 20:39:48 +0100 (Wed, 11 Apr 2007) | 1 line

Stuart, you are an idiot.
------------------------------------------------------------------------
r826 | stu | 2007-04-11 20:30:26 +0100 (Wed, 11 Apr 2007) | 1 line

Add expiring akills, and a limit on sent emails, both on account and on email address
------------------------------------------------------------------------
r825 | stu | 2007-04-11 18:08:58 +0100 (Wed, 11 Apr 2007) | 1 line

merge account access lists when linking nicks, courtesty of The SQL Team(tm)
------------------------------------------------------------------------
r824 | stu | 2007-04-11 13:25:06 +0100 (Wed, 11 Apr 2007) | 1 line

fix a bug in akill add for 'm' duration
------------------------------------------------------------------------
r823 | stu | 2007-04-10 19:11:38 +0100 (Tue, 10 Apr 2007) | 1 line

klines are in seconds when server->server
------------------------------------------------------------------------
r822 | stu | 2007-04-10 17:30:27 +0100 (Tue, 10 Apr 2007) | 1 line

Add anti-cdlu measures to operserv akill
------------------------------------------------------------------------
r821 | stu | 2007-04-10 16:57:19 +0100 (Tue, 10 Apr 2007) | 1 line

make akills use tklines(except for perm ones) and implement the duration mechanism
------------------------------------------------------------------------
r820 | stu | 2007-04-10 15:04:21 +0100 (Tue, 10 Apr 2007) | 1 line

Remove an account from every channel access list before removing the account itself
------------------------------------------------------------------------
r819 | stu | 2007-04-10 14:43:38 +0100 (Tue, 10 Apr 2007) | 1 line

Add note about forbidden nicks in info
------------------------------------------------------------------------
r818 | stu | 2007-04-10 14:26:23 +0100 (Tue, 10 Apr 2007) | 1 line

Fix forbid bug not sending feedback
------------------------------------------------------------------------
r817 | stu | 2007-04-10 14:20:31 +0100 (Tue, 10 Apr 2007) | 1 line

Fix the case of unknown times showing dodgy 'agos'
------------------------------------------------------------------------
r816 | stu | 2007-04-10 13:59:23 +0100 (Tue, 10 Apr 2007) | 1 line

allow primary nicks to keep the account when they are unlinked
------------------------------------------------------------------------
r815 | tjfontaine | 2007-04-10 02:41:06 +0100 (Tue, 10 Apr 2007) | 5 lines

squash would be class variable bugs where I was wrong in defining them
move service creation into service_name so the service struct can be used for languages, and languages can be used for command registers
make ruby help usable, at the moment each language file is loaded twice, once for ruby once for C, ruby only needs to setup a name->id map for help,
and C doesn't need to know about any of the other messages so languages can be split into two files, iff stu even approves what I've done

------------------------------------------------------------------------
r814 | stu | 2007-04-09 20:18:18 +0100 (Mon, 09 Apr 2007) | 1 line

Add channel master list from CS info
------------------------------------------------------------------------
r813 | stu | 2007-04-09 19:25:55 +0100 (Mon, 09 Apr 2007) | 1 line

Educate service about cmode +c and fix a bug in akick enforce
------------------------------------------------------------------------
r812 | stu | 2007-04-09 16:24:46 +0100 (Mon, 09 Apr 2007) | 1 line

add +c to the mode list and fix a loop bug
------------------------------------------------------------------------
r811 | stu | 2007-04-09 16:10:29 +0100 (Mon, 09 Apr 2007) | 1 line

Allow more parameters to mlock
------------------------------------------------------------------------
r810 | tjfontaine | 2007-04-09 02:18:36 +0100 (Mon, 09 Apr 2007) | 4 lines

init ruby before trying to load modules defined in the conf (fix bogus cross thread gc bug)
add ServiceBase which ServiceModule inherits from, allows us to write helper code in ruby instead of just C
implement load_language and reply_lang in ServiceBase

------------------------------------------------------------------------
r809 | stu | 2007-04-08 12:55:40 +0100 (Sun, 08 Apr 2007) | 1 line

Misc operserv fixes
------------------------------------------------------------------------
r808 | stu | 2007-04-08 12:10:59 +0100 (Sun, 08 Apr 2007) | 1 line

Add channel information to nickserv info
------------------------------------------------------------------------
r807 | stu | 2007-04-08 08:52:39 +0100 (Sun, 08 Apr 2007) | 1 line

Write operserv help
------------------------------------------------------------------------
r806 | stu | 2007-04-08 08:20:05 +0100 (Sun, 08 Apr 2007) | 1 line

Finish off sendpass.  Limiting still not done however
------------------------------------------------------------------------
r805 | stu | 2007-04-08 00:22:44 +0100 (Sun, 08 Apr 2007) | 1 line

Add mail{} config section and reply_mail which sends out mail based on a subject langid, and a body langid.  Sample implementation with nickserv sendpass. sendpass isnt finished yet. reply_mail could be smarter about line wrapping.
------------------------------------------------------------------------
r804 | stu | 2007-04-07 22:17:49 +0100 (Sat, 07 Apr 2007) | 1 line

Make smalldate give us uniform dates, zero padding is win
------------------------------------------------------------------------
r803 | stu | 2007-04-07 22:08:52 +0100 (Sat, 07 Apr 2007) | 1 line

dont touch limit/key unless we have to
------------------------------------------------------------------------
r802 | stu | 2007-04-07 22:02:45 +0100 (Sat, 07 Apr 2007) | 1 line

Make mlock + do what it says on the tin
------------------------------------------------------------------------
r801 | stu | 2007-04-07 21:44:44 +0100 (Sat, 07 Apr 2007) | 1 line

Fix some pretty serious bugs with mlock, and a minor one in akick enforce
------------------------------------------------------------------------
r800 | stu | 2007-04-07 19:49:15 +0100 (Sat, 07 Apr 2007) | 1 line

more chanserv cleanups and make unset/not set show up in non bold
------------------------------------------------------------------------
r799 | stu | 2007-04-07 19:38:58 +0100 (Sat, 07 Apr 2007) | 1 line

misc channel language bugs
------------------------------------------------------------------------
r798 | stu | 2007-04-07 19:31:39 +0100 (Sat, 07 Apr 2007) | 1 line

Review CS Info and make it not suck
------------------------------------------------------------------------
r797 | stu | 2007-04-07 18:02:02 +0100 (Sat, 07 Apr 2007) | 1 line

Review CLEAR, minor changes only
------------------------------------------------------------------------
r796 | stu | 2007-04-07 17:35:17 +0100 (Sat, 07 Apr 2007) | 1 line

Review and fix chanserv ACCESS and AKICK. Add strtime function towrap around strftime in a languagey way
------------------------------------------------------------------------
r795 | stu | 2007-04-07 16:01:42 +0100 (Sat, 07 Apr 2007) | 1 line

Tidy up messages relating to ACCESS
------------------------------------------------------------------------
r794 | stu | 2007-04-07 15:36:19 +0100 (Sat, 07 Apr 2007) | 2 lines

fix newline

------------------------------------------------------------------------
r793 | stu | 2007-04-07 14:53:02 +0100 (Sat, 07 Apr 2007) | 1 line

Do a proper fix for being able to see full help when the param count is wrong
------------------------------------------------------------------------
r792 | stu | 2007-04-07 13:21:44 +0100 (Sat, 07 Apr 2007) | 1 line

ugly tab (I)
------------------------------------------------------------------------
r791 | stu | 2007-04-07 13:20:29 +0100 (Sat, 07 Apr 2007) | 1 line

missing newline(2)
------------------------------------------------------------------------
r790 | stu | 2007-04-07 13:19:49 +0100 (Sat, 07 Apr 2007) | 1 line

missing newline
------------------------------------------------------------------------
r789 | stu | 2007-04-07 12:43:16 +0100 (Sat, 07 Apr 2007) | 1 line

Clean up some help stuff, including making full help show when param count is incorrect, and fix a crash in chanserv caused by wrong min arg count
------------------------------------------------------------------------
r788 | stu | 2007-04-06 20:44:11 +0100 (Fri, 06 Apr 2007) | 1 line

fix a couple of chanserv help bugs and beef up the help a little
------------------------------------------------------------------------
r787 | stu | 2007-04-06 19:31:08 +0100 (Fri, 06 Apr 2007) | 1 line

fix language bug and make akill oper not admin
------------------------------------------------------------------------
r786 | stu | 2007-04-06 00:02:29 +0100 (Fri, 06 Apr 2007) | 1 line

do 'is online' stuff properly, and fix languages breakage we caused by stripping newlines
------------------------------------------------------------------------
r785 | stu | 2007-04-05 23:34:08 +0100 (Thu, 05 Apr 2007) | 1 line

Don't show last seen if nick is online
------------------------------------------------------------------------
r784 | stu | 2007-04-05 23:30:37 +0100 (Thu, 05 Apr 2007) | 1 line

make last seen work and be visible
------------------------------------------------------------------------
r783 | stu | 2007-04-05 23:13:00 +0100 (Thu, 05 Apr 2007) | 1 line

Give the user a hint if they are EACCESS and not +R
------------------------------------------------------------------------
r782 | stu | 2007-04-05 23:01:37 +0100 (Thu, 05 Apr 2007) | 1 line

Make param count violation notices more specific
------------------------------------------------------------------------
r781 | stu | 2007-04-05 22:44:28 +0100 (Thu, 05 Apr 2007) | 1 line

clear connecting flag on server burst complete, and dont show channel entry messages if we're bursting, this removes most of the on-burst noise
------------------------------------------------------------------------
r780 | stu | 2007-04-05 22:36:15 +0100 (Thu, 05 Apr 2007) | 1 line

fix various language bugs
------------------------------------------------------------------------
r779 | stu | 2007-04-05 21:56:52 +0100 (Thu, 05 Apr 2007) | 8 lines

- add a DATETIME_FORMAT to services.lang to specify how dates are displayed
	in a strftime format
- add "foo years ago" for nickserv info
- Add generic reply_time function to implement both of the above for minimal
	code in the services themselves(yay)
- Fix a bug in the language loader which was inserting \ns in places there
	were not meant to be \ns

------------------------------------------------------------------------
r778 | stu | 2007-04-05 18:01:47 +0100 (Thu, 05 Apr 2007) | 1 line

Make smalldate() return weasel-complaint timestamps and use gmtime_t instead of trying to emulate that behaviour
------------------------------------------------------------------------
r777 | stu | 2007-04-04 23:12:10 +0100 (Wed, 04 Apr 2007) | 1 line

Fix SET MASTER
------------------------------------------------------------------------
r776 | stu | 2007-04-04 22:42:53 +0100 (Wed, 04 Apr 2007) | 1 line

Add linked nicks to INFO
------------------------------------------------------------------------
r775 | stu | 2007-04-03 23:07:39 +0100 (Tue, 03 Apr 2007) | 1 line

replace the hooks with the generic function i was talking about yesterday
------------------------------------------------------------------------
r774 | stu | 2007-04-03 22:43:40 +0100 (Tue, 03 Apr 2007) | 1 line

and fix this one too before it bites us in the ass
------------------------------------------------------------------------
r773 | stu | 2007-04-03 22:38:43 +0100 (Tue, 03 Apr 2007) | 1 line

Convert a RB_CALLBACK to the new ruby stuff
------------------------------------------------------------------------
r772 | stu | 2007-04-03 21:38:20 +0100 (Tue, 03 Apr 2007) | 1 line

rejig the schema and code to enforce referentil intergreity on primary_nick better
------------------------------------------------------------------------
r769 | tjfontaine | 2007-04-03 01:05:02 +0100 (Tue, 03 Apr 2007) | 3 lines

more sane code for ruby_script_error, pin service hooks in ruby gc, and return some changes when we were debugging gc issues
one outstanding issue: umode handler is broken, I blame stu. otherwise I dub thee GC clean until the next time it fails

------------------------------------------------------------------------
r768 | stu | 2007-04-02 22:08:58 +0100 (Mon, 02 Apr 2007) | 1 line

considerably rejig ruby function calls.. a bit; also fix forbid as an added bonus
------------------------------------------------------------------------
r767 | stu | 2007-04-01 18:01:15 +0100 (Sun, 01 Apr 2007) | 1 line

set the original nick to the new account id when we had to create a new account - this fixes unlinking from a multiply linked nick
------------------------------------------------------------------------
r765 | stu | 2007-04-01 17:33:48 +0100 (Sun, 01 Apr 2007) | 1 line

Fix linking to an already linked account
------------------------------------------------------------------------
r764 | stu | 2007-04-01 16:54:12 +0100 (Sun, 01 Apr 2007) | 1 line

Engage brain, fix constraint
------------------------------------------------------------------------
r763 | stu | 2007-04-01 16:51:08 +0100 (Sun, 01 Apr 2007) | 1 line

clarify link help slightly and add back the forign key constraint on account.primary_nick
------------------------------------------------------------------------
r762 | stu | 2007-04-01 16:32:19 +0100 (Sun, 01 Apr 2007) | 1 line

Clarify ghost help and make it actually do what it says
------------------------------------------------------------------------
r761 | stu | 2007-04-01 15:52:16 +0100 (Sun, 01 Apr 2007) | 1 line

really fix the info-not-opered issue and also fix a core caused by passing the wrong callback down the chain
------------------------------------------------------------------------
r760 | stu | 2007-04-01 15:44:13 +0100 (Sun, 01 Apr 2007) | 1 line

choking on 0 params is kinda bad
------------------------------------------------------------------------
r759 | stu | 2007-04-01 15:38:50 +0100 (Sun, 01 Apr 2007) | 1 line

cloakstring setting the wrong cloak
------------------------------------------------------------------------
r758 | stu | 2007-04-01 15:30:32 +0100 (Sun, 01 Apr 2007) | 1 line

db_list_del_* returning 0 rows deleted was actually yada's fault, so put it back the way it was
------------------------------------------------------------------------
r756 | stu | 2007-04-01 15:01:37 +0100 (Sun, 01 Apr 2007) | 1 line

Make services sub commands show the full help chain
------------------------------------------------------------------------
r755 | stu | 2007-04-01 14:48:17 +0100 (Sun, 01 Apr 2007) | 1 line

minor nickserv help fixes
------------------------------------------------------------------------
r754 | stu | 2007-04-01 14:12:10 +0100 (Sun, 01 Apr 2007) | 1 line

Remove SET CLOAKSTRING and add CLOAKSTRING instead
------------------------------------------------------------------------
r753 | stu | 2007-04-01 13:44:06 +0100 (Sun, 01 Apr 2007) | 1 line

make nickserv help a bit more detailed and complete.  IMO this is now suitable for production use.
------------------------------------------------------------------------
r752 | stu | 2007-04-01 10:14:04 +0100 (Sun, 01 Apr 2007) | 1 line

Fix memory leak
------------------------------------------------------------------------
r751 | stu | 2007-04-01 10:07:35 +0100 (Sun, 01 Apr 2007) | 1 line

lalalalalal
------------------------------------------------------------------------
r750 | stu | 2007-04-01 10:07:09 +0100 (Sun, 01 Apr 2007) | 1 line

beef up DROP help a bit
------------------------------------------------------------------------
r749 | tjfontaine | 2007-03-31 23:53:25 +0100 (Sat, 31 Mar 2007) | 2 lines

move the notice/privmsg check before find_service, add ruby notice handler, add rubyserv gc.start method to make sure we're memory safe

------------------------------------------------------------------------
r748 | stu | 2007-03-31 23:15:12 +0100 (Sat, 31 Mar 2007) | 1 line

Add notice handler/callback and gernicise it a bit with privmsg, also remove unused server modules
------------------------------------------------------------------------
r747 | tjfontaine | 2007-03-31 22:44:55 +0100 (Sat, 31 Mar 2007) | 2 lines

add ruby nick change handler

------------------------------------------------------------------------
r746 | tjfontaine | 2007-03-31 22:27:26 +0100 (Sat, 31 Mar 2007) | 2 lines

add join handler

------------------------------------------------------------------------
r745 | tjfontaine | 2007-03-31 22:02:10 +0100 (Sat, 31 Mar 2007) | 2 lines

RUBY_HOOKS should be an enum, also stop doing a find_service lookup and just attach the service to the object

------------------------------------------------------------------------
r744 | tjfontaine | 2007-03-31 21:44:49 +0100 (Sat, 31 Mar 2007) | 2 lines

fix ruby script loading, add join_channel, add channel privmsg callback

------------------------------------------------------------------------
r743 | stu | 2007-03-31 17:27:26 +0100 (Sat, 31 Mar 2007) | 1 line

finish review of IDENTIFY
------------------------------------------------------------------------
r742 | stu | 2007-03-31 13:03:09 +0100 (Sat, 31 Mar 2007) | 1 line

Add nickserv IDENTIFY test cases and make the code actually adhere to them, and update the langage file a bit
------------------------------------------------------------------------
r741 | stu | 2007-03-31 07:44:04 +0100 (Sat, 31 Mar 2007) | 1 line

missed a test case
------------------------------------------------------------------------
r740 | stu | 2007-03-31 07:41:19 +0100 (Sat, 31 Mar 2007) | 1 line

Fix a bug in register time on a new nick, and add the beginnings of a test plan for nickserv
------------------------------------------------------------------------
r739 | stu | 2007-03-31 00:28:50 +0100 (Sat, 31 Mar 2007) | 1 line

expandtab bad
------------------------------------------------------------------------
r738 | stu | 2007-03-31 00:23:31 +0100 (Sat, 31 Mar 2007) | 1 line

Reviewed nickserv REGISTER, tidy code and improved messaging
------------------------------------------------------------------------
r737 | stu | 2007-03-30 23:53:16 +0100 (Fri, 30 Mar 2007) | 1 line

Improve nickserv register help somewhat
------------------------------------------------------------------------
r736 | stu | 2007-03-30 23:21:41 +0100 (Fri, 30 Mar 2007) | 1 line

Fix the nick reported by sudo drop
------------------------------------------------------------------------
r735 | stu | 2007-03-30 23:06:54 +0100 (Fri, 30 Mar 2007) | 4 lines

- Fix the saga that is links, unlinking and drop
- Fix SUDO to allow unlimited params
- Don't allow people to register nicks with sudo

------------------------------------------------------------------------
r734 | tjfontaine | 2007-03-30 19:16:04 +0100 (Fri, 30 Mar 2007) | 2 lines

bad ruby, don't screw with sigsegv we like useful core dumps mmk

------------------------------------------------------------------------
r733 | stu | 2007-03-29 23:08:04 +0100 (Thu, 29 Mar 2007) | 1 line

Added real_nick, nickid and pri_nickid to struct Nick in an attempt to sort out the mess that is linked nicknames and drop
------------------------------------------------------------------------
r732 | tjfontaine | 2007-03-29 01:31:54 +0100 (Thu, 29 Mar 2007) | 2 lines

introduce_server should really be listed in the interface.h, also add ServiceModule::unload overload it if you have things you need to do before the class is gone

------------------------------------------------------------------------
r731 | stu | 2007-03-28 23:23:28 +0100 (Wed, 28 Mar 2007) | 1 line

If a nick is unlinked, we need to re-look up the nick to get the new acc id and new nick
------------------------------------------------------------------------
r730 | stu | 2007-03-28 23:14:09 +0100 (Wed, 28 Mar 2007) | 1 line

silent a compile warning in ruby(dupstring sucks), fix param ordering in m_set_mlock and send the command name in help instead of what the user gave, looks better
------------------------------------------------------------------------
r729 | tjfontaine | 2007-03-28 22:26:07 +0100 (Wed, 28 Mar 2007) | 2 lines

more places we pass ruby string to a c struct, dup those so the gc doesn't free them for us

------------------------------------------------------------------------
r728 | stu | 2007-03-28 22:23:17 +0100 (Wed, 28 Mar 2007) | 1 line

Make us -Werror clean again
------------------------------------------------------------------------
r727 | tjfontaine | 2007-03-28 22:15:01 +0100 (Wed, 28 Mar 2007) | 2 lines

this should solve most of ruby_mdoule -Werror

------------------------------------------------------------------------
r726 | stu | 2007-03-28 22:07:33 +0100 (Wed, 28 Mar 2007) | 1 line

fix base16_encode calls and --enable-debugging and a whole load of Werror bugs
------------------------------------------------------------------------
r725 | tjfontaine | 2007-03-28 22:02:04 +0100 (Wed, 28 Mar 2007) | 2 lines

make stu teh happy

------------------------------------------------------------------------
r724 | tjfontaine | 2007-03-28 21:42:49 +0100 (Wed, 28 Mar 2007) | 2 lines

no, really, make it compile with -Werror

------------------------------------------------------------------------
r723 | tjfontaine | 2007-03-28 21:38:24 +0100 (Wed, 28 Mar 2007) | 2 lines

sanity checks for nickstruct.c and make -Werror work on ruby_module.c

------------------------------------------------------------------------
r722 | weasel | 2007-03-28 20:57:34 +0100 (Wed, 28 Mar 2007) | 1 line

Magic numbers bad
------------------------------------------------------------------------
r721 | stu | 2007-03-28 20:52:49 +0100 (Wed, 28 Mar 2007) | 1 line

Fix a memory leak and a memory overread(write too?)
------------------------------------------------------------------------
r720 | stu | 2007-03-28 20:07:21 +0100 (Wed, 28 Mar 2007) | 1 line

Remove the quit callback on module unload - this caused a rather nasty seemingly random crash
------------------------------------------------------------------------
r719 | stu | 2007-03-28 19:41:51 +0100 (Wed, 28 Mar 2007) | 1 line

Fix the whole SVSNICK/SVSMODE problem and make sure we get set to the right nick not the master all the time
------------------------------------------------------------------------
r718 | stu | 2007-03-28 18:34:21 +0100 (Wed, 28 Mar 2007) | 1 line

Ripped out perl and lua support, they sucked anyway and werent being worked on
------------------------------------------------------------------------
r717 | tjfontaine | 2007-03-27 23:42:50 +0100 (Tue, 27 Mar 2007) | 2 lines

extended Module to have type field, finished ruby reloading, lua and perl need unload exports added to unload_module

------------------------------------------------------------------------
r716 | stu | 2007-03-27 20:55:58 +0100 (Tue, 27 Mar 2007) | 1 line

base16 encode returns lower case
------------------------------------------------------------------------
r715 | tjfontaine | 2007-03-27 20:32:12 +0100 (Tue, 27 Mar 2007) | 8 lines

start ruby script unload support
  - changed hooks to hash by service name
  - export unload_ruby_module
TODO
  - extend Module
  - need to setup a finalizer method
  - pin/unpin service->data

------------------------------------------------------------------------
r714 | stu | 2007-03-27 18:36:16 +0100 (Tue, 27 Mar 2007) | 1 line

Update chanserv and operserv to the new clear thingy
------------------------------------------------------------------------
r713 | stu | 2007-03-27 18:23:49 +0100 (Tue, 27 Mar 2007) | 1 line

add function for clearing a message tree
------------------------------------------------------------------------
r712 | stu | 2007-03-27 15:02:57 +0100 (Tue, 27 Mar 2007) | 1 line

Dont base16 encode it
------------------------------------------------------------------------
r711 | stu | 2007-03-27 14:56:43 +0100 (Tue, 27 Mar 2007) | 1 line

Run the key through sha1 and base16 encode it, cant hurt
------------------------------------------------------------------------
r710 | stu | 2007-03-27 14:30:35 +0100 (Tue, 27 Mar 2007) | 1 line

add proper configurable secret
------------------------------------------------------------------------
r709 | stu | 2007-03-27 14:21:38 +0100 (Tue, 27 Mar 2007) | 1 line

Use base16 instead of base64 and include the TS in the hash
------------------------------------------------------------------------
r708 | stu | 2007-03-27 13:56:21 +0100 (Tue, 27 Mar 2007) | 1 line

Add generate_hmac for generating and validating HMAC auth codes, we now use this for dropping nicknames, but it can be expanded to other things.  TODO: make the secret configurable and make the timeout configurable
------------------------------------------------------------------------
r707 | tjfontaine | 2007-03-27 03:09:17 +0100 (Tue, 27 Mar 2007) | 2 lines

start of help interface for ruby, not very useful. it'll get better.

------------------------------------------------------------------------
r706 | tjfontaine | 2007-03-27 01:08:06 +0100 (Tue, 27 Mar 2007) | 2 lines

better command registering, similar to msgtab, next languages

------------------------------------------------------------------------
r705 | tjfontaine | 2007-03-26 23:12:33 +0100 (Mon, 26 Mar 2007) | 2 lines

clarification of checks, ircncmp 0 matches, nonzero doesn't

------------------------------------------------------------------------
r704 | tjfontaine | 2007-03-26 23:03:02 +0100 (Mon, 26 Mar 2007) | 2 lines

ruby modules now work with namesuffix, ruby cmode handler fixed

------------------------------------------------------------------------
r702 | stu | 2007-03-26 22:07:28 +0100 (Mon, 26 Mar 2007) | 1 line

language problems
------------------------------------------------------------------------
r701 | stu | 2007-03-26 20:43:18 +0100 (Mon, 26 Mar 2007) | 4 lines

- Show "Server Split" in quit message on a split
- access_del returns failure wrongly
- chanserv register can accept multi word descriptions

------------------------------------------------------------------------
r700 | stu | 2007-03-26 19:56:45 +0100 (Mon, 26 Mar 2007) | 1 line

Add check for max number of parmaters and fix a couple of args that had wrong param counts.  This is a biggie.  Also send the help for a command when the param count is wrong
------------------------------------------------------------------------
r699 | stu | 2007-03-26 19:01:14 +0100 (Mon, 26 Mar 2007) | 1 line

finish fixing identify/regain - there is still a possible remote server sync issue
------------------------------------------------------------------------
r698 | stu | 2007-03-26 17:05:00 +0100 (Mon, 26 Mar 2007) | 3 lines

 r1624@proton:  stu | 2007-03-26 17:04:56 +0100
 half-fix the regain/identify problems while i relocated to synthesis

------------------------------------------------------------------------
r697 | tjfontaine | 2007-03-25 23:33:58 +0100 (Sun, 25 Mar 2007) | 2 lines

setters for client and nick structs char[] setters still disabled

------------------------------------------------------------------------
r696 | stu | 2007-03-25 22:50:41 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1620@proton:  stu | 2007-03-25 22:50:38 +0100
 Fix nickserv info somewhat.  We can't currently show if a slave nick is online when we ask for the master,

------------------------------------------------------------------------
r695 | stu | 2007-03-25 21:19:24 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1618@proton:  stu | 2007-03-25 21:19:18 +0100
 put back in some code i merged out

------------------------------------------------------------------------
r694 | tjfontaine | 2007-03-25 21:17:56 +0100 (Sun, 25 Mar 2007) | 2 lines

add setters for channel struct, add regchannel class

------------------------------------------------------------------------
r693 | stu | 2007-03-25 21:17:25 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1614@proton:  stu | 2007-03-25 21:17:02 +0100
 Fix jupeserv

------------------------------------------------------------------------
r692 | stu | 2007-03-25 21:09:46 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1612@proton:  stu | 2007-03-25 21:09:41 +0100
 Fix some ruby/jupeserv stuff

------------------------------------------------------------------------
r691 | stu | 2007-03-25 19:35:11 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1610@proton:  stu | 2007-03-25 19:35:09 +0100
 Pretend to validate email addresses

------------------------------------------------------------------------
r690 | stu | 2007-03-25 19:26:33 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1608@proton:  stu | 2007-03-25 19:26:31 +0100
 Fix private flag, make email a seperate language notice and improve private somewhat

------------------------------------------------------------------------
r689 | stu | 2007-03-25 17:25:58 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1606@proton:  stu | 2007-03-25 17:25:54 +0100
 Fix a whole load of language issues and improve langcheck a bit

------------------------------------------------------------------------
r688 | stu | 2007-03-25 16:56:41 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1604@proton:  stu | 2007-03-25 16:56:38 +0100
 oops, took a param from the wrong place

------------------------------------------------------------------------
r687 | stu | 2007-03-25 16:53:48 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1602@proton:  stu | 2007-03-25 16:53:45 +0100
 make the insuff param notice a bit more helpful

------------------------------------------------------------------------
r686 | stu | 2007-03-25 16:44:50 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1600@proton:  stu | 2007-03-25 16:44:47 +0100
 It's probably not a good idea to drop the nick of the sudoee, so educate drop about sudo

------------------------------------------------------------------------
r685 | stu | 2007-03-25 16:31:33 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1598@proton:  stu | 2007-03-25 16:31:30 +0100
 s/nickname/nick/

------------------------------------------------------------------------
r684 | stu | 2007-03-25 16:24:47 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1596@proton:  stu | 2007-03-25 16:24:45 +0100
 it's nice to update the code, but it's a good idea to update the sql query too

------------------------------------------------------------------------
r683 | stu | 2007-03-25 16:19:13 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1594@proton:  stu | 2007-03-25 16:19:09 +0100
 strip tabs from chanserv help

------------------------------------------------------------------------
r682 | stu | 2007-03-25 16:18:27 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1592@proton:  stu | 2007-03-25 16:17:18 +0100
 strip tabs from nickserv language file

------------------------------------------------------------------------
r681 | stu | 2007-03-25 15:55:21 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1590@proton:  stu | 2007-03-25 15:55:13 +0100
 Add 'langcheck' a little utility to check language files for errors

------------------------------------------------------------------------
r680 | stu | 2007-03-25 15:26:15 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1588@proton:  stu | 2007-03-25 15:26:11 +0100
 rework nickserv so it sets master The New Way(tm)

------------------------------------------------------------------------
r679 | stu | 2007-03-25 15:17:59 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1585@proton:  stu | 2007-03-25 15:17:55 +0100
 rejig nick deleting, try to make the db be more consistant

------------------------------------------------------------------------
r678 | many | 2007-03-25 12:48:25 +0100 (Sun, 25 Mar 2007) | 2 lines

jupeserv unjuping, we need a squit hook or unjupe manually. in either case, the code needs to be fixed then again.

------------------------------------------------------------------------
r677 | stu | 2007-03-25 12:40:22 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1583@proton:  stu | 2007-03-25 12:40:19 +0100
 actually this needs to allow null

------------------------------------------------------------------------
r676 | stu | 2007-03-25 12:36:07 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1581@proton:  stu | 2007-03-25 12:36:03 +0100
 Make introduce_server return the server it introduced, and pass this to ruby

------------------------------------------------------------------------
r675 | stu | 2007-03-25 12:27:58 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1579@proton:  stu | 2007-03-25 12:27:51 +0100
 i think i just exported exit_client to ruby

------------------------------------------------------------------------
r674 | many | 2007-03-25 12:16:45 +0100 (Sun, 25 Mar 2007) | 2 lines

my ruby-fu is rusted, but lets try to add some jupiter code

------------------------------------------------------------------------
r673 | stu | 2007-03-25 12:01:11 +0100 (Sun, 25 Mar 2007) | 3 lines

 r1575@proton:  stu | 2007-03-25 12:01:03 +0100
 update nickserv schema to prevent null primary_nick

------------------------------------------------------------------------
r672 | tjfontaine | 2007-03-24 21:51:19 +0000 (Sat, 24 Mar 2007) | 2 lines

no seriously, this time I think I got it right. whitespace changes.

------------------------------------------------------------------------
r671 | tjfontaine | 2007-03-24 21:28:44 +0000 (Sat, 24 Mar 2007) | 2 lines

fill in some more nickserv.en.lang moo's

------------------------------------------------------------------------
r670 | stu | 2007-03-24 21:17:29 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1569@proton:  stu | 2007-03-24 21:17:25 +0000
 remove session, jupe and exceptions from operserv and remove a lot of moos from the help

------------------------------------------------------------------------
r669 | stu | 2007-03-24 21:08:25 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1567@proton:  stu | 2007-03-24 21:08:20 +0000
 Fix tj's breakage and make op/deop actually update internal status

------------------------------------------------------------------------
r668 | tjfontaine | 2007-03-24 20:58:35 +0000 (Sat, 24 Mar 2007) | 2 lines

update chanserv.en.lang register long help to be useful

------------------------------------------------------------------------
r667 | stu | 2007-03-24 20:32:15 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1563@proton:  stu | 2007-03-24 20:32:12 +0000
 release held nicks when unforbidding and when we're killed

------------------------------------------------------------------------
r666 | stu | 2007-03-24 19:59:10 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1561@proton:  stu | 2007-03-24 19:59:08 +0000
 tidy formatting

------------------------------------------------------------------------
r665 | stu | 2007-03-24 19:51:05 +0000 (Sat, 24 Mar 2007) | 5 lines

 r1559@proton:  stu | 2007-03-24 19:50:59 +0000
 - Fix lots of chptr checks in the wrong place
 - Fix drop cores
 - Fix various chanserv commands not working

------------------------------------------------------------------------
r664 | stu | 2007-03-24 19:22:10 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1557@proton:  stu | 2007-03-24 19:22:07 +0000
 AnarchyServ is no more.. here's an idea lets NOT skip the *WHOLE* chanserv auth checks shall we?

------------------------------------------------------------------------
r663 | stu | 2007-03-24 18:49:43 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1555@proton:  stu | 2007-03-24 18:49:41 +0000
 Tell the user what access level was wrong

------------------------------------------------------------------------
r662 | stu | 2007-03-24 18:24:32 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1553@proton:  stu | 2007-03-24 18:24:30 +0000
 Don't hide channel commands

------------------------------------------------------------------------
r661 | stu | 2007-03-24 18:18:18 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1551@proton:  stu | 2007-03-24 18:18:15 +0000
 only set the pointer AFTER we check if its null not before..

------------------------------------------------------------------------
r660 | stu | 2007-03-24 17:58:17 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1549@proton:  stu | 2007-03-24 17:58:15 +0000
 Make help filter on access level, and fix the header/footer

------------------------------------------------------------------------
r659 | stu | 2007-03-24 17:46:10 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1547@proton:  stu | 2007-03-24 17:46:07 +0000
 Make sudo say SUDO in the help

------------------------------------------------------------------------
r658 | stu | 2007-03-24 17:29:58 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1545@proton:  stu | 2007-03-24 17:29:54 +0000
 reconnect when the server is squit

------------------------------------------------------------------------
r657 | stu | 2007-03-24 16:56:34 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1543@proton:  stu | 2007-03-24 16:56:30 +0000
 not really sure what this was trying to acheive but it was broken

------------------------------------------------------------------------
r656 | stu | 2007-03-24 16:48:38 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1541@proton:  stu | 2007-03-24 16:48:31 +0000
 set client->from when connecting

------------------------------------------------------------------------
r655 | stu | 2007-03-24 16:40:59 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1539@proton:  stu | 2007-03-24 16:40:56 +0000
 and admins

------------------------------------------------------------------------
r654 | stu | 2007-03-24 16:27:45 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1537@proton:  stu | 2007-03-24 16:27:42 +0000
 Actually show the right linked nick in info and also let opers see full info

------------------------------------------------------------------------
r653 | stu | 2007-03-24 15:59:17 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1535@proton:  stu | 2007-03-24 15:59:14 +0000
 dont crash if asking for our own nick info

------------------------------------------------------------------------
r652 | stu | 2007-03-24 15:41:19 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1533@proton:  stu | 2007-03-24 15:41:14 +0000
 It's a good idea to compile test before submitted

------------------------------------------------------------------------
r651 | stu | 2007-03-24 15:38:30 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1531@proton:  stu | 2007-03-24 15:38:28 +0000
 fix a big leak and potentially some others, also shut valgrind up in one place

------------------------------------------------------------------------
r650 | stu | 2007-03-24 15:11:51 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1529@proton:  stu | 2007-03-24 15:11:48 +0000
 might be useful to exit a server begore trying to reconnect

------------------------------------------------------------------------
r649 | stu | 2007-03-24 15:01:37 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1527@proton:  stu | 2007-03-24 15:01:34 +0000
 Make it a bit cleared that the number is a server id

------------------------------------------------------------------------
r648 | stu | 2007-03-24 14:47:18 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1525@proton:  stu | 2007-03-24 14:47:12 +0000
 fix some memory leaks

------------------------------------------------------------------------
r647 | stu | 2007-03-24 10:10:27 +0000 (Sat, 24 Mar 2007) | 3 lines

 r1523@proton:  stu | 2007-03-24 10:10:22 +0000
 Teach services about KILL and KICK, so it stays in sync

------------------------------------------------------------------------
r646 | stu | 2007-03-23 21:22:34 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1521@proton:  stu | 2007-03-23 21:22:32 +0000
 Add is online from

------------------------------------------------------------------------
r645 | stu | 2007-03-23 21:09:06 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1519@proton:  stu | 2007-03-23 21:09:03 +0000
 try to reconnect on disconnect

------------------------------------------------------------------------
r644 | stu | 2007-03-23 21:00:22 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1516@proton:  stu | 2007-03-23 21:00:13 +0000
 Fix umode +R sending

------------------------------------------------------------------------
r643 | stu | 2007-03-23 21:00:17 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1515@proton:  stu | 2007-03-23 20:57:58 +0000
 make drop not need a parameter, fix it so that you can only drop your own nick, and a few minor fixes

------------------------------------------------------------------------
r642 | stu | 2007-03-23 20:49:24 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1513@proton:  stu | 2007-03-23 20:49:21 +0000
 correct minor language problem

------------------------------------------------------------------------
r641 | stu | 2007-03-23 20:47:46 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1511@proton:  stu | 2007-03-23 20:47:43 +0000
 Implement CTCP

------------------------------------------------------------------------
r640 | stu | 2007-03-23 19:16:21 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1509@proton:  stu | 2007-03-23 19:16:13 +0000
 Fix core bug when setting topic on a channel which is not in use

------------------------------------------------------------------------
r639 | stu | 2007-03-23 19:13:52 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1507@proton:  stu | 2007-03-23 19:13:49 +0000
 Implement chanserv sudo and fix nickserv's

------------------------------------------------------------------------
r638 | stu | 2007-03-23 16:19:17 +0000 (Fri, 23 Mar 2007) | 3 lines

 r1505@proton:  stu | 2007-03-23 16:19:14 +0000
 Fix a rather large memory leak

------------------------------------------------------------------------
r637 | stu | 2007-03-22 23:48:56 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1503@proton:  stu | 2007-03-22 23:48:48 +0000
 report eob

------------------------------------------------------------------------
r636 | stu | 2007-03-22 23:46:09 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1501@proton:  stu | 2007-03-22 23:46:06 +0000
 generic help MUST have a NULL second param - i should review submitted code more..

------------------------------------------------------------------------
r635 | stu | 2007-03-22 23:19:55 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1499@proton:  stu | 2007-03-22 23:19:51 +0000
 Don't send +R if its not needed

------------------------------------------------------------------------
r634 | stu | 2007-03-22 23:18:31 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1497@proton:  stu | 2007-03-22 23:18:27 +0000
 Add svsmode handler for oftc protocol

------------------------------------------------------------------------
r633 | stu | 2007-03-22 22:09:26 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1494@proton:  stu | 2007-03-22 22:09:23 +0000
 implement sudo in nickserv

------------------------------------------------------------------------
r632 | tjfontaine | 2007-03-22 21:06:53 +0000 (Thu, 22 Mar 2007) | 2 lines

this should fix account admin flag

------------------------------------------------------------------------
r631 | stu | 2007-03-22 21:05:29 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1492@proton:  stu | 2007-03-22 21:05:24 +0000
 fix trans commit

------------------------------------------------------------------------
r630 | stu | 2007-03-22 19:25:34 +0000 (Thu, 22 Mar 2007) | 3 lines

 r1490@proton:  stu | 2007-03-22 19:25:18 +0000
 Unbreak the language file

------------------------------------------------------------------------
r629 | tjfontaine | 2007-03-21 17:34:05 +0000 (Wed, 21 Mar 2007) | 2 lines

there, done now it works, change lastid fool

------------------------------------------------------------------------
r628 | tjfontaine | 2007-03-21 16:28:06 +0000 (Wed, 21 Mar 2007) | 2 lines

some fixes found by stu weasel or me, still not finished chanaccess breaks constraints

------------------------------------------------------------------------
r627 | tjfontaine | 2007-03-21 00:34:42 +0000 (Wed, 21 Mar 2007) | 2 lines

almost verbatim copy of stu's dconvertdb.d, hasn't been tested, surely will have typos, requires libdbd-mysql-ruby and libdbd-pg-ruby

------------------------------------------------------------------------
r626 | tjfontaine | 2007-03-16 00:52:24 +0000 (Fri, 16 Mar 2007) | 4 lines

let us make the trunk compile
 * Makefile.am put languages before modules so modules can include their languages
 * include/services.h remove language definitions and include services-lang.h

------------------------------------------------------------------------
r621 | ravidgemole | 2007-02-14 22:51:17 +0000 (Wed, 14 Feb 2007) | 1 line

Header/footer rewrite
------------------------------------------------------------------------
r620 | ravidgemole | 2007-02-14 22:38:23 +0000 (Wed, 14 Feb 2007) | 1 line

Header and footer for serv help display
------------------------------------------------------------------------
r619 | stu | 2007-02-14 18:18:09 +0000 (Wed, 14 Feb 2007) | 3 lines

 r1913@deepfreeze:  stu | 2007-02-14 18:17:57 +0000
 correct svn Id tag, not that we have those enabled yet

------------------------------------------------------------------------
r618 | stu | 2007-02-12 21:20:24 +0000 (Mon, 12 Feb 2007) | 3 lines

 r1911@deepfreeze:  stu | 2007-02-12 21:20:15 +0000
 update todo

------------------------------------------------------------------------
r617 | stu | 2007-02-12 10:51:15 +0000 (Mon, 12 Feb 2007) | 4 lines

 r1909@deepfreeze:  stu | 2007-02-12 10:51:07 +0000
 - Add nickserv PRIVATE flag for hiding email and whatnot
 - switch to using autogenerated language files

------------------------------------------------------------------------
r616 | stu | 2007-02-10 16:54:48 +0000 (Sat, 10 Feb 2007) | 3 lines

 r1887@deepfreeze:  stu | 2007-02-10 16:54:36 +0000
 Fix nickserv language file to show drop correctly

------------------------------------------------------------------------
r615 | stu | 2007-02-09 11:53:34 +0000 (Fri, 09 Feb 2007) | 3 lines

 r1885@deepfreeze:  stu | 2007-02-09 11:52:30 +0000
 missed a header file

------------------------------------------------------------------------
r614 | stu | 2007-02-04 15:32:25 +0000 (Sun, 04 Feb 2007) | 3 lines

 r1867@deepfreeze:  stu | 2007-02-04 15:32:18 +0000
 Fix logging, we need to reopen the right log

------------------------------------------------------------------------
r613 | stu | 2007-02-04 15:17:32 +0000 (Sun, 04 Feb 2007) | 3 lines

 r1865@deepfreeze:  stu | 2007-02-04 15:17:27 +0000
 update TODO

------------------------------------------------------------------------
r612 | stu | 2007-02-04 15:16:13 +0000 (Sun, 04 Feb 2007) | 5 lines

 r1863@deepfreeze:  stu | 2007-02-04 15:16:05 +0000
 - rejig some conf stuff
 - move some stuff into libio where it should be
 - add SIGHUP and conf-rereading

------------------------------------------------------------------------
r611 | stu | 2007-02-04 11:31:08 +0000 (Sun, 04 Feb 2007) | 3 lines

 r1861@deepfreeze:  stu | 2007-02-04 11:30:46 +0000
 make --disable-[ruby|lua|perl] work and also modify the code so it compiles when these are disabled

------------------------------------------------------------------------
r610 | lfilipoz | 2007-02-04 00:12:54 +0000 (Sun, 04 Feb 2007) | 2 lines

autofu fix

------------------------------------------------------------------------
r609 | lfilipoz | 2007-02-03 23:58:30 +0000 (Sat, 03 Feb 2007) | 2 lines

fix the problems that stu's autofu created

------------------------------------------------------------------------
r608 | stu | 2007-02-03 21:52:35 +0000 (Sat, 03 Feb 2007) | 3 lines

 r1855@deepfreeze:  stu | 2007-02-03 21:52:25 +0000
 I broke automake, can someone have a look and fix it?

------------------------------------------------------------------------
r607 | stu | 2007-02-03 20:42:08 +0000 (Sat, 03 Feb 2007) | 3 lines

 r1853@deepfreeze:  stu | 2007-02-03 20:41:56 +0000
 log to db.log instead of printf

------------------------------------------------------------------------
r606 | stu | 2007-02-03 19:45:49 +0000 (Sat, 03 Feb 2007) | 3 lines

 r1851@deepfreeze:  stu | 2007-02-03 19:45:40 +0000
 remove INSTALL from mainter clean stuff

------------------------------------------------------------------------
r605 | stu | 2007-02-03 12:59:24 +0000 (Sat, 03 Feb 2007) | 3 lines

 r1849@deepfreeze:  stu | 2007-02-03 12:59:17 +0000
 Dont make us a liar, actually add the introduce_server ruby wrapper

------------------------------------------------------------------------
r604 | stu | 2007-02-02 21:04:14 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1847@deepfreeze:  stu | 2007-02-02 21:04:05 +0000
 update svn:ignores and make the tree build again

------------------------------------------------------------------------
r603 | stu | 2007-02-02 20:32:57 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1845@deepfreeze:  stu | 2007-02-02 20:32:51 +0000
 Add dummy news

------------------------------------------------------------------------
r602 | stu | 2007-02-02 20:18:55 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1843@deepfreeze:  stu | 2007-02-02 20:15:10 +0000
 update README, it still needs writing

------------------------------------------------------------------------
r601 | stu | 2007-02-02 20:13:37 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1841@deepfreeze:  stu | 2007-02-02 20:13:28 +0000
 Add INSTALL file which needs to get written sometime soon

------------------------------------------------------------------------
r600 | stu | 2007-02-02 19:47:36 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1839@deepfreeze:  stu | 2007-02-02 19:47:29 +0000
 typo

------------------------------------------------------------------------
r599 | stu | 2007-02-02 19:45:33 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1837@deepfreeze:  stu | 2007-02-02 19:45:21 +0000
 let autofu take care of this

------------------------------------------------------------------------
r598 | stu | 2007-02-02 18:27:06 +0000 (Fri, 02 Feb 2007) | 3 lines

 r1835@deepfreeze:  stu | 2007-02-02 18:26:59 +0000
 Hmm, services really belongs in bin

------------------------------------------------------------------------
r597 | stu | 2007-01-30 22:47:14 +0000 (Tue, 30 Jan 2007) | 3 lines

 r1824@deepfreeze:  stu | 2007-01-30 22:46:53 +0000
 oops

------------------------------------------------------------------------
r596 | stu | 2007-01-30 20:57:55 +0000 (Tue, 30 Jan 2007) | 3 lines

 r1822@deepfreeze:  stu | 2007-01-30 20:57:42 +0000
 Move the lua stuff into its own dir until the day i can be arsed to do something with it

------------------------------------------------------------------------
r595 | stu | 2007-01-29 21:49:53 +0000 (Mon, 29 Jan 2007) | 3 lines

 r1820@deepfreeze:  stu | 2007-01-29 21:49:48 +0000
 Add a #define for my hackery in perl, someone needs to #undef this and try it to see if its my system that's broken

------------------------------------------------------------------------
r594 | stu | 2007-01-29 21:40:59 +0000 (Mon, 29 Jan 2007) | 3 lines

 r1818@deepfreeze:  stu | 2007-01-29 21:40:43 +0000
 checkpoint of the perl stuff im playing with

------------------------------------------------------------------------
r593 | stu | 2007-01-25 22:07:22 +0000 (Thu, 25 Jan 2007) | 3 lines

 r1816@deepfreeze:  stu | 2007-01-25 22:07:16 +0000
 Ruby shouldnt touch signal handlers, any errors in ruby code should be picked up by rb_protect

------------------------------------------------------------------------
r592 | stu | 2007-01-25 20:07:30 +0000 (Thu, 25 Jan 2007) | 6 lines

 r1814@deepfreeze:  stu | 2007-01-25 20:07:04 +0000
 - some ruby fixage
 - add xmlrpc server
 - schedule ruby threads every now and then
 - bad tj

------------------------------------------------------------------------
r591 | stu | 2007-01-22 22:52:24 +0000 (Mon, 22 Jan 2007) | 3 lines

 r1812@deepfreeze:  stu | 2007-01-22 22:52:17 +0000
 GHOST, REGAIN and IDENTIFY all now safely(hmm) svsnick the offender away instead of killing them off, and they also change your nick to be the one you authed as

------------------------------------------------------------------------
r590 | stu | 2007-01-22 19:37:39 +0000 (Mon, 22 Jan 2007) | 3 lines

 r1810@deepfreeze:  stu | 2007-01-22 19:37:30 +0000
 exit an enforcer if someone uses identify with a nick param

------------------------------------------------------------------------
r589 | stu | 2007-01-22 10:17:44 +0000 (Mon, 22 Jan 2007) | 3 lines

 r1808@deepfreeze:  stu | 2007-01-22 10:17:38 +0000
 Fix enforce properly

------------------------------------------------------------------------
r588 | stu | 2007-01-22 09:51:57 +0000 (Mon, 22 Jan 2007) | 3 lines

 r1806@deepfreeze:  stu | 2007-01-22 09:51:43 +0000
 Fix enforce-colliding-people bug

------------------------------------------------------------------------
r587 | stu | 2007-01-21 23:54:37 +0000 (Sun, 21 Jan 2007) | 3 lines

 r1802@deepfreeze:  stu | 2007-01-21 23:54:32 +0000
 Add proper version strings

------------------------------------------------------------------------
r586 | lfilipoz | 2007-01-21 23:54:09 +0000 (Sun, 21 Jan 2007) | 2 lines

fix /var, or /var/log isnt being created on install

------------------------------------------------------------------------
r585 | stu | 2007-01-21 23:34:46 +0000 (Sun, 21 Jan 2007) | 3 lines

 r1800@deepfreeze:  stu | 2007-01-21 23:34:37 +0000
 Fix the log paths

------------------------------------------------------------------------
r584 | lfilipoz | 2007-01-21 23:29:24 +0000 (Sun, 21 Jan 2007) | 2 lines

make DPATH PREFIX

------------------------------------------------------------------------
r583 | lfilipoz | 2007-01-21 23:27:50 +0000 (Sun, 21 Jan 2007) | 2 lines

one line commit for stu's icky DPATH

------------------------------------------------------------------------
r582 | stu | 2007-01-21 23:27:14 +0000 (Sun, 21 Jan 2007) | 3 lines

 r1795@deepfreeze:  stu | 2007-01-21 23:27:01 +0000
 Add a -namesuffix command line parameter which adds to every service name

------------------------------------------------------------------------
r581 | lfilipoz | 2007-01-21 23:19:27 +0000 (Sun, 21 Jan 2007) | 4 lines

add support for LOCALSTATEDIR and LOGDIR
clean up build system to cleanse libltdl on maintainer-clean
clean up build system for src/ruby_module

------------------------------------------------------------------------
r580 | stu | 2007-01-21 23:05:10 +0000 (Sun, 21 Jan 2007) | 3 lines

 r1791@deepfreeze:  stu | 2007-01-21 23:05:03 +0000
 Make services a daemon, write pidfiles, and add some command line argument passing

------------------------------------------------------------------------
r579 | stu | 2007-01-21 22:13:42 +0000 (Sun, 21 Jan 2007) | 3 lines

 r1789@deepfreeze:  stu | 2007-01-21 22:13:22 +0000
 update TODO

------------------------------------------------------------------------
r578 | stu | 2007-01-21 22:11:37 +0000 (Sun, 21 Jan 2007) | 3 lines

 r1787@deepfreeze:  stu | 2007-01-21 22:11:28 +0000
 update AUTHORS - mc and tjfontaine update your email addresses

------------------------------------------------------------------------
r577 | stu | 2007-01-20 21:37:42 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1780@deepfreeze:  stu | 2007-01-20 21:37:32 +0000
 add service{} block

------------------------------------------------------------------------
r576 | stu | 2007-01-20 20:07:14 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1778@deepfreeze:  stu | 2007-01-20 20:06:31 +0000
 Fix channel insert query to reflect the new fields

------------------------------------------------------------------------
r575 | stu | 2007-01-20 19:37:29 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1775@deepfreeze:  stu | 2007-01-20 19:37:04 +0000
 Ok, last commit fixed a segfault in the newserver callback, and added conf/service.h, even though it wasnt supposed to

------------------------------------------------------------------------
r574 | stu | 2007-01-20 19:37:10 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1774@deepfreeze:  stu | 2007-01-20 19:35:07 +0000
 src/interface.c

------------------------------------------------------------------------
r572 | stu | 2007-01-20 01:45:29 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1770@deepfreeze:  stu | 2007-01-20 01:45:24 +0000
 do the last fix right

------------------------------------------------------------------------
r571 | stu | 2007-01-20 01:40:55 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1768@deepfreeze:  stu | 2007-01-20 01:40:45 +0000
 remove people from the hash tables when we kill them

------------------------------------------------------------------------
r570 | stu | 2007-01-20 01:33:15 +0000 (Sat, 20 Jan 2007) | 3 lines

 r1766@deepfreeze:  stu | 2007-01-20 01:29:48 +0000
 add introduce_server function

------------------------------------------------------------------------
r569 | tjfontaine | 2007-01-20 00:41:10 +0000 (Sat, 20 Jan 2007) | 3 lines

bad mmk don't keep reinstalling the default hooks


------------------------------------------------------------------------
r568 | stu | 2007-01-19 22:39:40 +0000 (Fri, 19 Jan 2007) | 3 lines

 r1762@deepfreeze:  stu | 2007-01-19 22:39:29 +0000
 make message structs static since now we're dealing with global symbols and we dont want to conflict between mduleS

------------------------------------------------------------------------
r567 | stu | 2007-01-19 22:32:59 +0000 (Fri, 19 Jan 2007) | 3 lines

 r1756@deepfreeze:  stu | 2007-01-19 22:32:50 +0000
 Add jupeserv for weasel

------------------------------------------------------------------------
r566 | tjfontaine | 2007-01-19 20:44:59 +0000 (Fri, 19 Jan 2007) | 3 lines

Let's break shit. Move ruby_module.c to it's own directory and split out the
start of the classes.

------------------------------------------------------------------------
r565 | stu | 2007-01-19 17:21:31 +0000 (Fri, 19 Jan 2007) | 3 lines

 r1754@deepfreeze:  stu | 2007-01-19 17:21:19 +0000
 do some TODO items

------------------------------------------------------------------------
r564 | stu | 2007-01-19 17:11:49 +0000 (Fri, 19 Jan 2007) | 3 lines

 r1749@deepfreeze:  stu | 2007-01-19 17:11:37 +0000
 Add ltdl to services

------------------------------------------------------------------------
r563 | weasel | 2007-01-19 04:43:13 +0000 (Fri, 19 Jan 2007) | 1 line

And a minor bug
------------------------------------------------------------------------
r562 | weasel | 2007-01-19 04:41:15 +0000 (Fri, 19 Jan 2007) | 1 line

Add two questions to the todo list
------------------------------------------------------------------------
r560 | stu | 2007-01-17 20:59:03 +0000 (Wed, 17 Jan 2007) | 3 lines

 r1745@deepfreeze:  stu | 2007-01-17 20:58:50 +0000
 Add some spammy notices in the db reconnect stuff

------------------------------------------------------------------------
r559 | stu | 2007-01-16 23:17:57 +0000 (Tue, 16 Jan 2007) | 3 lines

 r1743@deepfreeze:  stu | 2007-01-16 23:17:52 +0000
 log if the db goes away

------------------------------------------------------------------------
r558 | stu | 2007-01-16 23:15:24 +0000 (Tue, 16 Jan 2007) | 3 lines

 r1741@deepfreeze:  stu | 2007-01-16 23:15:18 +0000
 Retry connections for 150 seconds in total

------------------------------------------------------------------------
r557 | stu | 2007-01-16 23:09:44 +0000 (Tue, 16 Jan 2007) | 3 lines

 r1739@deepfreeze:  stu | 2007-01-16 23:09:37 +0000
 reconnect if the database goes away.  also make our long macros wrapped in a do{} while(0)

------------------------------------------------------------------------
r554 | stu | 2007-01-08 22:15:52 +0000 (Mon, 08 Jan 2007) | 3 lines

 r1733@deepfreeze:  stu | 2007-01-08 22:15:43 +0000
 Fix segv because of missing arg

------------------------------------------------------------------------
r553 | stu | 2007-01-07 22:20:25 +0000 (Sun, 07 Jan 2007) | 3 lines

 r1727@deepfreeze:  stu | 2007-01-07 22:18:49 +0000
 long descriptions too..

------------------------------------------------------------------------
r550 | stu | 2007-01-07 22:14:17 +0000 (Sun, 07 Jan 2007) | 3 lines

 r1723@deepfreeze:  stu | 2007-01-07 22:14:10 +0000
 Apparently we have some long topic and entrymsgs set

------------------------------------------------------------------------
r549 | stu | 2007-01-07 21:10:21 +0000 (Sun, 07 Jan 2007) | 3 lines

 r1721@deepfreeze:  stu | 2007-01-07 21:10:11 +0000
 right, this was wrong too.. missing comma

------------------------------------------------------------------------
r547 | stu | 2007-01-07 21:07:35 +0000 (Sun, 07 Jan 2007) | 3 lines

 r1716@deepfreeze:  stu | 2007-01-07 21:07:25 +0000
 Add some missing fields from channel

------------------------------------------------------------------------
r546 | lfilipoz | 2007-01-05 18:54:54 +0000 (Fri, 05 Jan 2007) | 2 lines

clean up TODO

------------------------------------------------------------------------
r534 | stu | 2007-01-02 15:39:26 +0000 (Tue, 02 Jan 2007) | 3 lines

 r1685@deepfreeze:  stu | 2007-01-02 15:39:20 +0000
 Add missing .m4

------------------------------------------------------------------------
r530 | stu | 2007-01-02 01:48:59 +0000 (Tue, 02 Jan 2007) | 3 lines

 r1677@deepfreeze:  stu | 2007-01-02 01:48:25 +0000
 Fix -export-dynamic The Right Way

------------------------------------------------------------------------
r529 | stu | 2007-01-02 01:37:14 +0000 (Tue, 02 Jan 2007) | 3 lines

 r1675@deepfreeze:  stu | 2007-01-02 01:37:09 +0000
 undo test

------------------------------------------------------------------------
r528 | stu | 2007-01-02 01:36:28 +0000 (Tue, 02 Jan 2007) | 3 lines

 r1671@deepfreeze:  stu | 2007-01-02 01:35:36 +0000
 we need -export-dynamic on the services binary

------------------------------------------------------------------------
r527 | stu | 2007-01-02 01:35:58 +0000 (Tue, 02 Jan 2007) | 3 lines

 r1670@deepfreeze:  stu | 2007-01-02 01:11:52 +0000
 import new build system courtesy of the wisdom of Luca.  It's shiney and stuff.

------------------------------------------------------------------------
r526 | stu | 2007-01-02 01:35:45 +0000 (Tue, 02 Jan 2007) | 5 lines

 r1623@deepfreeze:  stu | 2006-12-27 22:55:23 +0000
  r1622@deepfreeze:  stu | 2006-12-27 22:55:20 +0000
  testing
 

------------------------------------------------------------------------
r501 | stu | 2006-12-27 22:42:19 +0000 (Wed, 27 Dec 2006) | 3 lines

 r1617@deepfreeze:  stu | 2006-12-27 22:42:05 +0000
 Undo the breakage that svk just caused

------------------------------------------------------------------------
r500 | stu | 2006-12-27 22:37:08 +0000 (Wed, 27 Dec 2006) | 5 lines

 r396@deepfreeze:  stu | 2006-12-14 21:15:55 +0000
 - Port check_list_entry to the new method
 - Fix USERHOSTLEN define to be long enough
 - remove dodgy unneeded query

------------------------------------------------------------------------
r499 | stu | 2006-12-27 22:36:58 +0000 (Wed, 27 Dec 2006) | 3 lines

 r394@deepfreeze:  stu | 2006-12-14 19:33:52 +0000
 Fix mysql schema for nicks and add the new ?B type thingies for yada and other misc fixes

------------------------------------------------------------------------
r498 | stu | 2006-12-27 21:54:41 +0000 (Wed, 27 Dec 2006) | 3 lines

 r1611@deepfreeze:  stu | 2006-12-27 21:54:34 +0000
 mlock implementation.. its not finished yet, but i need to submit this. It's mostly working, and boy is it *evil*

------------------------------------------------------------------------
r497 | stu | 2006-12-24 21:23:37 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1609@deepfreeze:  stu | 2006-12-24 21:23:25 +0000
 Add MLOCK to chanserv, not functional yet but you can set it.  Also the parser wasnt as broken as i thought it was..

------------------------------------------------------------------------
r496 | stu | 2006-12-24 20:11:28 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1607@deepfreeze:  stu | 2006-12-24 20:11:23 +0000
 Implement CS Expirebans

------------------------------------------------------------------------
r495 | stu | 2006-12-24 19:39:17 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1605@deepfreeze:  stu | 2006-12-24 19:39:12 +0000
 Implement chanserv autolimit

------------------------------------------------------------------------
r494 | stu | 2006-12-24 18:02:40 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1603@deepfreeze:  stu | 2006-12-24 18:02:24 +0000
 Deop people on registered channels on new channel join or on burst

------------------------------------------------------------------------
r493 | stu | 2006-12-24 17:22:27 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1600@deepfreeze:  stu | 2006-12-24 17:22:03 +0000
 Fix paramter order in m_set_flag and add a prototype for kill_user

------------------------------------------------------------------------
r492 | stu | 2006-12-24 17:22:10 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1599@deepfreeze:  stu | 2006-12-24 17:19:21 +0000
 Implemented restricted channel option

------------------------------------------------------------------------
r491 | stu | 2006-12-24 16:32:51 +0000 (Sun, 24 Dec 2006) | 3 lines

 r1596@deepfreeze:  stu | 2006-12-24 16:32:29 +0000
 Dont send nick change commands if its our client..

------------------------------------------------------------------------
r490 | stu | 2006-12-24 16:32:37 +0000 (Sun, 24 Dec 2006) | 8 lines

 r1595@deepfreeze:  stu | 2006-12-24 16:29:57 +0000
 - Identify now accepts a second argument - a nick to change you to after
   identifying
 - introduce a fake client clone when enforce is enabled to prevent someone
   continously changing nick.  Users can regain their nick with the new regain
   command or with the new 2 param version of identify.
 - Add kill_user function

------------------------------------------------------------------------
r489 | stu | 2006-12-23 23:01:38 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1593@deepfreeze:  stu | 2006-12-23 23:01:33 +0000
 This wasnt supposed to get submitted though

------------------------------------------------------------------------
r488 | stu | 2006-12-23 23:00:38 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1591@deepfreeze:  stu | 2006-12-23 23:00:29 +0000
 finally we understand what is going on here enough to fix it properly

------------------------------------------------------------------------
r487 | stu | 2006-12-23 18:37:02 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1589@deepfreeze:  stu | 2006-12-23 18:36:55 +0000
 Rewrite the services message parser somewhat so it doesnt quite suck so much.

------------------------------------------------------------------------
r485 | stu | 2006-12-23 16:15:46 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1585@deepfreeze:  stu | 2006-12-23 16:15:40 +0000
 We were going to do this but decided not to

------------------------------------------------------------------------
r484 | stu | 2006-12-23 15:42:50 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1583@deepfreeze:  stu | 2006-12-23 15:42:45 +0000
 dont fully understand why but this is the order stuff needs to be done in.

------------------------------------------------------------------------
r483 | stu | 2006-12-23 15:19:35 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1581@deepfreeze:  stu | 2006-12-23 15:19:27 +0000
 setup me struct before anythign else in case something goes wrong and we have to exit cleanly

------------------------------------------------------------------------
r482 | stu | 2006-12-23 14:18:48 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1579@deepfreeze:  stu | 2006-12-23 14:18:42 +0000
 master requires at least one parameter

------------------------------------------------------------------------
r481 | stu | 2006-12-23 14:10:04 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1577@deepfreeze:  stu | 2006-12-23 14:09:58 +0000
 cloak isnt a pointer

------------------------------------------------------------------------
r480 | stu | 2006-12-23 13:47:40 +0000 (Sat, 23 Dec 2006) | 3 lines

 r1575@deepfreeze:  stu | 2006-12-23 13:47:34 +0000
 Make primary_nick an id key so that it actually works as a key.  In addition unbreak nickserv DROP.

------------------------------------------------------------------------
r479 | stu | 2006-12-22 23:45:59 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1573@deepfreeze:  stu | 2006-12-22 23:45:46 +0000
 Add a unforbid command to nickserv

------------------------------------------------------------------------
r478 | stu | 2006-12-22 23:30:37 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1571@deepfreeze:  stu | 2006-12-22 23:30:28 +0000
 tidy nickserv info output

------------------------------------------------------------------------
r477 | stu | 2006-12-22 23:25:39 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1569@deepfreeze:  stu | 2006-12-22 23:25:30 +0000
 fix parser core

------------------------------------------------------------------------
r476 | stu | 2006-12-22 23:18:21 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1567@deepfreeze:  stu | 2006-12-22 23:18:09 +0000
 Add alias flag for messages that are aliases and do not show up in help

------------------------------------------------------------------------
r475 | stu | 2006-12-22 20:27:40 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1565@deepfreeze:  stu | 2006-12-22 20:27:35 +0000
 Clean up some paramter settings and report proper error messages

------------------------------------------------------------------------
r474 | stu | 2006-12-22 19:37:17 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1563@deepfreeze:  stu | 2006-12-22 19:37:12 +0000
 Capture unknown sub messages and display a standard help message

------------------------------------------------------------------------
r473 | stu | 2006-12-22 19:05:24 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1561@deepfreeze:  stu | 2006-12-22 19:05:18 +0000
 parv[2] to register is the channel description. set it so.

------------------------------------------------------------------------
r472 | stu | 2006-12-22 19:00:29 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1559@deepfreeze:  stu | 2006-12-22 19:00:22 +0000
 cascade the delete when we drop a channel to the channel_access table

------------------------------------------------------------------------
r471 | stu | 2006-12-22 18:46:56 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1557@deepfreeze:  stu | 2006-12-22 18:46:51 +0000
 So, there was a bug..  Mmm, chicken pie.

------------------------------------------------------------------------
r470 | stu | 2006-12-22 18:29:24 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1555@deepfreeze:  stu | 2006-12-22 18:29:18 +0000
 So I finally got around to implementing message flags.

------------------------------------------------------------------------
r469 | stu | 2006-12-22 18:17:47 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1553@deepfreeze:  stu | 2006-12-22 18:17:41 +0000
 implement CS topic lock

------------------------------------------------------------------------
r468 | stu | 2006-12-22 16:23:15 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1551@deepfreeze:  stu | 2006-12-22 16:23:09 +0000
 Make chanserv set commands a bit more generic

------------------------------------------------------------------------
r467 | stu | 2006-12-22 14:00:08 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1549@deepfreeze:  stu | 2006-12-22 13:59:48 +0000
 Fix core when issueing non sub command on non existing channels

------------------------------------------------------------------------
r466 | stu | 2006-12-22 13:50:21 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1547@deepfreeze:  stu | 2006-12-22 13:50:13 +0000
 Do not allow the last MASTER to be removed from the channel access list

------------------------------------------------------------------------
r465 | stu | 2006-12-22 11:50:23 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1545@deepfreeze:  stu | 2006-12-22 11:49:50 +0000
 Remove the concept of a channel founder and just add the person who created the channel to the access list as MASTER

------------------------------------------------------------------------
r464 | stu | 2006-12-22 11:27:18 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1543@deepfreeze:  stu | 2006-12-22 11:27:11 +0000
 Don't allow people to link to a nickname already linked in the chain

------------------------------------------------------------------------
r463 | stu | 2006-12-22 02:00:37 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1541@deepfreeze:  stu | 2006-12-22 02:00:27 +0000
 bad cdlu no break languages.  also let admins view full info lists

------------------------------------------------------------------------
r462 | stu | 2006-12-22 01:40:31 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1537@deepfreeze:  stu | 2006-12-22 01:39:55 +0000
 Fix some bugs found by the evil twosome

------------------------------------------------------------------------
r461 | stu | 2006-12-22 01:40:19 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1536@deepfreeze:  stu | 2006-12-22 00:43:11 +0000
 rename clearbans expirebans and remove CLEAR MODES

------------------------------------------------------------------------
r460 | stu | 2006-12-22 01:40:01 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1535@deepfreeze:  stu | 2006-12-22 00:30:33 +0000
 unbold channel access flags

------------------------------------------------------------------------
r459 | stu | 2006-12-22 00:23:16 +0000 (Fri, 22 Dec 2006) | 3 lines

 r1533@deepfreeze:  stu | 2006-12-22 00:23:10 +0000
 Write more of the chanserv help. It should be pretty much done now. And fix a bug in the parser for free.

------------------------------------------------------------------------
r458 | stu | 2006-12-21 22:24:15 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1531@deepfreeze:  stu | 2006-12-21 22:24:08 +0000
 more memory leaks(surely not) and reworked db listing because it was broken and only worked by fluke

------------------------------------------------------------------------
r457 | stu | 2006-12-21 21:28:08 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1529@deepfreeze:  stu | 2006-12-21 21:28:02 +0000
 more memory related bugs

------------------------------------------------------------------------
r456 | stu | 2006-12-21 20:39:29 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1527@deepfreeze:  stu | 2006-12-21 20:39:20 +0000
 verious leak plugs and minor bugfixes

------------------------------------------------------------------------
r455 | stu | 2006-12-21 19:19:01 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1525@deepfreeze:  stu | 2006-12-21 19:18:55 +0000
 patch up some minor leaks

------------------------------------------------------------------------
r452 | stu | 2006-12-21 15:52:13 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1519@deepfreeze:  stu | 2006-12-21 15:52:01 +0000
 Clear out a couple of variables to silence some valgrind errors

------------------------------------------------------------------------
r451 | stu | 2006-12-21 15:28:44 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1517@deepfreeze:  stu | 2006-12-21 15:28:38 +0000
 Add signal handlers and some prototype cleanup functions

------------------------------------------------------------------------
r450 | stu | 2006-12-21 01:00:51 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1515@deepfreeze:  stu | 2006-12-21 01:00:43 +0000
 add some more chanserv help

------------------------------------------------------------------------
r449 | stu | 2006-12-21 00:43:11 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1510@deepfreeze:  stu | 2006-12-21 00:42:13 +0000
 Identify entry messages to the channel they came from

------------------------------------------------------------------------
r448 | stu | 2006-12-21 00:42:59 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1509@deepfreeze:  stu | 2006-12-21 00:38:52 +0000
 Remove the rather pointless chanserv secure flag

------------------------------------------------------------------------
r447 | stu | 2006-12-21 00:42:43 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1508@deepfreeze:  stu | 2006-12-21 00:29:18 +0000
 tabs good spaces bad

------------------------------------------------------------------------
r446 | stu | 2006-12-21 00:42:23 +0000 (Thu, 21 Dec 2006) | 3 lines

 r1507@deepfreeze:  stu | 2006-12-21 00:27:47 +0000
 expand on chanserv help a bit

------------------------------------------------------------------------
r445 | stu | 2006-12-20 23:13:04 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1505@deepfreeze:  stu | 2006-12-20 23:12:53 +0000
 implement TOPIC sending and fix another nasty core

------------------------------------------------------------------------
r444 | stu | 2006-12-20 22:38:16 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1503@deepfreeze:  stu | 2006-12-20 22:38:10 +0000
 Fix nasty core

------------------------------------------------------------------------
r443 | stu | 2006-12-20 22:24:06 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1501@deepfreeze:  stu | 2006-12-20 22:24:00 +0000
 Add access checks on non sub commands.  aaaaaand were done

------------------------------------------------------------------------
r442 | stu | 2006-12-20 22:17:17 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1498@deepfreeze:  stu | 2006-12-20 22:16:40 +0000
 opers can set cloakstring, users cant set their own

------------------------------------------------------------------------
r441 | stu | 2006-12-20 22:16:54 +0000 (Wed, 20 Dec 2006) | 5 lines

 r1497@deepfreeze:  stu | 2006-12-20 22:15:54 +0000
 - Add the nickname part of the new permissions system
 - enforce admin addition/removal when you do it(no reid required)
 - Operserv commands need to be reviewed to see what to set their access at

------------------------------------------------------------------------
r440 | stu | 2006-12-20 21:47:48 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1495@deepfreeze:  stu | 2006-12-20 21:47:01 +0000
 implement chanserv ACCESS DEL

------------------------------------------------------------------------
r439 | stu | 2006-12-20 20:55:53 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1493@deepfreeze:  stu | 2006-12-20 20:55:47 +0000
 Add a service paramter to tell the parser that you expect your arguments to be channels.  This fixes a nasty issue where you could fool services into executing a channel command without a valid channel.  I'd much prefer this was a struct message flag though.. maybe later.

------------------------------------------------------------------------
r438 | stu | 2006-12-20 20:46:31 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1491@deepfreeze:  stu | 2006-12-20 20:46:24 +0000
 fix wrong notice source

------------------------------------------------------------------------
r437 | stu | 2006-12-20 20:26:22 +0000 (Wed, 20 Dec 2006) | 3 lines

 r1489@deepfreeze:  stu | 2006-12-20 20:26:14 +0000
 The all new shiney channel permission system in all its glory. There is some stuff to do(mainly nickname permissions) so this is a checkpoint checkin

------------------------------------------------------------------------
r436 | stu | 2006-12-19 17:13:20 +0000 (Tue, 19 Dec 2006) | 3 lines

 r1487@deepfreeze:  stu | 2006-12-19 17:13:13 +0000
 AKILL enforcement and removal now works

------------------------------------------------------------------------
r435 | stu | 2006-12-19 12:14:12 +0000 (Tue, 19 Dec 2006) | 3 lines

 r1485@deepfreeze:  stu | 2006-12-19 12:14:05 +0000
 start the merging of akick/akill structs and remove a bundle of compile warnings

------------------------------------------------------------------------
r434 | stu | 2006-12-18 22:45:23 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1483@deepfreeze:  stu | 2006-12-18 22:45:17 +0000
 Add the rather sexy SET MASTER option

------------------------------------------------------------------------
r433 | stu | 2006-12-18 22:23:22 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1481@deepfreeze:  stu | 2006-12-18 22:23:13 +0000
 Add a primary_nick field to account to improve linking somewhat.

------------------------------------------------------------------------
r432 | weasel | 2006-12-18 21:39:42 +0000 (Mon, 18 Dec 2006) | 1 line

Also mess with the mysql part to make stu happy.  who knows if it is correct :)
------------------------------------------------------------------------
r431 | weasel | 2006-12-18 21:37:37 +0000 (Mon, 18 Dec 2006) | 1 line

Make setter nullable in akick
------------------------------------------------------------------------
r430 | weasel | 2006-12-18 21:35:02 +0000 (Mon, 18 Dec 2006) | 1 line

NOT NULL is not needed for PRIMARY KEY attributes.  they implicitly are.  also, nick is very much our primary key in the nickname table
------------------------------------------------------------------------
r429 | stu | 2006-12-18 20:27:21 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1475@deepfreeze:  stu | 2006-12-18 20:27:12 +0000
 how about not enforcing akicks on non reg channels, eh?

------------------------------------------------------------------------
r428 | stu | 2006-12-18 19:12:38 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1473@deepfreeze:  stu | 2006-12-18 19:12:34 +0000
 these commands need paramters

------------------------------------------------------------------------
r426 | stu | 2006-12-18 14:35:42 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1469@deepfreeze:  stu | 2006-12-18 14:35:32 +0000
 Do drugs much?  This should work slightly better for iterating only strings in lists.

------------------------------------------------------------------------
r425 | stu | 2006-12-18 12:15:42 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1467@deepfreeze:  stu | 2006-12-18 12:15:34 +0000
 Add CS Unban

------------------------------------------------------------------------
r424 | stu | 2006-12-18 11:51:29 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1465@deepfreeze:  stu | 2006-12-18 11:51:22 +0000
 Add CS invite

------------------------------------------------------------------------
r423 | stu | 2006-12-18 02:14:49 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1463@deepfreeze:  stu | 2006-12-18 02:14:40 +0000
 add cs deop

------------------------------------------------------------------------
r422 | stu | 2006-12-18 02:07:02 +0000 (Mon, 18 Dec 2006) | 3 lines

 r1461@deepfreeze:  stu | 2006-12-18 02:06:55 +0000
 add cs op

------------------------------------------------------------------------
r421 | stu | 2006-12-17 23:38:00 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1459@deepfreeze:  stu | 2006-12-17 23:37:50 +0000
 cs clear ops/voices/users done

------------------------------------------------------------------------
r420 | stu | 2006-12-17 23:03:36 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1456@deepfreeze:  stu | 2006-12-17 23:03:18 +0000
 Make (un)ban_mask actually add/remove the bans to our internal lists, and fix clear bans to use dlink_foreach_safe so that its pointers dont disappear from under it.

------------------------------------------------------------------------
r419 | stu | 2006-12-17 23:03:23 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1455@deepfreeze:  stu | 2006-12-17 22:49:54 +0000
 Add ChanServ CLEAR templates and implement CLEAR BANS

------------------------------------------------------------------------
r418 | stu | 2006-12-17 20:37:37 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1453@deepfreeze:  stu | 2006-12-17 20:37:31 +0000
 remove pointless commands

------------------------------------------------------------------------
r417 | stu | 2006-12-17 20:35:09 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1451@deepfreeze:  stu | 2006-12-17 20:34:55 +0000
 chanserv akick enforcement and addition of the akick enforce command.  Rather shiney, really..

------------------------------------------------------------------------
r416 | andy | 2006-12-17 19:52:30 +0000 (Sun, 17 Dec 2006) | 2 lines

Initial import of the French (France) version of the chanserv help file. It is modelled after the english version. It is not completely translated at this point. It is a good start though.

------------------------------------------------------------------------
r415 | andy | 2006-12-17 19:15:39 +0000 (Sun, 17 Dec 2006) | 2 lines

Added bolding for dynamic parameters.

------------------------------------------------------------------------
r414 | stu | 2006-12-17 17:13:58 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1445@deepfreeze:  stu | 2006-12-17 17:13:49 +0000
 add akick del and seperate mask and nick akicks with 2 inserts

------------------------------------------------------------------------
r413 | stu | 2006-12-17 15:25:51 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1442@deepfreeze:  stu | 2006-12-17 15:25:17 +0000
 Add chanserv akick add and akick list.  Enforcement yet to come.

------------------------------------------------------------------------
r412 | stu | 2006-12-17 15:25:29 +0000 (Sun, 17 Dec 2006) | 3 lines

 r1441@deepfreeze:  stu | 2006-12-17 12:49:12 +0000
 Add akick to the channel schema

------------------------------------------------------------------------
r410 | stu | 2006-12-16 23:36:50 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1182@deepfreeze:  stu | 2006-12-16 23:36:37 +0000
 rework languages somewhat to allow generic services messages.  Sorry, but i had to add a paramter to reply_user() :(

------------------------------------------------------------------------
r409 | stu | 2006-12-16 22:57:34 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1376@helium:  stu | 2006-12-16 22:57:23 +0000
 some unchecked-in changes, couple of new files.

------------------------------------------------------------------------
r408 | stu | 2006-12-16 22:57:31 +0000 (Sat, 16 Dec 2006) | 1 line


------------------------------------------------------------------------
r407 | stu | 2006-12-16 22:57:28 +0000 (Sat, 16 Dec 2006) | 1 line


------------------------------------------------------------------------
r406 | stu | 2006-12-16 22:57:26 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1312@helium:  stu | 2006-11-24 10:09:58 +0000
 Add send_akill callback

------------------------------------------------------------------------
r405 | stu | 2006-12-16 22:14:15 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1175@deepfreeze:  stu | 2006-12-16 22:14:08 +0000
 Use the right lookup functions for clients, and test stuff before you commit it..

------------------------------------------------------------------------
r404 | stu | 2006-12-16 22:00:57 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1173@deepfreeze:  stu | 2006-12-16 22:00:21 +0000
 Don't allow people to ghost nicks that arent actually onlinw..

------------------------------------------------------------------------
r403 | stu | 2006-12-16 21:49:12 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1171@deepfreeze:  stu | 2006-12-16 21:48:32 +0000
 it should now not be possible to ghost yourself by using an alternative case

------------------------------------------------------------------------
r402 | stu | 2006-12-16 19:31:28 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1169@deepfreeze:  stu | 2006-12-16 19:30:48 +0000
 improve info somewhat

------------------------------------------------------------------------
r401 | stu | 2006-12-16 18:12:14 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1167@deepfreeze:  stu | 2006-12-16 18:11:39 +0000
 dont allow forbidden nicks to be registered and lower the timer on nick change

------------------------------------------------------------------------
r400 | stu | 2006-12-16 17:35:23 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1165@deepfreeze:  stu | 2006-12-16 17:34:47 +0000
 rework the nick forbid system somewhat so it doesnt quick suck so much

------------------------------------------------------------------------
r398 | stu | 2006-12-16 14:57:01 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1160@deepfreeze:  stu | 2006-12-16 14:56:03 +0000
 make the help suck a little less when its not complete

------------------------------------------------------------------------
r397 | stu | 2006-12-16 14:56:38 +0000 (Sat, 16 Dec 2006) | 3 lines

 r1159@deepfreeze:  stu | 2006-12-16 12:07:10 +0000
 add some missing chanserv help ad generally tidy it up a bit

------------------------------------------------------------------------
r396 | stu | 2006-12-15 23:52:40 +0000 (Fri, 15 Dec 2006) | 3 lines

 r1157@deepfreeze:  stu | 2006-12-15 23:52:04 +0000
 bring operserv up to scratch with yada

------------------------------------------------------------------------
r395 | stu | 2006-12-15 23:16:52 +0000 (Fri, 15 Dec 2006) | 3 lines

 r1155@deepfreeze:  stu | 2006-12-15 23:16:20 +0000
 Convert chanserv over to yada and tidy things up a little

------------------------------------------------------------------------
r393 | stu | 2006-12-15 16:00:53 +0000 (Fri, 15 Dec 2006) | 3 lines

 r1151@deepfreeze:  stu | 2006-12-15 16:00:19 +0000
 bring the channel stuff in dbm.c over to yada and the new schema.  Alsp update the mysql channel schema

------------------------------------------------------------------------
r392 | stu | 2006-12-15 00:46:54 +0000 (Fri, 15 Dec 2006) | 3 lines

 r398@deepfreeze:  stu | 2006-12-15 00:46:28 +0000
 implement LINK and UNLINK and also allow people to change between linked nicks and get auto identified

------------------------------------------------------------------------
r391 | stu | 2006-12-14 21:16:26 +0000 (Thu, 14 Dec 2006) | 5 lines

 r396@deepfreeze:  stu | 2006-12-14 21:15:55 +0000
 - Port check_list_entry to the new method
 - Fix USERHOSTLEN define to be long enough
 - remove dodgy unneeded query

------------------------------------------------------------------------
r390 | stu | 2006-12-14 19:34:23 +0000 (Thu, 14 Dec 2006) | 3 lines

 r394@deepfreeze:  stu | 2006-12-14 19:33:52 +0000
 Fix mysql schema for nicks and add the new ?B type thingies for yada and other misc fixes

------------------------------------------------------------------------
r380 | stu | 2006-12-14 14:51:54 +0000 (Thu, 14 Dec 2006) | 5 lines

 r394@deepfreeze:  stu | 2006-12-14 14:51:28 +0000
 - m_unreg -> m_notid
 - fix a bug where we tried to do sub commands on un identified people
 - updates get done to account now not nickname

------------------------------------------------------------------------
r379 | stu | 2006-12-14 12:59:33 +0000 (Thu, 14 Dec 2006) | 7 lines

 r392@deepfreeze:  stu | 2006-12-14 12:58:58 +0000
 - Fix salts.
 - Add transactioned delete which deletes account and nickname
 - adjust things which expected odd return values
 - make register use a struct rather than multiple paramters
 - This should iron out most of the nickserv problems from yada conversion

------------------------------------------------------------------------
r378 | stu | 2006-12-14 00:16:40 +0000 (Thu, 14 Dec 2006) | 3 lines

 r388@deepfreeze:  stu | 2006-12-14 00:16:17 +0000
 We're almost done converting to yada now.  Nickserv vaguely works with some issues outstanding, chanserv not done yet, akills not done yet.  dbm.c could use some serious peer review.

------------------------------------------------------------------------
r377 | andy | 2006-12-10 03:37:38 +0000 (Sun, 10 Dec 2006) | 2 lines

Corrected incorrect spelling of "parameters" in two debug messages.

------------------------------------------------------------------------
r376 | stu | 2006-12-05 00:36:31 +0000 (Tue, 05 Dec 2006) | 3 lines

 r385@deepfreeze:  stu | 2006-12-05 00:33:47 +0000
 second checkpoint of yada stuff

------------------------------------------------------------------------
r375 | stu | 2006-12-05 00:36:09 +0000 (Tue, 05 Dec 2006) | 1 line


------------------------------------------------------------------------
r374 | weasel | 2006-12-04 10:41:16 +0000 (Mon, 04 Dec 2006) | 1 line

Also assert query->rc
------------------------------------------------------------------------
r373 | weasel | 2006-12-04 10:37:10 +0000 (Mon, 04 Dec 2006) | 1 line

Split db_query in two: query and exec
------------------------------------------------------------------------
r372 | stu | 2006-12-04 10:07:48 +0000 (Mon, 04 Dec 2006) | 3 lines

 r376@deepfreeze:  stu | 2006-12-04 10:07:29 +0000
 Checkpoint work on yada support

------------------------------------------------------------------------
r371 | weasel | 2006-12-03 22:14:03 +0000 (Sun, 03 Dec 2006) | 1 line

channel flags
------------------------------------------------------------------------
r370 | weasel | 2006-12-03 21:39:28 +0000 (Sun, 03 Dec 2006) | 1 line

an akill setter references account now
------------------------------------------------------------------------
r369 | weasel | 2006-12-03 21:36:08 +0000 (Sun, 03 Dec 2006) | 1 line

Commit nickserv-pgsql.sql
------------------------------------------------------------------------
r368 | weasel | 2006-12-03 15:07:08 +0000 (Sun, 03 Dec 2006) | 1 line

"default NULL" is redundant
------------------------------------------------------------------------
r367 | stu | 2006-12-03 15:05:45 +0000 (Sun, 03 Dec 2006) | 3 lines

 r372@deepfreeze:  stu | 2006-12-03 15:05:38 +0000
 Not everything has to be NOT NULL

------------------------------------------------------------------------
r366 | stu | 2006-12-03 14:59:06 +0000 (Sun, 03 Dec 2006) | 3 lines

 r370@deepfreeze:  stu | 2006-12-03 14:58:51 +0000
 Update the schema for nickname because apparently im on crack(it has been known)

------------------------------------------------------------------------
r365 | andy | 2006-11-29 09:34:02 +0000 (Wed, 29 Nov 2006) | 2 lines

"extensible"

------------------------------------------------------------------------
r364 | andy | 2006-11-29 09:20:12 +0000 (Wed, 29 Nov 2006) | 2 lines

Comment beautification. No changes to the object code.

------------------------------------------------------------------------
r363 | many | 2006-11-26 22:54:37 +0000 (Sun, 26 Nov 2006) | 2 lines

exit prematurely in CS:m_info() if the channel does not exist

------------------------------------------------------------------------
r362 | many | 2006-11-26 22:27:22 +0000 (Sun, 26 Nov 2006) | 2 lines

make it compileable again

------------------------------------------------------------------------
r361 | many | 2006-11-26 20:38:17 +0000 (Sun, 26 Nov 2006) | 2 lines

CS chan access changes

------------------------------------------------------------------------
r360 | many | 2006-11-23 21:31:36 +0000 (Thu, 23 Nov 2006) | 2 lines

cryo, comment please...

------------------------------------------------------------------------
r359 | many | 2006-11-23 21:19:02 +0000 (Thu, 23 Nov 2006) | 2 lines

dont use malloc() directly.  badmc.

------------------------------------------------------------------------
r358 | many | 2006-11-23 21:18:21 +0000 (Thu, 23 Nov 2006) | 2 lines

fix operserv mysql

------------------------------------------------------------------------
r357 | many | 2006-11-23 21:13:35 +0000 (Thu, 23 Nov 2006) | 2 lines

add sql schemas for channel access lists

------------------------------------------------------------------------
r356 | many | 2006-11-23 21:03:41 +0000 (Thu, 23 Nov 2006) | 2 lines

add CS ACCESS ADD and CS ACCESS DEL, no schema yet, revamp necessary

------------------------------------------------------------------------
r355 | stu | 2006-11-21 14:59:38 +0000 (Tue, 21 Nov 2006) | 3 lines

 r1258@helium:  stu | 2006-11-21 14:59:35 +0000
 Add db_add_akill and db_find_akill and fix the check_access_list function

------------------------------------------------------------------------
r354 | stu | 2006-11-21 10:16:18 +0000 (Tue, 21 Nov 2006) | 3 lines

 r1256@helium:  stu | 2006-11-21 10:16:12 +0000
 bad services.  you dont care about validating chanops

------------------------------------------------------------------------
r353 | stu | 2006-11-21 10:03:22 +0000 (Tue, 21 Nov 2006) | 3 lines

 r1254@helium:  stu | 2006-11-21 10:03:19 +0000
 put db_get_nickname_from_id back before mc notices its gone.

------------------------------------------------------------------------
r352 | stu | 2006-11-21 09:55:59 +0000 (Tue, 21 Nov 2006) | 3 lines

 r1252@helium:  stu | 2006-11-21 09:55:56 +0000
 Commited the new generic list code and fixed a bug in reply_user when you specified no langid

------------------------------------------------------------------------
r351 | stu | 2006-11-20 21:23:02 +0000 (Mon, 20 Nov 2006) | 3 lines

 r1250@helium:  stu | 2006-11-20 21:23:01 +0000
 it's always a good idea to test things before you commit them

------------------------------------------------------------------------
r350 | stu | 2006-11-20 21:17:47 +0000 (Mon, 20 Nov 2006) | 7 lines

 r1248@helium:  stu | 2006-11-20 21:17:41 +0000
 - Bit of a rejig of dbm.c.  Things of note: db_set_[string|number] combined
   from the channel/nick versions
 - Add akill table schema for pgsql and a blank one for mysql(needs writing)
 - Other beginnings of akill stuff id written before i decided how much dbm.c
   sucked

------------------------------------------------------------------------
r349 | stu | 2006-11-20 09:27:48 +0000 (Mon, 20 Nov 2006) | 3 lines

 r1246@helium:  stu | 2006-11-20 09:27:46 +0000
 Fix it properly this time

------------------------------------------------------------------------
r348 | stu | 2006-11-20 09:26:19 +0000 (Mon, 20 Nov 2006) | 3 lines

 r1244@helium:  stu | 2006-11-20 09:26:17 +0000
 Fix memory leak tj introduced with his memory leak fixes

------------------------------------------------------------------------
r347 | stu | 2006-11-20 09:20:50 +0000 (Mon, 20 Nov 2006) | 3 lines

 r1242@helium:  stu | 2006-11-20 09:20:44 +0000
 bad return value

------------------------------------------------------------------------
r346 | stu | 2006-11-20 09:19:47 +0000 (Mon, 20 Nov 2006) | 3 lines

 r1237@helium:  stu | 2006-11-20 09:19:44 +0000
 slightly fix reply_user to deal with a bug mc's dodgy 'send nothing' exposed.

------------------------------------------------------------------------
r345 | tjfontaine | 2006-11-19 23:48:37 +0000 (Sun, 19 Nov 2006) | 2 lines

dbi_result_free some results in a few extra places, touch up [un]linking to be fewer queries

------------------------------------------------------------------------
r344 | tjfontaine | 2006-11-19 23:15:32 +0000 (Sun, 19 Nov 2006) | 2 lines

revamp the list_del_index to be 1 query and as a result not leak

------------------------------------------------------------------------
r343 | stu | 2006-11-19 23:11:35 +0000 (Sun, 19 Nov 2006) | 3 lines

 r1235@helium:  stu | 2006-11-19 23:11:27 +0000
 some more reply_user fixes (the last commit had the start of akill stuff in btw)

------------------------------------------------------------------------
r342 | stu | 2006-11-19 23:02:27 +0000 (Sun, 19 Nov 2006) | 3 lines

 r1233@helium:  stu | 2006-11-19 23:02:23 +0000
 reply_user change fix

------------------------------------------------------------------------
r341 | stu | 2006-11-19 16:34:08 +0000 (Sun, 19 Nov 2006) | 3 lines

 r1231@helium:  stu | 2006-11-19 16:34:05 +0000
 Fix various things which check passwords were wrong

------------------------------------------------------------------------
r340 | stu | 2006-11-19 16:25:34 +0000 (Sun, 19 Nov 2006) | 3 lines

 r1229@helium:  stu | 2006-11-19 16:25:28 +0000
 Completely rework reply_user, _L is now not needed, you pass the language id to reply_user.  This means reply_user cannot accept formatted strings, the format must be done in the language file.

------------------------------------------------------------------------
r339 | stu | 2006-11-18 20:31:28 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1227@helium:  stu | 2006-11-18 20:31:25 +0000
 Take out GLOBAL, I'm probably not going to do it in operserv.

------------------------------------------------------------------------
r338 | stu | 2006-11-18 19:49:28 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1224@helium:  stu | 2006-11-18 19:49:12 +0000
 Add handlers to the sub messages too

------------------------------------------------------------------------
r337 | stu | 2006-11-18 19:49:24 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1221@helium:  stu | 2006-11-18 17:53:59 +0000
 Add m_noaccess and disable non oper/admin access to operserv commands.

------------------------------------------------------------------------
r336 | many | 2006-11-18 18:28:52 +0000 (Sat, 18 Nov 2006) | 2 lines

some more ilog()

------------------------------------------------------------------------
r335 | tjfontaine | 2006-11-18 17:48:33 +0000 (Sat, 18 Nov 2006) | 3 lines

modify db_find_nick to use only one query to resolve nickname links sql++
some ruby stuff that is of no consequence

------------------------------------------------------------------------
r334 | stu | 2006-11-18 13:59:53 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1217@helium:  stu | 2006-11-18 13:59:50 +0000
 add ACCESS del

------------------------------------------------------------------------
r333 | stu | 2006-11-18 11:06:54 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1215@helium:  stu | 2006-11-18 11:06:51 +0000
 Forgetting to free nicks is becomming a rather nasty habbit

------------------------------------------------------------------------
r332 | stu | 2006-11-18 11:04:53 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1213@helium:  stu | 2006-11-18 11:04:49 +0000
 Add ADMIN ADD to operserv.  Holy shit ADMIN LIST is inefficient..

------------------------------------------------------------------------
r331 | stu | 2006-11-18 10:15:36 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1210@helium:  stu | 2006-11-18 10:15:26 +0000
 Fix core in quit callback

------------------------------------------------------------------------
r330 | stu | 2006-11-18 10:15:29 +0000 (Sat, 18 Nov 2006) | 1 line


------------------------------------------------------------------------
r329 | tjfontaine | 2006-11-18 03:19:00 +0000 (Sat, 18 Nov 2006) | 2 lines

death to new lines in logging, it annoys me :)

------------------------------------------------------------------------
r328 | stu | 2006-11-18 01:27:01 +0000 (Sat, 18 Nov 2006) | 3 lines

 r1204@helium:  stu | 2006-11-18 01:26:49 +0000
 Add operserv ADMIN list.

------------------------------------------------------------------------
r327 | tjfontaine | 2006-11-18 01:11:15 +0000 (Sat, 18 Nov 2006) | 2 lines

refactors lots add logging

------------------------------------------------------------------------
r326 | stu | 2006-11-17 21:15:25 +0000 (Fri, 17 Nov 2006) | 3 lines

 r1202@helium:  stu | 2006-11-17 21:15:20 +0000
 Add BMASK

------------------------------------------------------------------------
r325 | stu | 2006-11-17 20:19:49 +0000 (Fri, 17 Nov 2006) | 3 lines

 r1200@helium:  stu | 2006-11-17 20:19:46 +0000
 add TMODE and make channel_mode.c a little less whiney(services sucks, it must accept anything thats thrown at it, its not meant to be smart)

------------------------------------------------------------------------
r324 | stu | 2006-11-16 21:19:58 +0000 (Thu, 16 Nov 2006) | 3 lines

 r1197@helium:  stu | 2006-11-16 21:19:55 +0000
 add proper operserv framework and add the mod reload command

------------------------------------------------------------------------
r323 | many | 2006-11-16 10:27:17 +0000 (Thu, 16 Nov 2006) | 2 lines

add _some_ logging

------------------------------------------------------------------------
r322 | stu | 2006-11-16 10:07:33 +0000 (Thu, 16 Nov 2006) | 3 lines

 r1195@helium:  stu | 2006-11-16 10:07:27 +0000
 s/printf/ilog(DEBUG,/g

------------------------------------------------------------------------
r321 | stu | 2006-11-16 00:11:06 +0000 (Thu, 16 Nov 2006) | 3 lines

 r1193@helium:  stu | 2006-11-16 00:10:55 +0000
 The beginnings of logging.  It aint quite pretty yet, but it will be

------------------------------------------------------------------------
r320 | many | 2006-11-15 23:07:03 +0000 (Wed, 15 Nov 2006) | 2 lines

cleaning up, fixing typos, adding sucky CS INFO, some more.

------------------------------------------------------------------------
r319 | many | 2006-11-15 22:25:57 +0000 (Wed, 15 Nov 2006) | 2 lines

freudian + uninstallfoo

------------------------------------------------------------------------
r318 | many | 2006-11-15 22:02:43 +0000 (Wed, 15 Nov 2006) | 2 lines

automatically success a channel when the foundernick gets dropped

------------------------------------------------------------------------
r317 | stu | 2006-11-15 21:43:23 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1184@helium:  stu | 2006-11-15 21:43:20 +0000
 Use lots of lower() to make queries not sensitive to case.  This of course will break with {[]}, but see this? This is a true face of caring

------------------------------------------------------------------------
r316 | many | 2006-11-15 21:14:38 +0000 (Wed, 15 Nov 2006) | 2 lines

this should fix a tiny autogen/configure booya

------------------------------------------------------------------------
r315 | stu | 2006-11-15 18:59:33 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1182@helium:  stu | 2006-11-15 18:59:31 +0000
 allow people to identify as many times as they like

------------------------------------------------------------------------
r314 | stu | 2006-11-15 16:25:12 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1180@helium:  stu | 2006-11-15 16:25:09 +0000
 send the cloak back on set rather than the email(oops) and also make reloading nickserv work again by unregistering our callbacks on unload

------------------------------------------------------------------------
r313 | stu | 2006-11-15 16:17:48 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1177@helium:  stu | 2006-11-15 16:17:43 +0000
 add m_notadmin and make cloakstrign admin only since our testers like to play with it. :)

------------------------------------------------------------------------
r312 | stu | 2006-11-15 16:17:46 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1176@helium:  stu | 2006-11-15 16:11:51 +0000
 the more specific help text was kinda wrong

------------------------------------------------------------------------
r311 | stu | 2006-11-15 12:18:50 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1174@helium:  stu | 2006-11-15 12:18:46 +0000
 Add ID -> IDENTIFY alias

------------------------------------------------------------------------
r310 | stu | 2006-11-15 10:56:38 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1172@helium:  stu | 2006-11-15 10:56:35 +0000
 Add JOIN for TS6 joins

------------------------------------------------------------------------
r309 | stu | 2006-11-15 09:58:02 +0000 (Wed, 15 Nov 2006) | 3 lines

 r1170@helium:  stu | 2006-11-15 09:57:44 +0000
 Make the help message a bit more informational, and make sure we pass the right arg count to channel queries

------------------------------------------------------------------------
r308 | many | 2006-11-15 08:47:43 +0000 (Wed, 15 Nov 2006) | 4 lines

another complete revamp to reflect the wish to change channelparameters
even if _noone_ is in that channel right now.
these occasions will be rare, though.

------------------------------------------------------------------------
r307 | stu | 2006-11-14 23:18:33 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1166@helium:  stu | 2006-11-14 23:18:28 +0000
 Don't allow guest nicks to be registered.

------------------------------------------------------------------------
r306 | many | 2006-11-14 23:17:06 +0000 (Tue, 14 Nov 2006) | 2 lines

lets see what tj has to moan

------------------------------------------------------------------------
r305 | stu | 2006-11-14 23:06:15 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1162@helium:  stu | 2006-11-14 23:05:55 +0000
 Add collision detection for guest nicknames

------------------------------------------------------------------------
r304 | stu | 2006-11-14 22:56:33 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1160@helium:  stu | 2006-11-14 22:56:29 +0000
 Add FORBID to nickserv.  It's considerably better than oldservices' version.  Hmm, is nickserv done now?

------------------------------------------------------------------------
r303 | stu | 2006-11-14 20:29:45 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1158@helium:  stu | 2006-11-14 20:29:37 +0000
 Make admins able to set and view stuff on other nicks as if it were your own.  Maybe a bit hackish.. some might call it genious.  Either way one day we'll look at it again.

------------------------------------------------------------------------
r302 | stu | 2006-11-14 18:25:58 +0000 (Tue, 14 Nov 2006) | 4 lines

 r1153@helium:  stu | 2006-11-14 18:25:43 +0000
 Services subcommand help.  This was a lot easier than i thought it would be. All the subcommand help needs to be added.
 

------------------------------------------------------------------------
r301 | many | 2006-11-14 18:05:11 +0000 (Tue, 14 Nov 2006) | 2 lines

oops. we shouldnt free nonregistered chan->regchan

------------------------------------------------------------------------
r300 | tjfontaine | 2006-11-14 17:40:00 +0000 (Tue, 14 Nov 2006) | 4 lines

pgsql-oldservices.sql is the schema that allows oldservices tables to be imported without issue into the namespace oldservices.
pgsql-migrate-services.sql is a sql script to run after successfully importing oldservices to migrate them to new services.
the migration is mostly complete, and will be better when pgsql schema is in sync with mysql.

------------------------------------------------------------------------
r299 | stu | 2006-11-14 16:11:59 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1151@helium:  stu | 2006-11-14 16:11:55 +0000
 memory leaks are bad, mmkay?

------------------------------------------------------------------------
r298 | stu | 2006-11-14 14:05:39 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1149@helium:  stu | 2006-11-14 14:05:32 +0000
 couple of minor ts6 fixes

------------------------------------------------------------------------
r297 | many | 2006-11-14 13:50:19 +0000 (Tue, 14 Nov 2006) | 2 lines

commit the rest of changes needed from yesterday

------------------------------------------------------------------------
r296 | stu | 2006-11-14 13:01:32 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1145@helium:  stu | 2006-11-14 13:01:29 +0000
 Dont send nick change event if the client isnt actually changing nick

------------------------------------------------------------------------
r295 | stu | 2006-11-14 12:00:58 +0000 (Tue, 14 Nov 2006) | 3 lines

 r1143@helium:  stu | 2006-11-14 12:00:50 +0000
 Add db_get_nickname_from_id which should help with various chanserv functions

------------------------------------------------------------------------
r294 | many | 2006-11-13 23:24:26 +0000 (Mon, 13 Nov 2006) | 2 lines

major revamp

------------------------------------------------------------------------
r293 | stu | 2006-11-13 23:17:49 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1139@helium:  stu | 2006-11-13 23:17:47 +0000
 baa?

------------------------------------------------------------------------
r292 | stu | 2006-11-13 23:16:45 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1137@helium:  stu | 2006-11-13 23:16:41 +0000
 Start TS6ifying oftc.c

------------------------------------------------------------------------
r291 | stu | 2006-11-13 21:17:53 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1135@helium:  stu | 2006-11-13 21:17:50 +0000
 revert last commit.  bad valgrind.  wrong. wrong.

------------------------------------------------------------------------
r290 | stu | 2006-11-13 20:57:31 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1133@helium:  stu | 2006-11-13 20:57:29 +0000
 Fix the one memory leak we can actually do something about

------------------------------------------------------------------------
r289 | stu | 2006-11-13 20:16:24 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1131@helium:  stu | 2006-11-13 20:16:20 +0000
 Add quit handler for nicks,update nick table and free the nickname

------------------------------------------------------------------------
r288 | stu | 2006-11-13 19:27:52 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1129@helium:  stu | 2006-11-13 19:27:47 +0000
 Add on_nick_drop_cb for mc, a single paramter is assed: the char * of the nick

------------------------------------------------------------------------
r287 | stu | 2006-11-13 18:25:13 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1127@helium:  stu | 2006-11-13 18:24:55 +0000
 fix the nickserv language file and support services@services.oftc.net messages so /quote nickserv etc works.

------------------------------------------------------------------------
r286 | stu | 2006-11-13 12:58:06 +0000 (Mon, 13 Nov 2006) | 3 lines

 r1125@helium:  stu | 2006-11-13 12:58:03 +0000
 Some more detailed nickserv help, and copied it accross to the language-11-alike since its horribly outdated

------------------------------------------------------------------------
r285 | stu | 2006-11-12 23:14:32 +0000 (Sun, 12 Nov 2006) | 3 lines

 r1123@helium:  stu | 2006-11-12 23:14:30 +0000
 so, um, yeah.  No comment. oops.  Sorry ganneff but im not owning up to this one.

------------------------------------------------------------------------
r284 | stu | 2006-11-12 23:06:47 +0000 (Sun, 12 Nov 2006) | 3 lines

 r1121@helium:  stu | 2006-11-12 23:06:43 +0000
 Add auto identify. LOOK MA, ITS NON NOISY, NOT LIKE OLD SERVICES

------------------------------------------------------------------------
r283 | many | 2006-11-12 23:03:10 +0000 (Sun, 12 Nov 2006) | 2 lines

this struct member deserved a better name......

------------------------------------------------------------------------
r282 | many | 2006-11-12 23:00:58 +0000 (Sun, 12 Nov 2006) | 2 lines

fix callback in oftc.c and chanserv.c

------------------------------------------------------------------------
r281 | many | 2006-11-12 22:55:31 +0000 (Sun, 12 Nov 2006) | 4 lines

clean up regchan when channel is destroey
added channel_destroy_cb
fixed some logic in cs:on_client_join()

------------------------------------------------------------------------
r280 | many | 2006-11-12 22:17:43 +0000 (Sun, 12 Nov 2006) | 2 lines

darn spacing in chanserv/EN lang broke my neck once again

------------------------------------------------------------------------
r279 | many | 2006-11-12 22:00:37 +0000 (Sun, 12 Nov 2006) | 2 lines

added some more descriptions to chanserv/EN language

------------------------------------------------------------------------
r278 | stu | 2006-11-12 21:44:07 +0000 (Sun, 12 Nov 2006) | 3 lines

 r1112@helium:  stu | 2006-11-12 21:44:02 +0000
 Add SET cloak and SET cloakstring, and also renumber the CS defines to match oldservices

------------------------------------------------------------------------
r277 | many | 2006-11-12 21:16:06 +0000 (Sun, 12 Nov 2006) | 2 lines

fix some up in CS SET flags

------------------------------------------------------------------------
r276 | stu | 2006-11-12 20:58:10 +0000 (Sun, 12 Nov 2006) | 3 lines

 r1105@helium:  stu | 2006-11-12 20:56:13 +0000
 The rest of nickname enforcrment

------------------------------------------------------------------------
r275 | many | 2006-11-12 20:33:15 +0000 (Sun, 12 Nov 2006) | 9 lines

add CS commands:
set topiclock
set private
set restricted
set secure
set secureops
set leaveops
set verbose

------------------------------------------------------------------------
r274 | many | 2006-11-12 19:02:45 +0000 (Sun, 12 Nov 2006) | 2 lines

add abstraction

------------------------------------------------------------------------
r273 | stu | 2006-11-12 18:25:13 +0000 (Sun, 12 Nov 2006) | 5 lines

 r1101@helium:  stu | 2006-11-12 18:24:57 +0000
 - Change nick macros
 - add enforce - it doesnt actually enforce yet.
 - Fix access list del bug

------------------------------------------------------------------------
r272 | many | 2006-11-12 18:20:12 +0000 (Sun, 12 Nov 2006) | 4 lines

- fix segv in dbm.c
- rename regchan->flags Macros
- add CS SET KEEPTOPIC

------------------------------------------------------------------------
r271 | many | 2006-11-12 17:01:09 +0000 (Sun, 12 Nov 2006) | 2 lines

fix typo

------------------------------------------------------------------------
r270 | many | 2006-11-12 16:55:35 +0000 (Sun, 12 Nov 2006) | 3 lines

- add regchptr->flags
- make stu happy (not hithithit the db on client join)

------------------------------------------------------------------------
r269 | stu | 2006-11-12 16:16:23 +0000 (Sun, 12 Nov 2006) | 3 lines

 r1095@helium:  stu | 2006-11-12 16:16:15 +0000
 make secure work

------------------------------------------------------------------------
r268 | stu | 2006-11-12 13:42:49 +0000 (Sun, 12 Nov 2006) | 3 lines

 r1089@helium:  stu | 2006-11-12 13:42:31 +0000
 Add SET SECURE and SET ENFORCE.  They dont do anything yet.

------------------------------------------------------------------------
r267 | many | 2006-11-12 13:35:29 +0000 (Sun, 12 Nov 2006) | 2 lines

add some more memory management fixes

------------------------------------------------------------------------
r266 | many | 2006-11-12 13:27:32 +0000 (Sun, 12 Nov 2006) | 2 lines

we dont need char [512], char * make us happy

------------------------------------------------------------------------
r265 | many | 2006-11-12 13:20:59 +0000 (Sun, 12 Nov 2006) | 2 lines

autogreeting!

------------------------------------------------------------------------
r264 | many | 2006-11-12 12:52:56 +0000 (Sun, 12 Nov 2006) | 2 lines

add the missing language stuff

------------------------------------------------------------------------
r263 | many | 2006-11-12 12:49:42 +0000 (Sun, 12 Nov 2006) | 2 lines

add help defines (missing lang files)

------------------------------------------------------------------------
r262 | many | 2006-11-12 12:26:29 +0000 (Sun, 12 Nov 2006) | 2 lines

add CS SET EMAIL and CS SET ENTRYMSG

------------------------------------------------------------------------
r261 | many | 2006-11-12 12:16:15 +0000 (Sun, 12 Nov 2006) | 2 lines

sync nickserv.DE

------------------------------------------------------------------------
r260 | many | 2006-11-12 10:49:49 +0000 (Sun, 12 Nov 2006) | 2 lines

this oneline hack sucks, but does for now

------------------------------------------------------------------------
r259 | many | 2006-11-12 10:46:43 +0000 (Sun, 12 Nov 2006) | 2 lines

wrong expandtab in chanserv.en.lang

------------------------------------------------------------------------
r258 | many | 2006-11-12 10:35:37 +0000 (Sun, 12 Nov 2006) | 2 lines

sync postgres/chanserv schema

------------------------------------------------------------------------
r257 | many | 2006-11-12 10:32:05 +0000 (Sun, 12 Nov 2006) | 2 lines

... and the mysql schema to the previous commit

------------------------------------------------------------------------
r256 | many | 2006-11-12 10:31:11 +0000 (Sun, 12 Nov 2006) | 2 lines

add CS SET DESC and CS SET URL

------------------------------------------------------------------------
r255 | many | 2006-11-12 09:07:18 +0000 (Sun, 12 Nov 2006) | 2 lines

add CS SET SUCCESSOR

------------------------------------------------------------------------
r254 | many | 2006-11-11 22:54:37 +0000 (Sat, 11 Nov 2006) | 3 lines

- add CS SET FOUNDER
- fix some more mysqlish

------------------------------------------------------------------------
r253 | stu | 2006-11-11 21:34:47 +0000 (Sat, 11 Nov 2006) | 3 lines

 r1069@helium:  stu | 2006-11-11 21:34:44 +0000
 Fix password auth

------------------------------------------------------------------------
r252 | stu | 2006-11-11 20:35:00 +0000 (Sat, 11 Nov 2006) | 3 lines

 r1067@helium:  stu | 2006-11-11 20:34:57 +0000
 Add some more detailed help.. all I can be bothered with at the moment.. #-staff, time to volunteer..

------------------------------------------------------------------------
r251 | many | 2006-11-11 20:20:27 +0000 (Sat, 11 Nov 2006) | 5 lines

- fix mysql schema;
- add join_cb;
- add db_delete_chan() [dbm.c];
- add m_drop() [chanserv.c]

------------------------------------------------------------------------
r250 | stu | 2006-11-11 20:15:40 +0000 (Sat, 11 Nov 2006) | 3 lines

 r1063@helium:  stu | 2006-11-11 20:15:32 +0000
 bad stu.  Left some stuff in here that shouldnt be here

------------------------------------------------------------------------
r249 | tjfontaine | 2006-11-11 17:19:51 +0000 (Sat, 11 Nov 2006) | 3 lines

little ruby script that will generate #define's based on a language file
usage: ./genlang.rb languages/nickserv.en.lang >> include/nickserv.h

------------------------------------------------------------------------
r248 | stu | 2006-11-11 16:53:21 +0000 (Sat, 11 Nov 2006) | 3 lines

 r1059@helium:  stu | 2006-11-11 16:53:14 +0000
 Add NickServ INFO command

------------------------------------------------------------------------
r247 | stu | 2006-11-11 15:51:11 +0000 (Sat, 11 Nov 2006) | 3 lines

 r1056@helium:  stu | 2006-11-11 15:51:00 +0000
 add support for multi-line messages in reply_user

------------------------------------------------------------------------
r246 | stu | 2006-11-11 15:40:12 +0000 (Sat, 11 Nov 2006) | 3 lines

 r1054@helium:  stu | 2006-11-11 15:40:08 +0000
 redo the language file parser so it supports multi line texts.  Have only converted the english nickserv help so far.  Others will need to be done.  Format is THE_DEFINE_THAT_WILL_APEAR_IN_C\n\tText\n\tTextline2.  Multi line texts will currently not send correctly.

------------------------------------------------------------------------
r245 | stu | 2006-11-10 23:34:02 +0000 (Fri, 10 Nov 2006) | 3 lines

 r1052@helium:  stu | 2006-11-10 23:33:56 +0000
 Dunno what i was thinking, but that certainly *is* possible.

------------------------------------------------------------------------
r244 | stu | 2006-11-10 20:14:28 +0000 (Fri, 10 Nov 2006) | 3 lines

 r1050@helium:  stu | 2006-11-10 20:14:25 +0000
 add password salts

------------------------------------------------------------------------
r243 | stu | 2006-11-10 19:48:39 +0000 (Fri, 10 Nov 2006) | 3 lines

 r1048@helium:  stu | 2006-11-10 19:48:37 +0000
 add salt field

------------------------------------------------------------------------
r242 | stu | 2006-11-10 19:46:12 +0000 (Fri, 10 Nov 2006) | 3 lines

 r1046@helium:  stu | 2006-11-10 19:46:03 +0000
 make last_quit a bit bigger

------------------------------------------------------------------------
r241 | stu | 2006-11-10 17:25:04 +0000 (Fri, 10 Nov 2006) | 3 lines

 r1044@helium:  stu | 2006-11-10 17:24:59 +0000
 passwords use sha1 instead of md5

------------------------------------------------------------------------
r240 | stu | 2006-11-09 22:10:44 +0000 (Thu, 09 Nov 2006) | 3 lines

 r1042@helium:  stu | 2006-11-09 22:10:41 +0000
 tidy up dbm.c some more

------------------------------------------------------------------------
r239 | stu | 2006-11-09 21:56:11 +0000 (Thu, 09 Nov 2006) | 3 lines

 r1039@helium:  stu | 2006-11-09 21:56:06 +0000
 completely redo the language file for english, and add UNLINK command

------------------------------------------------------------------------
r238 | many | 2006-11-09 19:29:06 +0000 (Thu, 09 Nov 2006) | 2 lines

Make these more meaningful (are they needed anyway?)

------------------------------------------------------------------------
r237 | stu | 2006-11-09 16:40:34 +0000 (Thu, 09 Nov 2006) | 3 lines

 r1037@helium:  stu | 2006-11-09 16:40:28 +0000
 apparently someone implemented linked nicks.  Got rid of some memory leaks while they were there.

------------------------------------------------------------------------
r236 | stu | 2006-11-09 15:04:02 +0000 (Thu, 09 Nov 2006) | 3 lines

 r1035@helium:  stu | 2006-11-09 15:04:00 +0000
 new database tables for nick links

------------------------------------------------------------------------
r235 | stu | 2006-11-09 12:24:47 +0000 (Thu, 09 Nov 2006) | 3 lines

 r1033@helium:  stu | 2006-11-09 12:24:45 +0000
 add db_query function to make dbm look a bit nicer and get rid of the static querybuffer.  querie lengths are now virtually unlimited

------------------------------------------------------------------------
r234 | stu | 2006-11-09 11:42:46 +0000 (Thu, 09 Nov 2006) | 6 lines

 r1031@helium:  stu | 2006-11-09 11:42:41 +0000
 - Add the ability to delete access list entries
 - Add a check to see if the access list entry is a valid userhost
 - Fix a bug in last nights parser checks which broke "normal" commands(yay for
   sleep)

------------------------------------------------------------------------
r233 | stu | 2006-11-08 23:55:56 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1029@helium:  stu | 2006-11-08 23:55:50 +0000
 add support for admins to set options on other  nicks.  Drycoded, but its me, so it'll work..

------------------------------------------------------------------------
r232 | stu | 2006-11-08 23:33:35 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1027@helium:  stu | 2006-11-08 23:33:27 +0000
 if the 'command' is actually a channel, check if the command comes after

------------------------------------------------------------------------
r231 | stu | 2006-11-08 22:45:54 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1025@helium:  stu | 2006-11-08 22:45:41 +0000
 meh. :p

------------------------------------------------------------------------
r230 | many | 2006-11-08 21:51:39 +0000 (Wed, 08 Nov 2006) | 2 lines

simplify the code a bit

------------------------------------------------------------------------
r229 | stu | 2006-11-08 21:48:07 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1018@helium:  stu | 2006-11-08 21:45:48 +0000
 mmm, cake. (set +R and retain oldnick passing).

------------------------------------------------------------------------
r228 | stu | 2006-11-08 21:48:06 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1017@helium:  stu | 2006-11-08 21:24:30 +0000
 change exactly where we send the nick change message

------------------------------------------------------------------------
r227 | many | 2006-11-08 21:37:30 +0000 (Wed, 08 Nov 2006) | 8 lines

- fix typo;
- kick mysql (no constraints right now);
- add IsChanop Macro;
- add some CS language;
- fix some germanisms in NS;
- add more basic CS stuff;
- more checks on CS_register()

------------------------------------------------------------------------
r226 | stu | 2006-11-08 21:20:40 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1015@helium:  stu | 2006-11-08 21:20:31 +0000
 remove unused function

------------------------------------------------------------------------
r225 | stu | 2006-11-08 21:03:17 +0000 (Wed, 08 Nov 2006) | 3 lines

 r1013@helium:  stu | 2006-11-08 21:03:13 +0000
 NickAccess -> AccessEntry and implement access lists, while rewriting the nick change event sliightly and adding a new user event

------------------------------------------------------------------------
r224 | stu | 2006-11-07 20:44:41 +0000 (Tue, 07 Nov 2006) | 3 lines

 r1011@helium:  stu | 2006-11-07 20:44:36 +0000
 make set language actually change the langiage

------------------------------------------------------------------------
r223 | many | 2006-11-07 19:53:44 +0000 (Tue, 07 Nov 2006) | 2 lines

bring nickserv.de up2date.

------------------------------------------------------------------------
r222 | stu | 2006-11-07 19:35:32 +0000 (Tue, 07 Nov 2006) | 3 lines

 r1007@helium:  stu | 2006-11-07 19:35:28 +0000
 Don't allow people to ghost themselves.. something about temporal vortex chaos theory?

------------------------------------------------------------------------
r221 | stu | 2006-11-06 23:46:24 +0000 (Mon, 06 Nov 2006) | 3 lines

 r1005@helium:  stu | 2006-11-06 23:46:12 +0000
 Add NickServ ghost command

------------------------------------------------------------------------
r220 | stu | 2006-11-06 22:47:11 +0000 (Mon, 06 Nov 2006) | 3 lines

 r1003@helium:  stu | 2006-11-06 22:47:09 +0000
 add language stuff for ACCESS

------------------------------------------------------------------------
r219 | stu | 2006-11-06 22:00:19 +0000 (Mon, 06 Nov 2006) | 3 lines

 r1001@helium:  stu | 2006-11-06 22:00:13 +0000
 dont use brackets on select fields

------------------------------------------------------------------------
r218 | stu | 2006-11-06 21:47:40 +0000 (Mon, 06 Nov 2006) | 3 lines

 r999@helium:  stu | 2006-11-06 21:47:32 +0000
 Add nickserv ACCESS command with the db support to go with it.  It doesn't work yet.. but it should.

------------------------------------------------------------------------
r217 | many | 2006-11-06 21:35:38 +0000 (Mon, 06 Nov 2006) | 2 lines

pass_callback(self) should return itself

------------------------------------------------------------------------
r216 | stu | 2006-11-06 18:43:46 +0000 (Mon, 06 Nov 2006) | 3 lines

 r995@helium:  stu | 2006-11-06 18:43:42 +0000
 pgsql doesnt like if exists

------------------------------------------------------------------------
r215 | stu | 2006-11-05 23:30:29 +0000 (Sun, 05 Nov 2006) | 3 lines

 r993@helium:  stu | 2006-11-05 23:30:24 +0000
 Add schema for nick access table.  SQL Nazis have a look and pick holes in it.

------------------------------------------------------------------------
r214 | stu | 2006-11-05 18:36:37 +0000 (Sun, 05 Nov 2006) | 5 lines

 r989@helium:  stu | 2006-11-05 18:36:33 +0000
 - set email, password, language, url all now working
 - add replace_string functions, which serves to set new values
 - tidy up some more

------------------------------------------------------------------------
r213 | stu | 2006-11-05 15:52:06 +0000 (Sun, 05 Nov 2006) | 3 lines

 r987@helium:  stu | 2006-11-05 15:51:57 +0000
 Put limits in services, not the database

------------------------------------------------------------------------
r212 | stu | 2006-11-05 13:49:50 +0000 (Sun, 05 Nov 2006) | 6 lines

 r983@helium:  stu | 2006-11-05 13:49:23 +0000
 - Rework the identify_user generalistion
 - Add cloak to the nick struct
 - Let set email return the current email
 - Fix a core when trying to unload a module twice

------------------------------------------------------------------------
r211 | stu | 2006-11-05 13:49:42 +0000 (Sun, 05 Nov 2006) | 3 lines

 r982@helium:  stu | 2006-11-04 21:34:19 +0000
 couple of db corrections

------------------------------------------------------------------------
r210 | stu | 2006-11-05 13:49:37 +0000 (Sun, 05 Nov 2006) | 3 lines

 r981@helium:  stu | 2006-11-04 21:06:11 +0000
 rename nickserv.lua's service name to nickservlua

------------------------------------------------------------------------
r209 | stu | 2006-11-04 20:29:13 +0000 (Sat, 04 Nov 2006) | 4 lines

 r979@helium:  stu | 2006-11-04 20:29:10 +0000
 - Add set language for nickserv.lua
 - Move db_set_language to a more generic number function

------------------------------------------------------------------------
r208 | stu | 2006-11-04 16:55:14 +0000 (Sat, 04 Nov 2006) | 3 lines

 r977@helium:  stu | 2006-11-04 16:55:11 +0000
 add set email to nickserv.lua

------------------------------------------------------------------------
r207 | stu | 2006-11-04 16:22:26 +0000 (Sat, 04 Nov 2006) | 6 lines

 r975@helium:  stu | 2006-11-04 16:22:13 +0000
 - Fix the LUA interface to enable proper lookup of objects for nick, this
   allows proper SET command useage.
 - Make the database GET/SET routines more generic.
 - Fix some compile warnings.

------------------------------------------------------------------------
r206 | stu | 2006-11-04 09:34:41 +0000 (Sat, 04 Nov 2006) | 3 lines

 r258@helium:  stu | 2006-11-04 09:34:36 +0000
 hard coded values are bad

------------------------------------------------------------------------
r205 | many | 2006-11-04 05:58:02 +0000 (Sat, 04 Nov 2006) | 4 lines

- offbyone in connection.c ;
- remove luaserv.lua register_module() (its broken anyway) ;
- check cloakstring for NULL value in oftc.c

------------------------------------------------------------------------
r204 | stu | 2006-11-04 01:01:58 +0000 (Sat, 04 Nov 2006) | 3 lines

 r254@helium:  stu | 2006-11-04 01:01:56 +0000
 Add email to the nick lookup from the db.  Rejig the lua nick interface; it's still not 100%, but email retrieval works..

------------------------------------------------------------------------
r203 | stu | 2006-11-03 23:35:46 +0000 (Fri, 03 Nov 2006) | 9 lines

 r252@helium:  stu | 2006-11-03 23:35:31 +0000
 - Tidy up hooks/callbacks
   send_xxx_cb = struct Callback for a command override
   on_xxx_cb = struct Callback for an event hook
   xxx_hook = dlink_node pointer for the current link in the chain of a command
   or an event
 - Added on_identify event, which the oftc module hooks to set umode +R on
   identify.

------------------------------------------------------------------------
r202 | many | 2006-11-03 20:59:43 +0000 (Fri, 03 Nov 2006) | 2 lines

*Registered is gone, its *Identified now

------------------------------------------------------------------------
r201 | many | 2006-11-03 20:54:27 +0000 (Fri, 03 Nov 2006) | 2 lines

*grmbl*

------------------------------------------------------------------------
r200 | many | 2006-11-03 20:50:36 +0000 (Fri, 03 Nov 2006) | 2 lines

i knew it!

------------------------------------------------------------------------
r199 | stu | 2006-11-03 20:45:01 +0000 (Fri, 03 Nov 2006) | 3 lines

 r243@helium:  stu | 2006-11-03 20:44:44 +0000
 move the stuff in user.c into client.c and remove user.[ch]

------------------------------------------------------------------------
r198 | stu | 2006-11-03 20:44:59 +0000 (Fri, 03 Nov 2006) | 3 lines

 r242@helium:  stu | 2006-11-03 20:41:05 +0000
 move identify_user into interface.c

------------------------------------------------------------------------
r197 | many | 2006-11-03 20:21:05 +0000 (Fri, 03 Nov 2006) | 2 lines

this should fix it - for now

------------------------------------------------------------------------
r196 | stu | 2006-11-02 23:49:20 +0000 (Thu, 02 Nov 2006) | 5 lines

 r240@helium:  stu | 2006-11-02 23:49:14 +0000
 - Make the identify routine generic and put it in user.c
 - add identify to lua
 - add set handlers to nickserv.lua

------------------------------------------------------------------------
r195 | stu | 2006-11-02 20:50:45 +0000 (Thu, 02 Nov 2006) | 3 lines

 r238@helium:  stu | 2006-11-02 20:50:33 +0000
 Add NS_NICK_EMAIL

------------------------------------------------------------------------
r194 | stu | 2006-11-02 20:48:25 +0000 (Thu, 02 Nov 2006) | 3 lines

 r236@helium:  stu | 2006-11-02 20:48:21 +0000
 Add NS_NICK_SET_EMAIL

------------------------------------------------------------------------
r193 | stu | 2006-11-02 20:47:56 +0000 (Thu, 02 Nov 2006) | 3 lines

 r234@helium:  stu | 2006-11-02 20:47:43 +0000
 Add NS_NICK_SET_EMAIL

------------------------------------------------------------------------
r192 | stu | 2006-11-02 19:36:55 +0000 (Thu, 02 Nov 2006) | 3 lines

 r232@helium:  stu | 2006-11-02 19:36:51 +0000
 implement SET and demonstrate its use

------------------------------------------------------------------------
r191 | stu | 2006-11-02 19:16:06 +0000 (Thu, 02 Nov 2006) | 3 lines

 r230@helium:  stu | 2006-11-02 19:16:00 +0000
 bad mc.

------------------------------------------------------------------------
r190 | many | 2006-11-02 11:49:17 +0000 (Thu, 02 Nov 2006) | 2 lines

ohwell, one bug per commit.

------------------------------------------------------------------------
r189 | many | 2006-11-02 11:47:05 +0000 (Thu, 02 Nov 2006) | 2 lines

some more cloaking

------------------------------------------------------------------------
r188 | stu | 2006-11-01 23:27:16 +0000 (Wed, 01 Nov 2006) | 3 lines

 r225@helium:  stu | 2006-11-01 23:27:00 +0000
 make modules -Werror friendly - which largely is just disabling new code that isnt used yet

------------------------------------------------------------------------
r187 | stu | 2006-11-01 23:07:09 +0000 (Wed, 01 Nov 2006) | 3 lines

 r223@helium:  stu | 2006-11-01 23:07:04 +0000
 lua nickserv can drop nicks now.  As a result redid the db_nick_delete function to not need a client struct.  Also undid some mc-isms, foo () { is bad mmkay?

------------------------------------------------------------------------
r186 | many | 2006-11-01 22:41:02 +0000 (Wed, 01 Nov 2006) | 3 lines

fixing mysql query in dbm.c
removing unnecessary code in chanserv.c

------------------------------------------------------------------------
r185 | many | 2006-11-01 22:12:08 +0000 (Wed, 01 Nov 2006) | 2 lines

another faulty msgtab.

------------------------------------------------------------------------
r184 | stu | 2006-11-01 22:02:27 +0000 (Wed, 01 Nov 2006) | 3 lines

 r215@helium:  stu | 2006-11-01 21:59:56 +0000
 Add num_args to the command 'table' in nickserv so that we can do proper arg count checking

------------------------------------------------------------------------
r183 | stu | 2006-11-01 22:02:02 +0000 (Wed, 01 Nov 2006) | 3 lines

 r214@helium:  stu | 2006-11-01 21:46:09 +0000
 fix the gmatch pattern

------------------------------------------------------------------------
r182 | many | 2006-11-01 21:57:00 +0000 (Wed, 01 Nov 2006) | 2 lines

ohwell. we should ask for the RC, shall we?

------------------------------------------------------------------------
r181 | stu | 2006-11-01 21:25:51 +0000 (Wed, 01 Nov 2006) | 3 lines

 r210@helium:  stu | 2006-11-01 21:25:43 +0000
 add register and find database methods for nicknames and demonstrate their useage in nickserv.lua(lua can register nicks now)

------------------------------------------------------------------------
r180 | many | 2006-11-01 21:00:51 +0000 (Wed, 01 Nov 2006) | 2 lines

fix teh msgtab

------------------------------------------------------------------------
r179 | stu | 2006-11-01 20:53:32 +0000 (Wed, 01 Nov 2006) | 3 lines

 r208@helium:  stu | 2006-11-01 20:53:28 +0000
 Well, it would have been cool, if i hadnt introduced a memory leak.

------------------------------------------------------------------------
r178 | stu | 2006-11-01 20:50:56 +0000 (Wed, 01 Nov 2006) | 3 lines

 r206@helium:  stu | 2006-11-01 20:50:53 +0000
 db_register_nick now returns a struct Nick with the registered nick info, cool huh?

------------------------------------------------------------------------
r177 | many | 2006-11-01 20:46:55 +0000 (Wed, 01 Nov 2006) | 2 lines

this was buggy as well

------------------------------------------------------------------------
r176 | stu | 2006-11-01 20:35:14 +0000 (Wed, 01 Nov 2006) | 3 lines

 r202@helium:  stu | 2006-11-01 20:35:07 +0000
 revert that, im on crack

------------------------------------------------------------------------
r175 | stu | 2006-11-01 19:06:15 +0000 (Wed, 01 Nov 2006) | 3 lines

 r196@helium:  stu | 2006-11-01 19:06:07 +0000
 oops

------------------------------------------------------------------------
r174 | tjfontaine | 2006-11-01 17:04:09 +0000 (Wed, 01 Nov 2006) | 2 lines

prepare some dbm.c prototypes

------------------------------------------------------------------------
r173 | many | 2006-11-01 16:42:00 +0000 (Wed, 01 Nov 2006) | 2 lines

grmbl.

------------------------------------------------------------------------
r172 | many | 2006-11-01 16:13:05 +0000 (Wed, 01 Nov 2006) | 2 lines

update pg too

------------------------------------------------------------------------
r171 | many | 2006-11-01 12:36:00 +0000 (Wed, 01 Nov 2006) | 2 lines

add missing prototypes and elements in SET struct for nickserv

------------------------------------------------------------------------
r170 | many | 2006-11-01 12:23:04 +0000 (Wed, 01 Nov 2006) | 5 lines

add cloaking
add basic operserv stuff
fix some typos
fix stus dbm.c breakage from -r161

------------------------------------------------------------------------
r169 | many | 2006-11-01 10:16:35 +0000 (Wed, 01 Nov 2006) | 2 lines

... and also SET EMAIL

------------------------------------------------------------------------
r168 | many | 2006-11-01 10:09:02 +0000 (Wed, 01 Nov 2006) | 2 lines

forgot one fmt

------------------------------------------------------------------------
r167 | many | 2006-11-01 10:00:30 +0000 (Wed, 01 Nov 2006) | 2 lines

add nickservs SET URL 

------------------------------------------------------------------------
r166 | many | 2006-11-01 09:48:22 +0000 (Wed, 01 Nov 2006) | 2 lines

some more DROP related

------------------------------------------------------------------------
r165 | many | 2006-11-01 09:24:47 +0000 (Wed, 01 Nov 2006) | 3 lines

add first lines of code for nick drop, add some more language stuff that 
has been forgotten; it still needs to be filled though.

------------------------------------------------------------------------
r164 | many | 2006-11-01 09:12:25 +0000 (Wed, 01 Nov 2006) | 3 lines

We need umode_cb, so i fixed the name clash by prefixing oftc_ for 
oftc.c

------------------------------------------------------------------------
r163 | tjfontaine | 2006-11-01 03:28:51 +0000 (Wed, 01 Nov 2006) | 5 lines

Make things compile with -Werror because stu and mc are compile nazi's, I'm
unsure if undef'ing the redefined crap from ruby is the RightThing(tm), but it
works. Also map a readonly ChannelStruct very similar to ClientStruct. Update
RubyServ to reflect that.

------------------------------------------------------------------------
r162 | many | 2006-10-31 23:18:49 +0000 (Tue, 31 Oct 2006) | 2 lines

some more fixes and stuff

------------------------------------------------------------------------
r161 | stu | 2006-10-31 23:08:31 +0000 (Tue, 31 Oct 2006) | 3 lines

 r183@helium:  stu | 2006-10-31 22:54:59 +0000
 There's no real reason to pass a client struct into the dbm.

------------------------------------------------------------------------
r160 | many | 2006-10-31 22:07:36 +0000 (Tue, 31 Oct 2006) | 2 lines

adding prototypes

------------------------------------------------------------------------
r159 | stu | 2006-10-31 21:45:57 +0000 (Tue, 31 Oct 2006) | 3 lines

 r179@helium:  stu | 2006-10-31 21:45:44 +0000
 src can now compile with -Werror, which is good.

------------------------------------------------------------------------
r158 | many | 2006-10-31 21:41:53 +0000 (Tue, 31 Oct 2006) | 2 lines

another typo

------------------------------------------------------------------------
r157 | stu | 2006-10-31 20:59:18 +0000 (Tue, 31 Oct 2006) | 3 lines

 r175@helium:  stu | 2006-10-31 20:59:14 +0000
 so, apparently now lua can talk to the database.. also added a parameter to reply to facilitate being able to use fields in language replies.. this needs to be extended to be a) optional and b) variable length.

------------------------------------------------------------------------
r156 | many | 2006-10-31 20:54:01 +0000 (Tue, 31 Oct 2006) | 2 lines

fix two oops

------------------------------------------------------------------------
r155 | stu | 2006-10-31 20:48:00 +0000 (Tue, 31 Oct 2006) | 3 lines

 r170@helium:  stu | 2006-10-31 20:47:54 +0000
 and some more

------------------------------------------------------------------------
r154 | stu | 2006-10-31 20:47:58 +0000 (Tue, 31 Oct 2006) | 3 lines

 r169@helium:  stu | 2006-10-31 20:46:29 +0000
 undo the breakage

------------------------------------------------------------------------
r152 | tjfontaine | 2006-10-31 20:38:16 +0000 (Tue, 31 Oct 2006) | 3 lines

this should mostly bring everything up to stu standards base, not that I can
test atm since he broke the build

------------------------------------------------------------------------
r151 | many | 2006-10-31 20:18:14 +0000 (Tue, 31 Oct 2006) | 2 lines

de-identify client on nick change

------------------------------------------------------------------------
r150 | many | 2006-10-31 19:39:36 +0000 (Tue, 31 Oct 2006) | 3 lines

make stu happy


------------------------------------------------------------------------
r149 | many | 2006-10-31 19:20:14 +0000 (Tue, 31 Oct 2006) | 2 lines

add some more hooks

------------------------------------------------------------------------
r148 | tjfontaine | 2006-10-31 18:27:10 +0000 (Tue, 31 Oct 2006) | 2 lines

obviously I meant to initialize this array

------------------------------------------------------------------------
r147 | tjfontaine | 2006-10-31 18:03:18 +0000 (Tue, 31 Oct 2006) | 3 lines

this adds the new mc server callback hooks to ruby, and updates RubyServ with
an example

------------------------------------------------------------------------
r146 | tjfontaine | 2006-10-31 02:15:25 +0000 (Tue, 31 Oct 2006) | 5 lines

Add Service->data to allow passing the instantiated class around
make things more OOP, ruby modules should inherit from ServiceModule, removes
the need to say things like reply_user('ServiceName' with out passing the
service struct into and out of ruby

------------------------------------------------------------------------
r145 | stu | 2006-10-31 00:26:11 +0000 (Tue, 31 Oct 2006) | 3 lines

 r157@helium:  stu | 2006-10-31 00:22:56 +0000
 rework the lua integration to be a whole lot cooler.  The Service struct is now passed to lua, and exports the necessary interaction methods so that one can do s:reply(client, message) instead of something nasty like reply(name, client, message).  Now.. sleep.. Night -staff.

------------------------------------------------------------------------
r144 | stu | 2006-10-30 23:08:27 +0000 (Mon, 30 Oct 2006) | 3 lines

 r152@helium:  stu | 2006-10-30 23:07:52 +0000
 make stuff more static

------------------------------------------------------------------------
r143 | stu | 2006-10-30 23:08:25 +0000 (Mon, 30 Oct 2006) | 3 lines

 r151@helium:  stu | 2006-10-30 22:41:17 +0000
 remove the double pointer reference in the client struct mapping

------------------------------------------------------------------------
r142 | many | 2006-10-30 22:37:15 +0000 (Mon, 30 Oct 2006) | 3 lines

add some dynamic lua configure-fu.  atleast moan at the user when he 
lacks lua5.1 headers or libs

------------------------------------------------------------------------
r141 | stu | 2006-10-30 22:16:13 +0000 (Mon, 30 Oct 2006) | 3 lines

 r147@helium:  stu | 2006-10-30 22:16:00 +0000
 fix the nick/client struct stuff now that we understand it a little more.  maybe in the future we can add an oftc package which contains all the c methods and makes the lua code a bit nicer to write.

------------------------------------------------------------------------
r140 | many | 2006-10-30 21:59:24 +0000 (Mon, 30 Oct 2006) | 6 lines

This adds -as promised- some callbacks up the chain.
I would like to reserve _cb for forward callbacks and _hook for chain 
propagations, so we dont get into confusion about what is what.
the example shows umode_hook and cmode_hook for now, although there may 
be one or two defects or missing aspects.

------------------------------------------------------------------------
r139 | stu | 2006-10-30 21:40:49 +0000 (Mon, 30 Oct 2006) | 3 lines

 r145@helium:  stu | 2006-10-30 21:40:46 +0000
 add a prototype for check_client

------------------------------------------------------------------------
r138 | stu | 2006-10-30 20:56:53 +0000 (Mon, 30 Oct 2006) | 3 lines

 r143@helium:  stu | 2006-10-30 20:56:37 +0000
 undo test

------------------------------------------------------------------------
r137 | stu | 2006-10-30 20:56:06 +0000 (Mon, 30 Oct 2006) | 3 lines

 r141@helium:  stu | 2006-10-30 20:55:59 +0000
 test

------------------------------------------------------------------------
r136 | stu | 2006-10-30 20:39:24 +0000 (Mon, 30 Oct 2006) | 1 line

Set svn:keywords.
------------------------------------------------------------------------
r135 | stu | 2006-10-30 20:39:03 +0000 (Mon, 30 Oct 2006) | 1 line

add hybridts6.c.. why this wasnt in svn i dont know
------------------------------------------------------------------------
r134 | stu | 2006-10-30 20:24:09 +0000 (Mon, 30 Oct 2006) | 1 line

Add license preamble to all the source files
------------------------------------------------------------------------
r133 | stu | 2006-10-30 19:49:17 +0000 (Mon, 30 Oct 2006) | 1 line

add nick struct to lua, but it doesnt work yet, im going to rejig the whole thing soon.
------------------------------------------------------------------------
r132 | tjfontaine | 2006-10-30 02:41:03 +0000 (Mon, 30 Oct 2006) | 3 lines

add lots of error checking of C -> Ruby calls, make sure we fail graceuflly
that is not killing the rest of services

------------------------------------------------------------------------
r131 | stu | 2006-10-29 22:55:30 +0000 (Sun, 29 Oct 2006) | 1 line

disable the perl stuff for now.
------------------------------------------------------------------------
r130 | stu | 2006-10-29 22:40:03 +0000 (Sun, 29 Oct 2006) | 1 line

making the struct Service unique per-luaservice might be a good idea.  Re-entrance considered good.
------------------------------------------------------------------------
r129 | tjfontaine | 2006-10-29 22:09:31 +0000 (Sun, 29 Oct 2006) | 2 lines

ruby can read the client struct as well, lua-shmua

------------------------------------------------------------------------
r128 | stu | 2006-10-29 21:35:26 +0000 (Sun, 29 Oct 2006) | 1 line

map client->name to lua as proof of concept.. don't expect to be able to change client->name from lua in the release verison. :)
------------------------------------------------------------------------
r127 | tjfontaine | 2006-10-29 21:16:27 +0000 (Sun, 29 Oct 2006) | 2 lines

Ultra simple ruby based services module, no manipulation of client struct yet

------------------------------------------------------------------------
r126 | tjfontaine | 2006-10-29 21:14:19 +0000 (Sun, 29 Oct 2006) | 3 lines

remove some printfs, handle parameter passing properly, use find_service to
reply

------------------------------------------------------------------------
r125 | tjfontaine | 2006-10-29 20:05:37 +0000 (Sun, 29 Oct 2006) | 3 lines

bring ruby stuff up to date, handle some signals better, namely SIGINT
also handle SIGABRT to display errors when ruby exits unhappily

------------------------------------------------------------------------
r124 | stu | 2006-10-29 16:48:49 +0000 (Sun, 29 Oct 2006) | 1 line

add error checking to the lua module handler, so that the services core doesnt explode on lua errors.
------------------------------------------------------------------------
r123 | stu | 2006-10-29 11:44:59 +0000 (Sun, 29 Oct 2006) | 1 line

add nickserv.lua as another example module
------------------------------------------------------------------------
r122 | stu | 2006-10-29 01:11:14 +0100 (Sun, 29 Oct 2006) | 1 line

add the ability to use language files in lua, and pass paramteres into the message handler
------------------------------------------------------------------------
r121 | stu | 2006-10-28 22:43:11 +0100 (Sat, 28 Oct 2006) | 1 line

Make handler_msgta dynamic(using stack variales is bad mmkay?  Add luaserv.lua example lua module.  Let the fun begin.
------------------------------------------------------------------------
r120 | stu | 2006-10-28 20:25:28 +0100 (Sat, 28 Oct 2006) | 1 line

Tidy some of the splitting stuff.  Add a method of hooking services commands and wrap reply_user to services can talk back.
------------------------------------------------------------------------
r119 | stu | 2006-10-28 18:29:57 +0100 (Sat, 28 Oct 2006) | 3 lines

Add a new field called "last_command" to service struct which tells the
handlers which command they're parsing.  Needed for the scritp stuff.

------------------------------------------------------------------------
r118 | tjfontaine | 2006-10-28 17:22:19 +0100 (Sat, 28 Oct 2006) | 2 lines

move ruby to it's own file

------------------------------------------------------------------------
r117 | stu | 2006-10-28 16:29:22 +0100 (Sat, 28 Oct 2006) | 1 line

Move perl voodoo into its own file
------------------------------------------------------------------------
r116 | stu | 2006-10-28 15:36:26 +0100 (Sat, 28 Oct 2006) | 1 line

move the lua processing to its own C file, things are going to get interesting..
------------------------------------------------------------------------
r115 | stu | 2006-10-28 01:10:41 +0100 (Sat, 28 Oct 2006) | 1 line

The madness continues.. beginnings of a LUA scripting engine.. hardcoded include/lib paths atm.  configure-fu needed.
------------------------------------------------------------------------
r114 | stu | 2006-10-28 00:48:14 +0100 (Sat, 28 Oct 2006) | 1 line

Beginnings of embedded perl and perl modules.  Ugly as hell right now, but more to come..
------------------------------------------------------------------------
r113 | stu | 2006-10-27 23:13:40 +0100 (Fri, 27 Oct 2006) | 1 line

beginnings of a ruby module interpreter. more to come.
------------------------------------------------------------------------
r112 | stu | 2006-10-27 21:12:07 +0100 (Fri, 27 Oct 2006) | 1 line

implemented drop and cleaned up a few tings
------------------------------------------------------------------------
r111 | many | 2006-10-23 17:23:27 +0100 (Mon, 23 Oct 2006) | 2 lines

another one ontop of #110

------------------------------------------------------------------------
r110 | many | 2006-10-23 17:10:38 +0100 (Mon, 23 Oct 2006) | 2 lines

i guess i forgot these definitions

------------------------------------------------------------------------
r109 | stu | 2006-10-23 17:04:46 +0100 (Mon, 23 Oct 2006) | 1 line

add chanserv table for pgsql (which no doubt weasel wont approve of)
------------------------------------------------------------------------
r108 | many | 2006-10-09 20:26:16 +0100 (Mon, 09 Oct 2006) | 2 lines

tjf wishes it so

------------------------------------------------------------------------
r107 | stu | 2006-07-10 20:49:01 +0100 (Mon, 10 Jul 2006) | 1 line

fix memory leak
------------------------------------------------------------------------
r106 | many | 2006-07-09 18:03:26 +0100 (Sun, 09 Jul 2006) | 2 lines

attaching nick to client (see commits 102 and 105) needs to be done before identify_user()

------------------------------------------------------------------------
r105 | many | 2006-07-09 17:23:38 +0100 (Sun, 09 Jul 2006) | 2 lines

In REGISTER nick, we also should attach the Nick Record to Client only when the register is successful.

------------------------------------------------------------------------
r104 | many | 2006-07-09 16:46:47 +0100 (Sun, 09 Jul 2006) | 2 lines

these language strings do not take params

------------------------------------------------------------------------
r103 | stu | 2006-07-09 11:07:25 +0100 (Sun, 09 Jul 2006) | 1 line

fix compile error
------------------------------------------------------------------------
r102 | many | 2006-07-09 08:41:58 +0100 (Sun, 09 Jul 2006) | 3 lines

- add password changing facility
- in IDENTIFY, i assume we should attach Nick to Client only if SUCCESS

------------------------------------------------------------------------
r101 | many | 2006-07-08 22:36:58 +0100 (Sat, 08 Jul 2006) | 2 lines

add more dummies

------------------------------------------------------------------------
r100 | stu | 2006-07-08 20:54:59 +0100 (Sat, 08 Jul 2006) | 1 line

add handler for AWAY.  Hi revision 100
------------------------------------------------------------------------
r99 | many | 2006-07-08 19:45:48 +0100 (Sat, 08 Jul 2006) | 2 lines

damn me, good boy tj.  ofcourse this is how it should be.

------------------------------------------------------------------------
r98 | many | 2006-07-08 19:42:52 +0100 (Sat, 08 Jul 2006) | 2 lines

cleanup chanserv on unload

------------------------------------------------------------------------
r97 | many | 2006-07-08 19:39:46 +0100 (Sat, 08 Jul 2006) | 2 lines

fix minor things

------------------------------------------------------------------------
r96 | many | 2006-07-06 22:31:56 +0100 (Thu, 06 Jul 2006) | 2 lines

bare(st) bone chanserv

------------------------------------------------------------------------
r95 | stu | 2006-07-04 12:02:33 +0100 (Tue, 04 Jul 2006) | 1 line

let initialise channel_mode so we dont core eh?
------------------------------------------------------------------------
r94 | stu | 2006-07-03 22:43:11 +0100 (Mon, 03 Jul 2006) | 1 line

language from short -> int
------------------------------------------------------------------------
r93 | stu | 2006-07-03 22:31:47 +0100 (Mon, 03 Jul 2006) | 1 line

Make nickserv reloadable
------------------------------------------------------------------------
r92 | many | 2006-07-03 21:50:51 +0100 (Mon, 03 Jul 2006) | 2 lines

fix typo and foreigner-custom strange-reading sentence.

------------------------------------------------------------------------
r91 | stu | 2006-07-03 21:49:16 +0100 (Mon, 03 Jul 2006) | 1 line

Fix header for german language
------------------------------------------------------------------------
r90 | many | 2006-07-03 21:37:03 +0100 (Mon, 03 Jul 2006) | 2 lines

add german

------------------------------------------------------------------------
r89 | stu | 2006-07-03 21:08:46 +0100 (Mon, 03 Jul 2006) | 1 line

Add settable language and add languages to installer
------------------------------------------------------------------------
r88 | stu | 2006-07-03 19:37:42 +0100 (Mon, 03 Jul 2006) | 1 line

Take account of admin flag
------------------------------------------------------------------------
r87 | stu | 2006-07-03 19:15:54 +0100 (Mon, 03 Jul 2006) | 1 line

Add RAW - just for cdlu\!
------------------------------------------------------------------------
r86 | stu | 2006-07-03 18:55:59 +0100 (Mon, 03 Jul 2006) | 1 line

Cleanup after oruselves or we cause nasty crashes..
------------------------------------------------------------------------
r85 | stu | 2006-07-03 18:33:56 +0100 (Mon, 03 Jul 2006) | 1 line

fix sub commands a bit and suberise operserv
------------------------------------------------------------------------
r84 | stu | 2006-07-03 18:04:20 +0100 (Mon, 03 Jul 2006) | 1 line

Add sub commands to commands.
------------------------------------------------------------------------
r83 | stu | 2006-07-03 15:09:18 +0100 (Mon, 03 Jul 2006) | 1 line

Add HELP functionality in msgtab
------------------------------------------------------------------------
r82 | stu | 2006-07-03 00:05:29 +0100 (Mon, 03 Jul 2006) | 1 line

Add initial support for languages
------------------------------------------------------------------------
r81 | stu | 2006-07-02 23:01:54 +0100 (Sun, 02 Jul 2006) | 1 line

nicknames -> nickname - should be a config option one day..
------------------------------------------------------------------------
r80 | stu | 2006-07-02 23:00:31 +0100 (Sun, 02 Jul 2006) | 1 line

add pgsql schema(which im sure weasel will complain at :))
------------------------------------------------------------------------
r79 | stu | 2006-07-02 22:53:51 +0100 (Sun, 02 Jul 2006) | 1 line

as much as weasel doesn't like it, we do rather like auto_increment
------------------------------------------------------------------------
r78 | stu | 2006-07-02 22:51:00 +0100 (Sun, 02 Jul 2006) | 1 line

Un Butchure the mysql schema
------------------------------------------------------------------------
r77 | stu | 2006-07-02 22:39:21 +0100 (Sun, 02 Jul 2006) | 1 line

Add nickserv SQL Scheme for mysql(hi weasel)
------------------------------------------------------------------------
r76 | stu | 2006-07-02 22:15:19 +0100 (Sun, 02 Jul 2006) | 1 line

Set umode +R on nick registration/identify.  This should probably be the job of the protocol module
------------------------------------------------------------------------
r75 | stu | 2006-07-02 21:20:51 +0100 (Sun, 02 Jul 2006) | 1 line

Added identify command
------------------------------------------------------------------------
r74 | stu | 2006-07-02 21:00:26 +0100 (Sun, 02 Jul 2006) | 1 line

the gnotice belongs to the service not the core
------------------------------------------------------------------------
r73 | stu | 2006-07-02 20:58:36 +0100 (Sun, 02 Jul 2006) | 1 line

gnotice is oftc not irc
------------------------------------------------------------------------
r72 | stu | 2006-07-02 20:57:08 +0100 (Sun, 02 Jul 2006) | 1 line

Add crypyting of passwords
------------------------------------------------------------------------
r71 | stu | 2006-07-02 19:54:24 +0100 (Sun, 02 Jul 2006) | 1 line

how about we dont let i go negative
------------------------------------------------------------------------
r70 | stu | 2006-07-02 19:49:36 +0100 (Sun, 02 Jul 2006) | 1 line

Send user a notice if they dont supply enough paramters for a command
------------------------------------------------------------------------
r69 | stu | 2006-07-02 19:37:39 +0100 (Sun, 02 Jul 2006) | 1 line

IRC_BUFFER -> IRC_BUFSIZE(my fault) and use ircsprintf instead as its going out over irc
------------------------------------------------------------------------
r68 | many | 2006-07-02 19:32:40 +0100 (Sun, 02 Jul 2006) | 2 lines

changing GNOTICE behaviour a bit

------------------------------------------------------------------------
r67 | stu | 2006-07-02 19:21:35 +0100 (Sun, 02 Jul 2006) | 1 line

add nickname registration
------------------------------------------------------------------------
r66 | many | 2006-07-02 19:19:15 +0100 (Sun, 02 Jul 2006) | 2 lines

GNOTICE takes an additional parameter

------------------------------------------------------------------------
r65 | many | 2006-07-02 19:08:41 +0100 (Sun, 02 Jul 2006) | 2 lines

adding module unloading also

------------------------------------------------------------------------
r64 | many | 2006-07-02 18:35:38 +0100 (Sun, 02 Jul 2006) | 2 lines

fix annoying TS warnings

------------------------------------------------------------------------
r63 | many | 2006-07-02 18:20:18 +0100 (Sun, 02 Jul 2006) | 2 lines

ask whos sending, sbustitute some printf by gnotice

------------------------------------------------------------------------
r62 | many | 2006-07-02 17:50:21 +0100 (Sun, 02 Jul 2006) | 2 lines

Umm, add global notices, va_arg'ised and... i forgot.

------------------------------------------------------------------------
r61 | many | 2006-07-02 13:52:42 +0100 (Sun, 02 Jul 2006) | 2 lines

Add initial operserv, for mod load/unloading

------------------------------------------------------------------------
r60 | many | 2006-07-01 21:26:42 +0100 (Sat, 01 Jul 2006) | 2 lines

Add NOTICE CB and let nickserv use reply_user() - more logical and RFC compliant

------------------------------------------------------------------------
r59 | many | 2006-07-01 21:05:58 +0100 (Sat, 01 Jul 2006) | 2 lines

lets see if i got this straight...

------------------------------------------------------------------------
r58 | stu | 2006-06-30 17:30:20 +0100 (Fri, 30 Jun 2006) | 1 line

allow services modules to register handlers for their own commands
------------------------------------------------------------------------
r57 | stu | 2006-06-30 12:23:29 +0100 (Fri, 30 Jun 2006) | 1 line

Fixed a bug that caused a core when we were SQUIT
------------------------------------------------------------------------
r56 | stu | 2006-06-30 11:18:36 +0100 (Fri, 30 Jun 2006) | 1 line

Add the services interface.  Add a basic nickserv as an example of its usage
------------------------------------------------------------------------
r55 | stu | 2006-06-29 21:29:02 +0100 (Thu, 29 Jun 2006) | 1 line

Add blank pong handler
------------------------------------------------------------------------
r54 | stu | 2006-06-29 21:26:18 +0100 (Thu, 29 Jun 2006) | 1 line

Add MODE, redo NICK.
------------------------------------------------------------------------
r53 | many | 2006-06-29 20:34:49 +0100 (Thu, 29 Jun 2006) | 2 lines

another bad boy typo

------------------------------------------------------------------------
r52 | many | 2006-06-29 20:13:12 +0100 (Thu, 29 Jun 2006) | 2 lines

little mistake, formatting and documentation for last commit

------------------------------------------------------------------------
r51 | many | 2006-06-29 20:10:00 +0100 (Thu, 29 Jun 2006) | 2 lines

make irc_sendmsg_join use SJOIN

------------------------------------------------------------------------
r50 | many | 2006-06-29 19:58:47 +0100 (Thu, 29 Jun 2006) | 2 lines

add more irc_sendmsg_* stuff

------------------------------------------------------------------------
r49 | stu | 2006-06-29 14:41:21 +0100 (Thu, 29 Jun 2006) | 1 line

remove 'sending' message from send.c, it has served its purpose
------------------------------------------------------------------------
r48 | stu | 2006-06-29 14:34:17 +0100 (Thu, 29 Jun 2006) | 1 line

make services less noisy, now only echo unknown messages.  Also add handler for GNOTICE in oftc module
------------------------------------------------------------------------
r47 | stu | 2006-06-28 22:59:29 +0100 (Wed, 28 Jun 2006) | 1 line

Added QUIT/SQUIT
------------------------------------------------------------------------
r46 | stu | 2006-06-28 21:04:49 +0100 (Wed, 28 Jun 2006) | 1 line

Add PART, also reverse client and source paramters we got wrong.
------------------------------------------------------------------------
r45 | stu | 2006-06-28 20:10:12 +0100 (Wed, 28 Jun 2006) | 1 line

Complete SJOIN - as a side effect now know about channel modes and users on channels
------------------------------------------------------------------------
r44 | stu | 2006-06-28 15:12:02 +0100 (Wed, 28 Jun 2006) | 1 line

Switch client pointers to use the bloack heap allocator
------------------------------------------------------------------------
r43 | stu | 2006-06-27 22:19:41 +0100 (Tue, 27 Jun 2006) | 1 line

add the startings of SJOIN - we now add new channels
------------------------------------------------------------------------
r42 | many | 2006-06-27 21:55:52 +0100 (Tue, 27 Jun 2006) | 2 lines

oopsie. forgot to add oftc.c to the compilation of modules

------------------------------------------------------------------------
r41 | stu | 2006-06-27 21:52:26 +0100 (Tue, 27 Jun 2006) | 2 lines

Added a new header, missed in last commit

------------------------------------------------------------------------
r40 | stu | 2006-06-27 21:45:05 +0100 (Tue, 27 Jun 2006) | 1 line

Fix compile warnings
------------------------------------------------------------------------
r39 | many | 2006-06-27 21:42:35 +0100 (Tue, 27 Jun 2006) | 2 lines

oops. this should be void, not void *

------------------------------------------------------------------------
r38 | many | 2006-06-27 21:39:03 +0100 (Tue, 27 Jun 2006) | 2 lines

add oftc.c: SVSCLOAK, SVSMODE, SVSNICK

------------------------------------------------------------------------
r37 | many | 2006-06-27 19:50:35 +0100 (Tue, 27 Jun 2006) | 2 lines

add introduction of servers and nicks, lets see wether cryo cries

------------------------------------------------------------------------
r36 | stu | 2006-06-27 14:37:12 +0100 (Tue, 27 Jun 2006) | 1 line

Check for opers, remove compile warnings and set ->from properly
------------------------------------------------------------------------
r35 | stu | 2006-06-26 23:42:17 +0100 (Mon, 26 Jun 2006) | 1 line

Add NICK handling for both 9 parameter(burst) and 3 parameter(change)
------------------------------------------------------------------------
r34 | stu | 2006-06-26 21:24:51 +0100 (Mon, 26 Jun 2006) | 1 line

PING! (sorry mc)
------------------------------------------------------------------------
r33 | stu | 2006-06-26 21:13:52 +0100 (Mon, 26 Jun 2006) | 1 line

add SERVER message handler
------------------------------------------------------------------------
r32 | stu | 2006-06-25 15:32:08 +0100 (Sun, 25 Jun 2006) | 1 line

*_t -> struct *
------------------------------------------------------------------------
r31 | stu | 2006-06-25 12:10:55 +0100 (Sun, 25 Jun 2006) | 1 line

Removed old config parser - replaced it with shiney new one.
------------------------------------------------------------------------
r30 | many | 2006-06-24 14:06:34 +0100 (Sat, 24 Jun 2006) | 2 lines

send empty burst, signal EOB NON-TS6 immediately

------------------------------------------------------------------------
r29 | stu | 2006-06-23 17:26:51 +0100 (Fri, 23 Jun 2006) | 1 line

actually send data out, use TS6, and reply to pings
------------------------------------------------------------------------
r28 | stu | 2006-06-23 12:28:44 +0100 (Fri, 23 Jun 2006) | 1 line

fix makefile.in
------------------------------------------------------------------------
r27 | stu | 2006-06-23 12:18:05 +0100 (Fri, 23 Jun 2006) | 1 line

add events, sending to the server and a basic irc protocol handler that doesnt work but did a minute ago\! mc fix\!
------------------------------------------------------------------------
r26 | stu | 2006-06-22 22:19:55 +0100 (Thu, 22 Jun 2006) | 1 line

Add irc parsing and hash tables.  Need to test this on another box as it wont connect in vmware
------------------------------------------------------------------------
r25 | stu | 2006-06-22 20:23:11 +0100 (Thu, 22 Jun 2006) | 1 line

Add connection code and basic (non functional) parsing
------------------------------------------------------------------------
r24 | stu | 2006-06-13 10:50:06 +0100 (Tue, 13 Jun 2006) | 1 line

Make the parser compile again
------------------------------------------------------------------------
r23 | stu | 2006-06-12 22:38:17 +0100 (Mon, 12 Jun 2006) | 1 line

Everyone likes a repoistory that compiles
------------------------------------------------------------------------
r22 | stu | 2006-06-12 22:33:21 +0100 (Mon, 12 Jun 2006) | 1 line

Move services -> src for clarity
------------------------------------------------------------------------
r21 | stu | 2006-06-12 22:31:44 +0100 (Mon, 12 Jun 2006) | 1 line

Add rudimentary connection stuff
------------------------------------------------------------------------
r20 | stu | 2006-06-05 09:57:08 +0100 (Mon, 05 Jun 2006) | 1 line

Fixed svn:ignore for the repo
------------------------------------------------------------------------
r19 | stu | 2006-06-05 09:31:04 +0100 (Mon, 05 Jun 2006) | 1 line

Set property svn:ignore and add in the config file portion of connect {}
------------------------------------------------------------------------
r18 | stu | 2006-06-03 23:55:41 +0100 (Sat, 03 Jun 2006) | 1 line

Now we can connect to the database using the information supplied in the config file
------------------------------------------------------------------------
r17 | stu | 2006-06-03 15:09:09 +0100 (Sat, 03 Jun 2006) | 1 line

fix dbm header with the right prototypes and fix the build process to install etc/ on make install
------------------------------------------------------------------------
r16 | stu | 2006-06-03 15:04:19 +0100 (Sat, 03 Jun 2006) | 1 line

Add database config entry and basic libdbi loading
------------------------------------------------------------------------
r15 | stu | 2006-06-01 23:20:36 +0100 (Thu, 01 Jun 2006) | 1 line

Add services_info config section (and blank out the parser and lexer), now parsed and stored in a global services_info_t
------------------------------------------------------------------------
r14 | tjfontaine | 2006-06-01 22:39:09 +0100 (Thu, 01 Jun 2006) | 2 lines

add hard deps on bison/yacc flex/lex

------------------------------------------------------------------------
r13 | stu | 2006-06-01 22:12:50 +0100 (Thu, 01 Jun 2006) | 1 line

Add etc dir and example.conf
------------------------------------------------------------------------
r12 | stu | 2006-06-01 22:07:01 +0100 (Thu, 01 Jun 2006) | 1 line

Put back IRC_BUFSIZE with a different name
------------------------------------------------------------------------
r11 | tjfontaine | 2006-06-01 22:02:13 +0100 (Thu, 01 Jun 2006) | 2 lines

this should fixify the build for now

------------------------------------------------------------------------
r10 | stu | 2006-06-01 21:48:25 +0100 (Thu, 01 Jun 2006) | 1 line

add dbm.c - the database interface
------------------------------------------------------------------------
r9 | many | 2006-06-01 21:24:54 +0100 (Thu, 01 Jun 2006) | 2 lines

removed this from configure in #8, so it should begone here too

------------------------------------------------------------------------
r8 | many | 2006-06-01 21:18:32 +0100 (Thu, 01 Jun 2006) | 2 lines

some more adjustments to "services"

------------------------------------------------------------------------
r7 | stu | 2006-06-01 20:47:04 +0100 (Thu, 01 Jun 2006) | 1 line

Add config parser - which does nothing right now and is configured for ircd options, not ours :)
------------------------------------------------------------------------
r6 | tjfontaine | 2006-06-01 20:28:46 +0100 (Thu, 01 Jun 2006) | 3 lines

delete configure, add check for libdbi, add autogen.sh glorified autoconf && 
./configure "$@"

------------------------------------------------------------------------
r5 | stu | 2006-05-31 15:54:36 +0100 (Wed, 31 May 2006) | 1 line

Fix the build system a bit.  It will now depend, make, make install and clean/distclean properly.
------------------------------------------------------------------------
r4 | stu | 2006-05-31 15:45:27 +0100 (Wed, 31 May 2006) | 1 line

make configure unbroken
------------------------------------------------------------------------
r3 | stu | 2006-05-31 15:09:35 +0100 (Wed, 31 May 2006) | 1 line

add basic core
------------------------------------------------------------------------
r2 | stu | 2006-05-31 00:24:00 +0100 (Wed, 31 May 2006) | 1 line

New import - we have libio from hybrid, re modeled to be more standalone so far.
------------------------------------------------------------------------
r1 | stu | 2006-05-31 00:23:44 +0100 (Wed, 31 May 2006) | 1 line

create repo structure
------------------------------------------------------------------------
